<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/index.css">
  <script src="index.js"></script>
  <title>Tre&aleph;ds.com</title>
</head>
<body>
<div id="loader" style="display:none">
  <div class="grid-bg"></div>
  <div class="glow"></div>
  <div class="scanline"></div>
  <div class="corner tl"></div>
  <div class="corner tr"></div>
  <div class="corner bl"></div>
  <div class="corner br"></div>
  <div class="loader-version">v1.0 · BETA</div>
  <div class="loader-center">
    <div class="loader-logo" data-text="Treℵds">Tre<span class="aleph">ℵ</span>ds</div>
    <div class="loader-type" id="loaderType"></div>
    <div class="loader-progress">
      <div class="progress-track">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="progress-labels">
        <div class="progress-status" id="progressStatus">Initializing</div>
        <div class="progress-pct" id="progressPct">0%</div>
      </div>
    </div>
  </div>
  <div class="loader-tagline">
    <p>A social and research network for universities</p>
    <p style="margin-top:6px;">We have opened up <b>Treℵds</b> for popular consumption at <b>Lagos State University (LASU).</b></p>
  </div>
</div>


<section class="Accauthsection" id="Accauthsection" style="display:block">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    .Accauthsection {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #000;
      color: #fff;
      line-height: 1.6;

    }
    body{
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #000;
      color: #fff;
      line-height: 1.6;
    
    }


    /* Header */
    .header {
      padding: 20px 40px;
      border-bottom: 1px solid #333;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 20px;
      font-weight: 600;
    }

    .nav-links {
      display: flex;
      gap: 32px;
    }

    .nav-links a {
      color: #fff;
      text-decoration: none;
      font-size: 14px;
      transition: opacity 0.2s;
    }

    .nav-links a:hover {
      opacity: 0.7;
    }

    /* Container */
    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 80px 40px;
    }

    /* Hero */
    .hero {
      text-align: center;
      margin-bottom: 120px;
    }

    .hero h1 {
      font-size: 48px;
      font-weight: 600;
      margin-bottom: 16px;
      line-height: 1.5;
    }

    .hero p {
      font-size: 18px;
      color: #999;
      margin-bottom: 40px;
    }
.hero {
  border-radius: 4px;
  position: relative;
  padding: 80px 20px 60px;
  text-align: center;
  background: linear-gradient(135deg, 
    #000000 0%,    /* Pure black */
    gray 25%,   /* Almost black */
    #141414 50%,   /* Dark gray */
    #1a1a1a 75%,   /* Charcoal */
    dodgerblue 100%   /* Back to black */
  );
  background-size: 400% 400%;
  animation: black-shift 30s ease-in-out infinite;
}

@keyframes black-shift {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}
    

    .cta-buttons {
      display: flex;
      gap: 16px;
      justify-content: center;
    }

    .btn {
      padding: 12px 24px;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
      border: none;
    }

    .btn-primary {
      background: #fff;
      color: #000;
    }

    .btn-primary:hover {
      background: #e6e6e6;
    }

    .btn-secondary {
      background: transparent;
      color: #fff;
      border: 1px solid #333;
    }

    .btn-secondary:hover {
      border-color: #fff;
    }

    /* Section */
    .section {
      margin-bottom: 80px;
    }

    .section-title {
      font-size: 32px;
      font-weight: 600;
      margin-bottom: 38px;
    }

    /* Release Notes */
    .release-item {
      padding: 24px 0;
      border-bottom: 1px solid #333;
    }

    .release-item:last-child {
      border-bottom: none;
    }

    .release-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .release-title {
      font-size: 18px;
      font-weight: 600;
    }

    .release-date {
      font-size: 14px;
      color: #666;
    }

    .release-description {
      font-size: 15px;
      color: #999;
      line-height: 1.6;
    }

    .release-list {
      list-style: none;
      margin-top: 12px;
    }

    .release-list li {
      font-size: 14px;
      color: #999;
      padding-left: 20px;
      position: relative;
      margin-bottom: 8px;
    }

    .release-list li::before {
      content: '•';
      position: absolute;
      left: 0;
    }

    /* Features */
    .features-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 32px;
    }

    .feature {
      padding: 24px 0;
    }

    .feature h3 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .feature p {
      font-size: 14px;
      color: #999;
      line-height: 1.6;
    }

    /* Terms of Service */
    .terms {
      font-size: 14px;
      line-height: 1.8;
      color: #999;
    }

    .terms h2 {
      font-size: 24px;
      font-weight: 600;
      color: #fff;
      margin: 32px 0 12px;
    }

    .terms h3 {
      font-size: 18px;
      font-weight: 600;
      color: #fff;
      margin: 50px 0 12px;
    }
    
    .terms p{
      color: #999;
    }
    .terms ul {
      list-style: none;
      margin: 12px 0;
      color: #999;
    }

    .terms ul li {
      padding-left: 20px;
      position: relative;
      margin-bottom: 8px;
      color: #999;
    }

    .terms ul li::before {
      content: '•';
      position: absolute;
      left: 0;
    }

    .terms a {
      color: #fff;
      text-decoration: underline;
    }

    /* Footer */
    .footer {
      border-top: 1px solid #333;
      padding: 40px;
      margin-top: 120px;
    }

    .footer-content {
      max-width: 800px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .footer-text {
      font-size: 14px;
      color: #666;
    }

    .footer-links {
      display: flex;
      gap: 24px;
    }

    .footer-links a {
      color: #999;
      text-decoration: none;
      font-size: 14px;
      transition: color 0.2s;
    }

    .footer-links a:hover {
      color: #fff;
    }

    /* Modal */
    .modal {
      display:none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.9);
      z-index:1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow-y: scroll;

    }

    .modal.active {
      display: block;
    }

    .modal-content {
      background: #000;
      border: 1px solid #333;
      border-radius: 8px;
      max-width: 400px;
      width: 100%;
      padding: 40px;
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      color: #666;
      font-size: 24px;
      cursor: pointer;
      transition: color 0.2s;
    }

    .modal-close:hover {
      color: #fff;
    }

    .modal h2 {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .modal p {
      font-size: 14px;
      color: #999;
      margin-bottom: 32px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-size: 14px;
      margin-bottom: 8px;
      color: #fff;
    }

    .form-input {
      width: 100%;
      padding: 12px;
      background: #000;
      border: 1px solid #333;
      border-radius: 4px;
      color: #fff;
      font-size: 14px;
      transition: border-color 0.2s;
    }

    .form-input:focus {
      outline: none;
      border-color: #666;
    }

    .form-input::placeholder {
      color: #666;
    }

    .form-footer {
      margin-top: 20px;
      text-align: center;
      font-size: 14px;
      color: #999;
    }

    .form-footer a {
      color: #fff;
      text-decoration: none;
    }

    .form-footer a:hover {
      text-decoration: underline;
    }

    .divider {
      text-align: center;
      color: #666;
      margin: 24px 0;
      font-size: 14px;
    }

    .social-btn {
      width: 100%;
      padding: 12px;
      background: transparent;
      border: 1px solid #333;
      border-radius: 4px;
      color: #fff;
      font-size: 14px;
      cursor: pointer;
      transition: border-color 0.2s;
      margin-bottom: 12px;
    }

    .social-btn:hover {
      border-color: #666;
    }

    /* Mobile */
    @media (max-width: 768px) {
      .header {
        padding: 20px;
        flex-direction: column;
        gap: 20px;
      }

      .nav-links {
        gap: 20px;
      }

      .container {
        padding: 40px 20px;
      }

      .hero h1 {
        font-size: 32px;
      }

      .features-grid {
        grid-template-columns: 1fr;
      }

      .footer-content {
        flex-direction: column;
        gap: 20px;
        text-align: center;
      }
    }
  </style>



  <!-- Loading -->
<div id="loading">
  <canvas id="loadingCanvas"></canvas>
  <div class="ld-grid"></div>
  <div class="ld-glow"></div>
  <div class="ld-scanline"></div>
  <div class="ld-corner tl"></div>
  <div class="ld-corner tr"></div>
  <div class="ld-corner bl"></div>
  <div class="ld-corner br"></div>
  <div class="ld-version">v1.0 · BETA</div>
  <div class="loading-inner">
    <div class="loading-logo" data-text="Treℵds">Tre<span class="aleph">ℵ</span>ds</div>
    <div class="ld-type" id="ldType"></div>
    <div class="loading-bar"><div class="loading-bar-fill" id="ldBarFill"></div></div>
    <div class="ld-progress-labels">
      <div class="ld-status" id="ldStatus">Loading</div>
      <div class="ld-pct" id="ldPct">0%</div>
    </div>
    <div class="loading-tagline">A social and research network for universities</div>
    <div class="loading-sub">We have opened up Tre<span style="color:#555">ℵ</span>ds for popular consumption at <b>Lagos State University (LASU).</b></div>
    <div class="loading-features">
      <span class="lf">Research</span>
      <span class="lf-dot">·</span>
      <span class="lf">Collaborate</span>
      <span class="lf-dot">·</span>
      <span class="lf">Discover</span>
    </div>
  </div>
</div>

<style>
#loading {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: #000;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  transition: opacity 1s ease;
  overflow: hidden;
}
#loading.hide {
  opacity: 0;
  pointer-events: none;
}
#loadingCanvas {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  opacity: 0.5;
}
.ld-grid {
  position: absolute; inset: 0;
  background-image:
    linear-gradient(rgba(255,255,255,0.025) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.025) 1px, transparent 1px);
  background-size: 40px 40px;
  animation: ldGridPulse 5s ease infinite;
}
@keyframes ldGridPulse { 0%,100%{opacity:.4} 50%{opacity:1} }
.ld-glow {
  position: absolute;
  width: 500px; height: 500px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,255,255,0.03) 0%, transparent 70%);
  animation: ldGlow 4s ease infinite;
}
@keyframes ldGlow { 0%,100%{transform:scale(.8);opacity:.4} 50%{transform:scale(1.3);opacity:1} }
.ld-scanline {
  position: absolute; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  animation: ldScan 4s linear infinite;
}
@keyframes ldScan { 0%{top:-1px} 100%{top:100%} }
.ld-corner {
  position: absolute; width: 24px; height: 24px;
  opacity: 0; animation: ldCorner 0.6s ease forwards;
}
.ld-corner.tl { top:24px; left:24px; border-top:1px solid #2a2a2a; border-left:1px solid #2a2a2a; animation-delay:.3s; }
.ld-corner.tr { top:24px; right:24px; border-top:1px solid #2a2a2a; border-right:1px solid #2a2a2a; animation-delay:.4s; }
.ld-corner.bl { bottom:24px; left:24px; border-bottom:1px solid #2a2a2a; border-left:1px solid #2a2a2a; animation-delay:.5s; }
.ld-corner.br { bottom:24px; right:24px; border-bottom:1px solid #2a2a2a; border-right:1px solid #2a2a2a; animation-delay:.6s; }
@keyframes ldCorner { 0%{opacity:0;transform:scale(.3)} 100%{opacity:1;transform:scale(1)} }
.ld-version {
  position: absolute; top:32px; right:32px;
  font-size: 9px; color: #1e1e1e; letter-spacing: 2px; text-transform: uppercase;
  opacity: 0; animation: ldFade 0.5s ease forwards; animation-delay: .5s;
}
.loading-inner {
  display: flex; flex-direction: column;
  align-items: center; gap: 16px;
  position: relative; z-index: 2;
}
.loading-logo {
  font-size: 80px; font-weight: 900; color: #fff;
  letter-spacing: -4px; position: relative;
  opacity: 0;
  animation: ldLogoIn 1.5s cubic-bezier(0.16,1,0.3,1) forwards;
  animation-delay: 0.4s;
}
.loading-logo .aleph { color: #333; }
.loading-logo::before, .loading-logo::after {
  content: attr(data-text);
  position: absolute; top:0; left:0;
  width:100%; font-size:inherit; font-weight:inherit; letter-spacing:inherit;
}
.loading-logo::before {
  color: rgba(255,255,255,0.12);
  animation: ldGlitch1 5s infinite; animation-delay: 2s;
  clip-path: polygon(0 20%,100% 20%,100% 40%,0 40%);
}
.loading-logo::after {
  color: rgba(255,255,255,0.08);
  animation: ldGlitch2 5s infinite; animation-delay: 2.2s;
  clip-path: polygon(0 60%,100% 60%,100% 80%,0 80%);
}
@keyframes ldGlitch1 { 0%,88%,100%{transform:translateX(0);opacity:0} 90%{transform:translateX(-5px);opacity:1} 92%{transform:translateX(5px);opacity:1} 94%{transform:translateX(-2px);opacity:1} 96%{opacity:0} }
@keyframes ldGlitch2 { 0%,88%,100%{transform:translateX(0);opacity:0} 91%{transform:translateX(5px);opacity:1} 93%{transform:translateX(-5px);opacity:1} 95%{transform:translateX(2px);opacity:1} 97%{opacity:0} }
@keyframes ldLogoIn { 0%{opacity:0;transform:translateY(40px) skewX(-4deg);filter:blur(12px)} 100%{opacity:1;transform:translateY(0) skewX(0);filter:blur(0)} }
.ld-type {
  font-size:11px; color:#2e2e2e; letter-spacing:4px; text-transform:uppercase;
  height:14px; overflow:hidden;
  opacity:0; animation:ldFade 0.5s ease forwards; animation-delay:1.2s;
}
.loading-bar {
  width:180px; height:1px;
  background:#111; border-radius:2px; overflow:hidden;
  opacity:0; animation:ldFade 0.5s ease forwards; animation-delay:1s;
}
.loading-bar-fill {
  height:100%; width:0%;
  background: linear-gradient(90deg,#222,#fff,#222);
  transition: width 0.4s ease;
}
.loading-bar-fill::after {
  content:''; position:absolute; right:0; top:-2px;
  width:4px; height:5px; background:#fff; box-shadow:0 0 8px #fff;
}
.ld-progress-labels {
  display:flex; justify-content:space-between; align-items:center;
  width:180px;
  opacity:0; animation:ldFade 0.5s ease forwards; animation-delay:1s;
}
.ld-status { font-size:9px; color:#2a2a2a; letter-spacing:1.5px; text-transform:uppercase; }
.ld-pct { font-size:9px; color:#2a2a2a; letter-spacing:1px; }
.loading-tagline {
  font-size:11px; color:#444; letter-spacing:2px; text-transform:uppercase;
  opacity:0; animation:ldFadeUp 1s ease forwards; animation-delay:1.6s;
  text-align: center;
  width: 100vw;
  position: relative;
}
.loading-sub {
  font-size:12px; color:#2a2a2a; text-align:center;
  max-width:280px; line-height:1.8;
  opacity:0; animation:ldFadeUp 1s ease forwards; animation-delay:2.2s;
}
.loading-features {
  display:flex; gap:10px; align-items:center;
  opacity:0; animation:ldFadeUp 1s ease forwards; animation-delay:3s;
}
.lf { font-size:10px; color:#333; letter-spacing:2px; text-transform:uppercase; }
.lf-dot { color:#1e1e1e; font-size:14px; }
@keyframes ldFade { to{opacity:1} }
@keyframes ldFadeUp { 0%{opacity:0;transform:translateY(8px)} 100%{opacity:1;transform:translateY(0)} }
</style>

<script>
// ── LANDING LOADER ───────────────────────────────────────────────
(function() {
  // Particle canvas
  const canvas = document.getElementById('loadingCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const particles = Array.from({length: 50}, () => ({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: Math.random() * 1.2 + 0.2,
    dx: (Math.random() - 0.5) * 0.25,
    dy: (Math.random() - 0.5) * 0.25,
    o: Math.random() * 0.4 + 0.05
  }));

  let animId;
  function drawParticles() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach(p => {
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255,255,255,${p.o})`;
      ctx.fill();
      p.x += p.dx; p.y += p.dy;
      if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
      if (p.y < 0 || p.y > canvas.height) p.dy *= -1;
    });
    animId = requestAnimationFrame(drawParticles);
  }
  drawParticles();

  // Typewriter
  const typeEl = document.getElementById('ldType');
  const ldPhrases = ['Research · Collaborate · Discover', 'For university minds.', 'Knowledge is currency.'];
  let ldPI=0, ldCI=0, ldT=true;
  function ldType() {
    if (!typeEl) return;
    const p = ldPhrases[ldPI];
    if (ldT) {
      typeEl.textContent = p.slice(0, ldCI+1); ldCI++;
      if (ldCI === p.length) { ldT=false; setTimeout(ldType,2000); return; }
      setTimeout(ldType, 65);
    } else {
      typeEl.textContent = p.slice(0, ldCI-1); ldCI--;
      if (ldCI === 0) { ldT=true; ldPI=(ldPI+1)%ldPhrases.length; setTimeout(ldType,400); return; }
      setTimeout(ldType, 28);
    }
  }
  setTimeout(ldType, 1400);

  // Progress bar
  const ldSteps = [
    {pct:20,label:'Initializing'},
    {pct:40,label:'Loading assets'},
    {pct:65,label:'Connecting'},
    {pct:85,label:'Almost ready'},
    {pct:100,label:'Welcome'},
  ];
  let ldSI=0, ldCP=0;
  const ldFill = document.getElementById('ldBarFill');
  const ldStat = document.getElementById('ldStatus');
  const ldPctEl = document.getElementById('ldPct');

  function ldAnimPct(target) {
    if (ldCP >= target) return;
    ldCP++;
    if (ldPctEl) ldPctEl.textContent = ldCP+'%';
    if (ldFill) ldFill.style.width = ldCP+'%';
    setTimeout(()=>ldAnimPct(target), 20);
  }

  function ldRunSteps() {
    if (ldSI >= ldSteps.length) return;
    const s = ldSteps[ldSI];
    if (ldStat) ldStat.textContent = s.label;
    ldAnimPct(s.pct);
    ldSI++;
    if (ldSI < ldSteps.length) setTimeout(ldRunSteps, 700);
  }
  setTimeout(ldRunSteps, 1000);

  // Stop particles when hidden
  const observer = new MutationObserver(() => {
    if (document.getElementById('loading').classList.contains('hide')) {
      cancelAnimationFrame(animId);
    }
  });
  observer.observe(document.getElementById('loading'), { attributes: true });
})();
</script>
  <!-- Header -->
  <div class="header">
    <div class="logo">Tre&aleph;ds</div>
    <nav class="nav-links">
      <a href="#features">Features</a>
      <a href="#releases">Release Notes</a>
      <a href="#terms">Terms</a>
      <a href="#" onclick="openModal('signin')">Sign in</a>
    </nav>
  </div>

  <!-- Main Content -->
  <div class="container">
  <div id="iosLoader"></div>

<style>

#loader {
  position:fixed; inset:0; background:#000; z-index:99999;
  display:flex; align-items:center; justify-content:center; overflow:hidden;
}
#loader.done {
  animation:loaderExit 0.8s cubic-bezier(0.7,0,1,1) forwards;
  animation-delay:0.2s;
}
@keyframes loaderExit {
  0%{clip-path:inset(0 0 0 0);opacity:1}
  100%{clip-path:inset(0 0 100% 0);opacity:0}
}
.grid-bg {
  position:absolute;inset:0;
  background-image:linear-gradient(rgba(255,255,255,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.03) 1px,transparent 1px);
  background-size:40px 40px;animation:gridPulse 4s ease infinite;
}
@keyframes gridPulse{0%,100%{opacity:.5}50%{opacity:1}}
.glow{position:absolute;width:600px;height:600px;border-radius:50%;background:radial-gradient(circle,rgba(255,255,255,0.04) 0%,transparent 70%);animation:glowPulse 3s ease infinite;}
@keyframes glowPulse{0%,100%{transform:scale(.8);opacity:.5}50%{transform:scale(1.2);opacity:1}}
.scanline{position:absolute;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.15),transparent);animation:scan 3s linear infinite;}
@keyframes scan{0%{top:-1px}100%{top:100%}}
.corner{position:absolute;width:20px;height:20px;opacity:0;animation:cornerReveal 0.5s ease forwards;}
.corner.tl{top:30px;left:30px;border-top:1px solid #333;border-left:1px solid #333;animation-delay:.2s;}
.corner.tr{top:30px;right:30px;border-top:1px solid #333;border-right:1px solid #333;animation-delay:.3s;}
.corner.bl{bottom:30px;left:30px;border-bottom:1px solid #333;border-left:1px solid #333;animation-delay:.4s;}
.corner.br{bottom:30px;right:30px;border-bottom:1px solid #333;border-right:1px solid #333;animation-delay:.5s;}
@keyframes cornerReveal{0%{opacity:0;transform:scale(.5)}100%{opacity:1;transform:scale(1)}}
.loader-center{position:relative;z-index:2;display:flex;flex-direction:column;align-items:center;gap:0;}
.loader-logo{font-size:86px;font-weight:900;color:#fff;letter-spacing:-4px;position:relative;opacity:0;animation:loaderLogoIn 1.5s cubic-bezier(0.16,1,0.3,1) forwards;animation-delay:0.4s;}
.loader-logo .aleph{color:#333;}
.loader-logo::before,.loader-logo::after{content:attr(data-text);position:absolute;top:0;left:0;width:100%;font-size:inherit;font-weight:inherit;letter-spacing:inherit;}
.loader-logo::before{color:rgba(255,255,255,0.15);animation:glitch1 4s infinite;animation-delay:1.5s;clip-path:polygon(0 20%,100% 20%,100% 40%,0 40%);}
.loader-logo::after{color:rgba(255,255,255,0.1);animation:glitch2 4s infinite;animation-delay:1.7s;clip-path:polygon(0 60%,100% 60%,100% 80%,0 80%);}
@keyframes glitch1{0%,90%,100%{transform:translateX(0);opacity:0}92%{transform:translateX(-4px);opacity:1}94%{transform:translateX(4px);opacity:1}96%{transform:translateX(-2px);opacity:1}98%{transform:translateX(0);opacity:0}}
@keyframes glitch2{0%,90%,100%{transform:translateX(0);opacity:0}93%{transform:translateX(4px);opacity:1}95%{transform:translateX(-4px);opacity:1}97%{transform:translateX(2px);opacity:1}99%{transform:translateX(0);opacity:0}}
@keyframes loaderLogoIn{0%{opacity:0;transform:translateY(40px) skewX(-5deg);filter:blur(10px)}100%{opacity:1;transform:translateY(0) skewX(0);filter:blur(0)}}
.loader-type{font-size:11px;color:#333;letter-spacing:4px;text-transform:uppercase;margin-top:16px;height:16px;overflow:hidden;opacity:0;animation:loaderFadeIn 0.5s ease forwards;animation-delay:1.2s;}
.loader-progress{margin-top:40px;width:200px;display:flex;flex-direction:column;gap:8px;opacity:0;animation:loaderFadeIn 0.5s ease forwards;animation-delay:1s;}
.progress-track{width:100%;height:1px;background:#111;position:relative;overflow:hidden;}
.progress-fill{position:absolute;left:0;top:0;height:100%;width:0%;background:#fff;transition:width 0.4s ease;}
.progress-fill::after{content:'';position:absolute;right:0;top:-2px;width:4px;height:5px;background:#fff;box-shadow:0 0 6px #fff;}
.progress-labels{display:flex;justify-content:space-between;align-items:center;}
.progress-status{font-size:9px;color:#333;letter-spacing:1.5px;text-transform:uppercase;}
.progress-pct{font-size:9px;color:#333;letter-spacing:1px;}
.loader-tagline{position:absolute;bottom:50px;left:50%;transform:translateX(-50%);text-align:center;opacity:0;animation:loaderFadeIn 0.8s ease forwards;animation-delay:2s;white-space:nowrap;}
.loader-tagline p{font-size:11px;color:#2a2a2a;letter-spacing:1px;}
.loader-tagline b{color:#3a3a3a;}
.loader-version{position:absolute;top:36px;right:36px;font-size:9px;color:#1a1a1a;letter-spacing:2px;text-transform:uppercase;opacity:0;animation:loaderFadeIn 0.5s ease forwards;animation-delay:0.6s;}
@keyframes loaderFadeIn{to{opacity:1}}

#iosLoader {
  position: fixed;
  top: 0; left: 0;
  height: 2px;
  width: 0%;
  background: linear-gradient(90deg, #fff, #888, #fff);
  z-index: 99999;
  transition: width 0.3s ease;
  opacity: 0;
  border-radius: 0 2px 2px 0;
  box-shadow: 0 0 8px rgba(255,255,255,0.6);
}
</style>

<script>

// ── SIGNUP/SIGNIN LOADER ────────────────────────────────────────
const loaderTypeEl = document.getElementById('loaderType');
const loaderPhrases = ['Research · Collaborate · Discover','For university minds.','Knowledge is currency.'];
let loaderPhraseIdx=0, loaderCharIdx=0, loaderTyping=true;

function loaderTypeWrite() {
  if (!loaderTypeEl) return;
  const phrase = loaderPhrases[loaderPhraseIdx];
  if (loaderTyping) {
    loaderTypeEl.textContent = phrase.slice(0, loaderCharIdx+1);
    loaderCharIdx++;
    if (loaderCharIdx === phrase.length) { loaderTyping=false; setTimeout(loaderTypeWrite,1800); return; }
    setTimeout(loaderTypeWrite, 60);
  } else {
    loaderTypeEl.textContent = phrase.slice(0, loaderCharIdx-1);
    loaderCharIdx--;
    if (loaderCharIdx === 0) { loaderTyping=true; loaderPhraseIdx=(loaderPhraseIdx+1)%loaderPhrases.length; setTimeout(loaderTypeWrite,400); return; }
    setTimeout(loaderTypeWrite, 30);
  }
}

const loaderSteps = [
  {pct:15,label:'Connecting'},
  {pct:35,label:'Creating account'},
  {pct:55,label:'Syncing data'},
  {pct:75,label:'Almost ready'},
  {pct:92,label:'Finishing up'},
  {pct:100,label:'Ready'},
];
let loaderStepIdx=0, loaderCurrentPct=0;

function loaderAnimPct(target) {
  if (loaderCurrentPct >= target) return;
  loaderCurrentPct++;
  const pctEl = document.getElementById('progressPct');
  const fillEl = document.getElementById('progressFill');
  if (pctEl) pctEl.textContent = loaderCurrentPct+'%';
  if (fillEl) fillEl.style.width = loaderCurrentPct+'%';
  setTimeout(()=>loaderAnimPct(target), 18);
}

function loaderRunSteps() {
  if (loaderStepIdx >= loaderSteps.length) return;
  const step = loaderSteps[loaderStepIdx];
  const statusEl = document.getElementById('progressStatus');
  if (statusEl) statusEl.textContent = step.label;
  loaderAnimPct(step.pct);
  loaderStepIdx++;
  if (loaderStepIdx < loaderSteps.length) setTimeout(loaderRunSteps, 600);
}

function triggerLoader() {
  const loader = document.getElementById('loader');
  if (!loader) return;
  loader.style.display = 'flex';
  loader.classList.remove('done');
  loaderStepIdx=0; loaderCurrentPct=0; loaderCharIdx=0; loaderPhraseIdx=0; loaderTyping=true;
  const fillEl = document.getElementById('progressFill');
  const pctEl = document.getElementById('progressPct');
  const statusEl = document.getElementById('progressStatus');
  if (fillEl) fillEl.style.width='0%';
  if (pctEl) pctEl.textContent='0%';
  if (statusEl) statusEl.textContent='Initializing';
  if (loaderTypeEl) loaderTypeEl.textContent='';
  setTimeout(loaderTypeWrite, 1400);
  setTimeout(loaderRunSteps, 1200);
}


function iosLoaderStart() {
  const bar = document.getElementById('iosLoader');
  bar.style.opacity = '1';
  bar.style.width = '0%';
  bar.style.transition = 'width 0.3s ease';
  setTimeout(() => { bar.style.width = '70%'; bar.style.transition = 'width 2s ease'; }, 50);
}

function iosLoaderDone() {
  const bar = document.getElementById('iosLoader');
  bar.style.width = '100%';
  bar.style.transition = 'width 0.3s ease';
  setTimeout(() => {
    bar.style.opacity = '0';
    bar.style.transition = 'opacity 0.4s ease';
    setTimeout(() => {
      bar.style.width = '0%';
      bar.style.opacity = '1';
    }, 400);
  }, 300);
}
</script>  
    <!-- Hero -->
    <section class="hero">
      <h1>Where students, researchers, and ideas meet</h1>
      <p>A social and research network for universities. ESTD 2026.</p>
      <div class="cta-buttons">
        <button class="btn btn-primary" onclick="openModal('signup')">Sign up</button>
        <button class="btn btn-secondary" onclick="openModal('signin')">Sign in</button>
      </div>
    </section>

    <!-- Features -->
    <section id="features" class="section">
      <h2 class="section-title">Features</h2>
      <div class="features-grid">
        <div class="feature">
          <h3>Research Collaboration</h3>
          <p>Connect with researchers worldwide and share your work in real-time.</p>
        </div>
        <div class="feature">
          <h3>Marketplace & Bounties</h3>
          <p>Earn by selling your branded products and completing research tasks, errands, reviews, and data projects.</p>
        </div>
        <div class="feature">
          <h3>Academic Networking</h3>
          <p>Build your professional network with students, experts, professors and researchers across the globe.</p>
        </div>
        <div class="feature">
          <h3>Community Discussions</h3>
          <p>Interact with people, attend events | seminars, ask questions, and engage in academic discourse.</p>
        </div>
      </div>
    </section>

    <!-- Release Notes -->
    <section id="releases" class="section">
      <h2 class="section-title">Release Notes</h2>
      
      <div class="release-item">
        <div class="release-header">
          <div class="release-title">Version 1.0.0</div>
          <div class="release-date">February 7, 2026</div>
        </div>
        <p class="release-description">Initial release of Tre&aleph;ds platform with core functionality.</p>
        <ul class="release-list">
          <li>User authentication and profile management</li>
          <li>Trending topic across various fields around the globe</li>
          <li>Research collaboration tools</li>
          <li>Marketplace and bounties system</li>
          <li>Realtime world financial news.</li>
          <li>Explore page.</li>
          <li>Inter-University collaboration</li>
          <li>Chats Messaging</li>
          <li>Community discussions</li>
          <li>Board announcements</li>
          <li>Real-time notifications</li>
        </ul>
      </div>

      <div class="release-item">
        <div class="release-header">
          <div class="release-title">Beta 0.9.0</div>
          <div class="release-date">February 5, 2026</div>
        </div>
        <p class="release-description">Public beta launch with AI-powered features.</p>
        <ul class="release-list">
          <li>AI-powered search and discovery</li>
          <li>Enhanced privacy controls</li>
          <li>Mobile responsive design</li>
          <li>Performance improvements</li>
        </ul>
      </div>

      <div class="release-item">
        <div class="release-header">
          <div class="release-title">Alpha 0.5.0</div>
          <div class="release-date">January 28, 2026</div>
        </div>
        <p class="release-description">Closed alpha testing with selected universities.</p>
        <ul class="release-list">
          <li>Basic profile and posting functionality</li>
          <li>University verification system</li>
          <li>Initial marketplace features</li>
          <li>Bug fixes and stability improvements</li>
        </ul>
      </div>
    </section>

    <!-- Terms of Service -->
    <section id="terms" class="section">
      <h2 class="section-title">Terms of Service</h2>
      <div class="terms">
        <p><strong>Last Updated: February 7, 2026</strong></p>
        
        <p>Welcome to Tre&aleph;ds. By accessing or using our platform, you agree to be bound by these Terms of Service.</p>

        <h3>1. Acceptance of Terms</h3>
        <p>By creating an account or using Tre&aleph;ds, you agree to these terms. If you don't agree, please don't use our services.</p>

        <h3>2. Eligibility</h3>
        <p>You must be:</p>
        <ul>
          <li>At least 18 years old</li>
          <li>Affiliated with an educational institution (for full access)</li>
          <li>Capable of forming a binding contract</li>
        </ul>

        <h3>3. User Accounts</h3>
        <p>You are responsible for:</p>
        <ul>
          <li>Maintaining the security of your account</li>
          <li>All activities that occur under your account</li>
          <li>Notifying us of any unauthorized access</li>
        </ul>

        <h3>4. Content and Conduct</h3>
        <p>You agree not to:</p>
        <ul>
          <li>Post false, nudity based, sex, explicit, misleading, or fraudulent content</li>
          <li>Violate any laws or regulations</li>
          <li>Harass, bully, or threaten other users</li>
          <li>Impersonate others or misrepresent your affiliation</li>
          <li>Share or distribute malware or harmful code</li>
          <li>Scrape or copy content without permission</li>
        </ul>

        <h3>5. Intellectual Property</h3>
        <p>You retain ownership of your content. By posting, you grant Tre&aleph;ds a license to use, display, and distribute your content on the platform. Tre&aleph;ds owns all platform code, design, and features.</p>

        <h3>6. Marketplace and Bounties</h3>
        <p>When using marketplace features:</p>
        <ul>
          <li>All transactions are between users</li>
          <li>Tre&aleph;ds acts as a facilitator, not a party to transactions</li>
          <li>You're responsible for tax obligations on earnings</li>
          <li>Tre&aleph;ds may charge service fees (currently free during beta)</li>
        </ul>

        <h3>7. Privacy</h3>
        <p>Your use of Tre&aleph;ds is subject to our Privacy Policy. We collect and use data as described in that policy.</p>

        <h3>8. Termination</h3>
        <p>We may suspend or terminate your account if you:</p>
        <ul>
          <li>Violate these terms</li>
          <li>Engage in fraudulent activity</li>
          <li>Create risk or legal exposure for Tre&aleph;ds</li>
        </ul>

        <h3>9. Disclaimers</h3>
        <p>Tre&aleph;ds is provided "as is" without warranties. We don't guarantee:</p>
        <ul>
          <li>Uninterrupted or error-free service</li>
          <li>Accuracy of user-generated content</li>
          <li>Results from using the platform</li>
        </ul>

        <h3>10. Limitation of Liability</h3>
        <p>Tre&aleph;ds and its affiliates are not liable for indirect, incidental, or consequential damages arising from your use of the platform.</p>

        <h3>11. Changes to Terms</h3>
        <p>We may update these terms. Continued use after changes constitutes acceptance. We'll notify you of significant changes via email or platform notification.</p>

        <h3>12. Governing Law</h3>
        <p>These terms are governed by the Federal Republic Of Nigeria. Disputes will be resolved accordingly.</p>

        <h3>13. Contact</h3>
        <p>For more Enquires, Complaints, Press,  Questions about these terms? Contact us at <a ><span class="__cf_email__" data-cfemail="087c7a6d666c7b383d3c3a3f3e30486f65696164266b6765">[email&#160;protected]</span></a></p>

        <p style="margin-top: 32px; padding-top: 32px; border-top: 1px solid #333;">
          <strong>By using Tre&aleph;ds, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service.</strong>
        </p>
      </div>
    </section>

  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-text">© 2026 Tre&aleph;ds. All rights reserved.</div>
      <div class="footer-links">
        <a href="#terms">Terms</a>
        <a href="#">Privacy</a>
        <a href="#">Help</a>
        <a href="#">Contact</a>
      </div>
    </div>
  </footer>

  <!-- Sign In Modal -->
  <div id="signinModal" class="modal">
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal('signin')">×</button>
      <h2>Sign in</h2>
      <p>Welcome back to Tre&aleph;ds</p>
      
      <button class="social-btn">Continue with Google</button>
      <button class="social-btn">Continue with Microsoft</button>
      <button class="social-btn">Continue with GitHub</button>
      <button class="social-btn">Continue with Apple</button>
      
      <div class="divider">or</div>
      
      <form id="signinForm">
        <div class="form-group">
          <label class="form-label">Email</label>
          <input type="email" class="form-input" placeholder="name@gmail.com" required>
        </div>
        <div class="form-group">
          <label class="form-label">Password</label>
          <input maxlength="20" type="password" class="form-input" placeholder="Enter password" required>
        </div>
        <button type="submit" class="btn btn-primary" style="width: 100%;">Sign in</button>
      </form>
      
      <div class="form-footer">
        Don't have an account? <a href="#" onclick="switchModal('signin', 'signup')">Sign up</a>
      </div>
    </div>
  </div>

  <!-- Sign Up Modal -->
 <div id="signupModal" class="modal">
  <div class="modal-content">
    <button class="modal-close" onclick="closeModal('signup')">×</button>
    <h2>Sign up</h2>
    <p>Create your account</p>
    
    <button class="social-btn">Continue with Google</button>
    <button class="social-btn">Continue with Microsoft</button>
    <button class="social-btn">Continue with GitHub</button>
    <button class="social-btn">Continue with Apple</button>
    
    <div class="divider">or</div>
    
    <form id="signupForm">
      <div class="form-group">
        <label class="form-label">Full Name</label>
        <input  maxlength="40" type="text" class="form-input" placeholder="John Doe" required pattern="^[A-Za-z]+(?:[ '-][A-Za-z]+)+$">
      </div>
      
      <div class="form-group">
        <label  class="form-label">Username</label>
        <input maxlength="31" type="text" class="form-input" placeholder="@johndoe" required pattern="^@[A-Za-z0-9]+(?:\s[A-Za-z0-9]+)*$">
      </div>
      
      <div class="form-group">
        <label class="form-label">Email</label>
        <input type="email" class="form-input" placeholder="name@gmail.com" required>
      </div>
      
      <div class="form-group">
        <label class="form-label">Password</label>
        <input maxlength="20" type="password" class="form-input" placeholder="At least 8 characters" minlength="8" required>
      </div>
      <div class="form-group">
        <label class="form-label">University</label>
       <!-- Searchable university selector using input + datalist --><label for="university" class="form-label">Select your university<br>select <b>other</b> if not present</label> <input class="form-input" list="universities" id="university" name="university" placeholder="Academic institution..." required>
<datalist id="universities">
  <!-- Nigeria -->
  <option value="University of Lagos (UNILAG)">
  <option value="University of Ibadan (UI)">
  <option value="Obafemi Awolowo University (OAU)">
  <option value="Ahmadu Bello University (ABU)">
  <option value="University of Nigeria, Nsukka (UNN)">
  <option value="Federal University of Technology, Owerri (FUTO)">
  <option value="Federal University of Technology, Akure (FUTA)">
  <option value="Lagos State University (LASU)">
  <option value="Covenant University">
  <option value="Babcock University">
  <option value="Redeemer’s University">
  <option value="Nnamdi Azikiwe University (UNIZIK)">
  <option value="University of Ilorin (UNILORIN)">
  <option value="Bayero University Kano (BUK)">  <!-- United States -->  <option value="Harvard University">
  <option value="Massachusetts Institute of Technology (MIT)">
  <option value="Stanford University">
  <option value="University of California, Berkeley">
  <option value="California Institute of Technology (Caltech)">
    <option value="moscow-state">Lomonosov Moscow State University</option>
<option value="hse">Higher School of Economics (HSE University)</option>
<option value="spbu">Saint Petersburg State University</option>
<option value="nyu">New York University</option>
<option value="cuny">City University of New York (CUNY)</option>
<option value="stony-brook">Stony Brook University</option>
<option value="buffalo">University at Buffalo (SUNY)</option>
<option value="cornell">Cornell University</option>
<option value="duke">Duke University</option>
<option value="brown">Brown University</option>
<option value="dartmouth">Dartmouth College</option>
<option value="northwestern">Northwestern University</option>
<option value="johns-hopkins">Johns Hopkins University</option>
<option value="carnegie-mellon">Carnegie Mellon University</option>
<option value="georgetown">Georgetown University</option>
<option value="ucla">University of California, Los Angeles (UCLA)</option>
<option value="ucsd">University of California, San Diego (UCSD)</option>
<option value="uc-davis">University of California, Davis</option>
<option value="washington">University of Washington</option>
<option value="texas-austin">University of Texas at Austin</option>
<option value="texas-am">Texas A&M University</option>
<option value="purdue">Purdue University</option>
<option value="illinois">University of Illinois Urbana-Champaign</option>
<option value="wisconsin">University of Wisconsin–Madison</option>
<option value="penn-state">Pennsylvania State University</option>
<option value="notre-dame">University of Notre Dame</option>
<option value="toronto-metropolitan">Toronto Metropolitan University</option>
<option value="york-university">York University (Canada)</option>
<option value="monash">Monash University</option>
<option value="unsw">University of New South Wales</option>
<option value="auckland">University of Auckland</option>
<option value="seoul-national">Seoul National University</option>
<option value="kaist">KAIST</option>
<option value="postech">POSTECH</option>
<option value="hong-kong">University of Hong Kong</option>
<option value="hkust">Hong Kong University of Science and Technology</option>
<option value="tsinghua-hk">Hong Kong Polytechnic University</option>
<option value="fudan">Fudan University</option>
<option value="zhejiang">Zhejiang University</option>
<option value="shanghai-jiao-tong">Shanghai Jiao Tong University</option>
<option value="iit-madras">Indian Institute of Technology Madras</option>
<option value="iit-kanpur">Indian Institute of Technology Kanpur</option>
<option value="iit-kharagpur">Indian Institute of Technology Kharagpur</option>
<option value="delhi-university">University of Delhi</option>
<option value="jnu">Jawaharlal Nehru University</option>
<option value="sapienza">Sapienza University of Rome</option>
<option value="bologna">University of Bologna</option>
<option value="padua">University of Padua</option>
<option value="barcelona">University of Barcelona</option>
<option value="autonomous-madrid">Autonomous University of Madrid</option>
<option value="copenhagen">University of Copenhagen</option>
<option value="helsinki">University of Helsinki</option>
<option value="oslo">University of Oslo</option>
<option value="stockholm">Stockholm University</option>
<option value="cape-coast">University of Cape Coast</option>
<option value="ghana">University of Ghana</option>
<option value="makerere">Makerere University</option>
<option value="nairobi">University of Nairobi</option>
  <option value="University of Chicago">
  <option value="Princeton University">
  <option value="Yale University">
  <option value="Columbia University">
  <option value="University of Pennsylvania">  <!-- United Kingdom -->  <option value="University of Oxford">
  <option value="University of Cambridge">
  <option value="Imperial College London">
  <option value="University College London (UCL)">
  <option value="London School of Economics (LSE)">
  <option value="King’s College London">
  <option value="University of Edinburgh">
  <option value="University of Manchester">  <!-- Canada -->  <option value="University of Toronto">
  <option value="University of British Columbia">
  <option value="McGill University">
  <option value="University of Alberta">
  <option value="University of Waterloo">  <!-- Europe -->  <option value="ETH Zurich">
  <option value="EPFL">
  <option value="Technical University of Munich">
  <option value="Heidelberg University">
  <option value="Sorbonne University">
  <option value="University of Amsterdam">  <!-- Asia -->  <option value="University of Tokyo">
  <option value="Kyoto University">
  <option value="National University of Singapore (NUS)">
  <option value="Nanyang Technological University (NTU)">
  <option value="Tsinghua University">
  <option value="Peking University">
  <option value="Indian Institute of Technology Bombay (IITB)">
  <option value="Indian Institute of Technology Delhi (IITD)">  <!-- Australia -->  <option value="University of Melbourne">
  <option value="Australian National University">
  <option value="University of Sydney">
  <option value="University of Queensland">  <!-- Africa (outside Nigeria) -->  <option value="University of Cape Town">
  <option value="University of the Witwatersrand">
  <option value="Stellenbosch University">
  <option value="Cairo University">
  <option value="American University in Cairo">
<option value="adamu-augie">Adamu Augie University</option>
<option value="akwa-ibom-state">Akwa Ibom State University</option>
<option value="abia-state">Abia State University</option>
<option value="bauchi-state">Bauchi State University</option>
<option value="gombe-state">Gombe State University</option>
<option value="taraba-state">Taraba State University</option>
<option value="yobe-state">Yobe State University</option>
<option value="zamfara-state">Zamfara State University</option>
<option value="sule-lamido">Sule Lamido University</option>
<option value="ibrahim-badamasi">Ibrahim Badamasi Babangida University</option>
<option value="niger-delta">Niger Delta University</option>
<option value="tai-solarin">Tai Solarin University of Education</option>
<option value="lagos-tech">Lagos State University of Science and Technology</option>
<option value="moshood-abiola-poly-uni">Moshood Abiola University of Science and Technology</option>
<option value="ondo-state-tech">Ondo State University of Science and Technology</option>
<option value="confluence-uni">Confluence University of Science and Technology</option>
<option value="kwararafa">Kwararafa University</option>
<option value="al-hikmah">Al-Hikmah University</option>
<option value="crescent">Crescent University</option>
<option value="fountain">Fountain University</option>
<option value="summit">Summit University</option>
<option value="edo-state-uni">Edo State University</option>
<option value="western-delta">Western Delta University</option>
<option value="ritman">Ritman University</option>
<option value="topfaith">Topfaith University</option>
<option value="atiba">Atiba University</option>
<option value="kola-daisi">Kola Daisi University</option>
<option value="trinity">Trinity University</option>
<option value="michael-oti">Michael and Cecilia Ibru University</option>
<option value="edwin-clark">Edwin Clark University</option>
<option value="arthur-jarvis">Arthur Jarvis University</option>
<option value="clifford">Clifford University</option>
<option value="coal-city">Coal City University</option>
<option value="dominican">Dominican University</option>
<option value="legacy">Legacy University</option>
<option value="skyline">Skyline University Nigeria</option>
<option value="greenfield">Greenfield University</option>
<option value="capital-city">Capital City University</option>
<option value="maryam-abacha">Maryam Abacha American University of Nigeria</option>
<option value="philomath">Philomath University</option>
<option value="ambrose-alli">Ambrose Alli University</option>
<option value="oaustech">Olusegun Agagu University of Science and Technology</option>
<option value="lead_city_nigeria">Lead City University — Nigeria</option>
<option value="caleb_nigeria">Caleb University — Nigeria</option>
<option value="leeds_uk">University of Leeds — United Kingdom</option>
<option value="derby_uk">University of Derby — United Kingdom</option>
      <!-- Other -->  <option value="Other">
</datalist>
      </div>
      <div class="form-group">
  <label for="fieldOfStudy" class="form-label">Field of Study</label>
<input
  class="form-input"
  list="fieldsOfStudy"
  id="fieldOfStudy"
  name="fieldOfStudy"
  placeholder="Field of Study..."
  required
>

<datalist id="fieldsOfStudy" >
  <!-- Paste all the <option> fields I gave you here -->
  <option value="computer-science">Computer Science</option>
<option value="software-engineering">Software Engineering</option>
<option value="artificial-intelligence">Artificial Intelligence</option>
<option value="machine-learning">Machine Learning</option>
<option value="data-science">Data Science</option>
<option value="cybersecurity">Cybersecurity</option>
<option value="information-technology">Information Technology</option>
<option value="computer-engineering">Computer Engineering</option>
<option value="robotics">Robotics</option>
<option value="quantum-computing">Quantum Computing</option>

<option value="medicine">Medicine</option>
<option value="surgery">Surgery</option>
<option value="nursing">Nursing</option>
<option value="pharmacy">Pharmacy</option>
<option value="dentistry">Dentistry</option>
<option value="public-health">Public Health</option>
<option value="biomedical-science">Biomedical Science</option>
<option value="anatomy">Anatomy</option>
<option value="physiology">Physiology</option>
<option value="medical-laboratory-science">Medical Laboratory Science</option>

<option value="law">Law</option>
<option value="international-law">International Law</option>
<option value="human-rights-law">Human Rights Law</option>
<option value="commercial-law">Commercial Law</option>
<option value="criminal-law">Criminal Law</option>

<option value="business-administration">Business Administration</option>
<option value="accounting">Accounting</option>
<option value="finance">Finance</option>
<option value="banking">Banking</option>
<option value="economics">Economics</option>
<option value="marketing">Marketing</option>
<option value="entrepreneurship">Entrepreneurship</option>
<option value="supply-chain-management">Supply Chain Management</option>
<option value="human-resource-management">Human Resource Management</option>

<option value="mechanical-engineering">Mechanical Engineering</option>
<option value="civil-engineering">Civil Engineering</option>
<option value="electrical-engineering">Electrical Engineering</option>
<option value="chemical-engineering">Chemical Engineering</option>
<option value="petroleum-engineering">Petroleum Engineering</option>
<option value="aerospace-engineering">Aerospace Engineering</option>
<option value="mechatronics">Mechatronics Engineering</option>
<option value="materials-science">Materials Science</option>

<option value="architecture">Architecture</option>
<option value="urban-planning">Urban Planning</option>
<option value="quantity-surveying">Quantity Surveying</option>
<option value="building-technology">Building Technology</option>

<option value="psychology">Psychology</option>
<option value="sociology">Sociology</option>
<option value="political-science">Political Science</option>
<option value="international-relations">International Relations</option>
<option value="philosophy">Philosophy</option>
<option value="history">History</option>
<option value="linguistics">Linguistics</option>

<option value="mass-communication">Mass Communication</option>
<option value="journalism">Journalism</option>
<option value="film-production">Film Production</option>
<option value="digital-media">Digital Media</option>

<option value="agriculture">Agriculture</option>
<option value="agricultural-economics">Agricultural Economics</option>
<option value="animal-science">Animal Science</option>
<option value="crop-science">Crop Science</option>
<option value="forestry">Forestry</option>
<option value="fisheries">Fisheries</option>

<option value="environmental-science">Environmental Science</option>
<option value="geology">Geology</option>
<option value="geophysics">Geophysics</option>
<option value="meteorology">Meteorology</option>
<option value="marine-biology">Marine Biology</option>

<option value="mathematics">Mathematics</option>
<option value="statistics">Statistics</option>
<option value="physics">Physics</option>
<option value="chemistry">Chemistry</option>
<option value="biochemistry">Biochemistry</option>
<option value="microbiology">Microbiology</option>
<option value="biotechnology">Biotechnology</option>
<option value="other">other</option>
<option value="quantum-physics">quantum physics</option>
<option value="astrophysics">Astrophysics</option>
<option value="space-science">Space Science</option>
<option value="nuclear-physics">Nuclear Physics</option>
<option value="optics-photonics">Optics and Photonics</option>
<option value="theoretical-physics">Theoretical Physics</option>

<option value="organic-chemistry">Organic Chemistry</option>
<option value="inorganic-chemistry">Inorganic Chemistry</option>
<option value="analytical-chemistry">Analytical Chemistry</option>
<option value="physical-chemistry">Physical Chemistry</option>
<option value="polymer-science">Polymer Science</option>

<option value="genetics">Genetics</option>
<option value="molecular-biology">Molecular Biology</option>
<option value="cell-biology">Cell Biology</option>
<option value="neuroscience">Neuroscience</option>
<option value="bioinformatics">Bioinformatics</option>

<option value="epidemiology">Epidemiology</option>
<option value="health-informatics">Health Informatics</option>
<option value="radiography">Radiography</option>
<option value="physiotherapy">Physiotherapy</option>
<option value="occupational-therapy">Occupational Therapy</option>

<option value="education">Education</option>
<option value="educational-technology">Educational Technology</option>
<option value="curriculum-studies">Curriculum Studies</option>
<option value="special-education">Special Education</option>
<option value="guidance-counseling">Guidance and Counseling</option>

<option value="theology">Theology</option>
<option value="religious-studies">Religious Studies</option>
<option value="islamic-studies">Islamic Studies</option>
<option value="christian-studies">Christian Studies</option>

<option value="fine-arts">Fine Arts</option>
<option value="graphic-design">Graphic Design</option>
<option value="industrial-design">Industrial Design</option>
<option value="fashion-design">Fashion Design</option>
<option value="animation">Animation</option>
<option value="game-development">Game Development</option>
<option value="music">Music</option>
<option value="performing-arts">Performing Arts</option>

<option value="hospitality-management">Hospitality Management</option>
<option value="tourism">Tourism Studies</option>
<option value="culinary-arts">Culinary Arts</option>
<option value="event-management">Event Management</option>

<option value="transport-management">Transport Management</option>
<option value="logistics">Logistics</option>
<option value="aviation-management">Aviation Management</option>
<option value="maritime-studies">Maritime Studies</option>

<option value="real-estate">Real Estate</option>
<option value="property-management">Property Management</option>
<option value="surveying-geoinformatics">Surveying and Geoinformatics</option>

<option value="criminology">Criminology</option>
<option value="security-studies">Security Studies</option>
<option value="peace-conflict">Peace and Conflict Studies</option>
<option value="intelligence-studies">Intelligence and Strategic Studies</option>

<option value="development-studies">Development Studies</option>
<option value="gender-studies">Gender Studies</option>
<option value="population-studies">Population Studies</option>
<option value="demography">Demography</option>

<option value="food-science">Food Science and Technology</option>
<option value="nutrition-dietetics">Nutrition and Dietetics</option>
<option value="soil-science">Soil Science</option>
<option value="horticulture">Horticulture</option>
<option value="agronomy">Agronomy</option>

<option value="renewable-energy">Renewable Energy Engineering</option>
<option value="environmental-engineering">Environmental Engineering</option>
<option value="water-resources">Water Resources Engineering</option>
<option value="structural-engineering">Structural Engineering</option>
<option value="transportation-engineering">Transportation Engineering</option>
<option value="animal-husbandry">animal husbandry</option>
<option value="Computer-education">Computer education</option>
<option value="financial-engineering">Financial Engineering</option>
<option value="actuarial-science">Actuarial Science</option>
<option value="behavioral-economics">Behavioral Economics</option>
<option value="development-economics">Development Economics</option>

<option value="library-information">Library and Information Science</option>
<option value="archival-studies">Archival Studies</option>
<option value="publishing-studies">Publishing Studies</option>
</datalist>    
</div>
      
      <div class="form-group">
<label for="academicLevel" class="form-label">Academic Level</label>
<input
  class="form-input"
  list="academicLevels"
  id="academicLevel"
  name="academicLevel"
  placeholder="Start typing your level..."
  required
>

<datalist id="academicLevels">
  <option value="undergraduate">Undergraduate</option>
  <option value="nd">National Diploma (ND)</option>
  <option value="hnd">Higher National Diploma (HND)</option>
  <option value="nce">Nigeria Certificate in Education (NCE)</option>
  <option value="foundation">Foundation / Pre-degree</option>
  <option value="postgraduate">Postgraduate</option>
  <option value="pgd">Postgraduate Diploma (PGD)</option>
  <option value="masters">Master’s Student</option>
  <option value="mba">Master of Business Administration (MBA)</option>
  <option value="mph">Master of Public Health (MPH)</option>
  <option value="mphil">Master of Philosophy (MPhil)</option>
  <option value="doctorate">Doctorate</option>
  <option value="phd">PhD Student</option>
  <option value="edd">Doctor of Education (EdD)</option>
  <option value="dba">Doctor of Business Administration (DBA)</option>
  <option value="md">Doctor of Medicine (MD)</option>
  <option value="jd">Juris Doctor (JD)</option>
  <option value="postdoctoral">Postdoctoral Fellowship</option>
  <option value="researcher">Researcher</option>
  <option value="executive-edu">Executive Education</option>
  <option value="continuing-edu">Continuing Education / CPD</option>
  <option value="professional-cert">Professional Certificate</option>
  <option value="part-time">Part time</option>
  <option value="professor">Professor</option>
</datalist>
</div>
      
      <button type="submit" class="btn btn-primary" style="width: 100%;">Create account</button>
    </form>
    
    <div class="form-footer">
      Already have an account? <a href="#" onclick="switchModal('signup', 'signin')">Sign in</a>
    </div>
  </div>
</div>

  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
  const API_BASE = 'https://trends-backend-srju.onrender.com';

    // Loading screen
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('loading').classList.add('hide');
      }, 5500);
    });

function openModal(type) {
  document.getElementById(type + 'Modal').classList.add('active');
}

function closeModal(type) {
  document.getElementById(type + 'Modal').classList.remove('active');
}

function switchModal(from, to) {
  closeModal(from);
  setTimeout(() => openModal(to), 100);
}
    // Close on outside click
    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal(modal.id.replace('Modal', ''));
      });
    });

  </script>



</section>

<section class="newMainaccount" style="display:none" id='newMainaccount'>

  <button class="menuBtn" style="display:none">☰</button>

  <div class="overlay" id="overlay"></div>

  <nav class="drawer" id="drawer">
    <a id="profilenav" class="profilenav" onclick="document.getElementById('Messages').style.display='none',closeDrawer(),document.getElementById('profile').style.display='block',document.getElementById('Trending').style.display='none',document.getElementById('Research').style.display='none',document.getElementById('Explore').style.display='none',document.getElementById('Finance').style.display='none',document.getElementById('Board').style.display='none',document.getElementById('Settings').style.display='none';"  href="#" style="height:10vh;top:0vh;border-bottom:1px solid #f0f8ff34;">
      <pib><img src="img1" style="display:block;">&tau;&aleph;</pib><un>Oshifala Israel Omobayode</un>
       <lr>Cambridge • Biotechnology</lr>
      <aside><marquee>Esse quam videri...</marquee></aside>
      
       </a>
       <span>
   <a onclick="document.getElementById('Messages').style.display='none',closeDrawer(),document.getElementById('profile').style.display='none',document.getElementById('Trending').style.display='block',document.getElementById('Research').style.display='none',document.getElementById('Explore').style.display='none',document.getElementById('Finance').style.display='none',document.getElementById('Board').style.display='none',document.getElementById('Settings').style.display='none';"  href="#" style="margin-top:1vh;"><bs>⇗</bs>Trending</a>
   <a onclick="document.getElementById('Messages').style.display='none',document.getElementById('drawer').style.display='none',document.getElementById('overlay').style.display='none',document.getElementById('profile').style.display='none',document.getElementById('Trending').style.display='none',document.getElementById('Research').style.display='block',document.getElementById('Explore').style.display='none',document.getElementById('Finance').style.display='none',document.getElementById('Board').style.display='none',document.getElementById('Settings').style.display='none';"
   href="#"><bs>∑</bs>Research</a>
   <a onclick="document.getElementById('Messages').style.display='none',document.getElementById('drawer').style.display='none',document.getElementById('overlay').style.display='none',document.getElementById('profile').style.display='none',document.getElementById('Trending').style.display='none',document.getElementById('Research').style.display='none',document.getElementById('Explore').style.display='block',document.getElementById('Finance').style.display='none',document.getElementById('Board').style.display='none',document.getElementById('Settings').style.display='none';"  href="#"><bs>⌕</bs>Explore</a>
   <a onclick="document.getElementById('Messages').style.display='none',document.getElementById('drawer').style.display='none',document.getElementById('overlay').style.display='none',document.getElementById('profile').style.display='none',document.getElementById('Trending').style.display='none',document.getElementById('Research').style.display='none',document.getElementById('Explore').style.display='none',document.getElementById('Finance').style.display='block',document.getElementById('Board').style.display='none',document.getElementById('Settings').style.display='none';"
   href="#"><bs>$</bs>Finance</a>
   <a href="#" style="height:0vh;padding:0px;"></a>
    <a  onclick="document.getElementById('Messages').style.display='none',document.getElementById('drawer').style.display='none',document.getElementById('overlay').style.display='none',document.getElementById('profile').style.display='none',document.getElementById('Trending').style.display='none',document.getElementById('Research').style.display='none',document.getElementById('Explore').style.display='none',document.getElementById('Finance').style.display='none',document.getElementById('Board').style.display='block',document.getElementById('Settings').style.display='none';"
    href="#" style="border-bottom:1px solid #f0f8ff34;margin-top:5vh;padding-bottom:4vh;"><bs>&#9998;</bs>Board</a>
       <a style="padding-top:0vh;margin-top:2vh" onclick="document.getElementById('Messages').style.display='none',document.getElementById('drawer').style.display='none',document.getElementById('overlay').style.display='none',document.getElementById('profile').style.display='none',document.getElementById('Trending').style.display='none',document.getElementById('Research').style.display='none',document.getElementById('Explore').style.display='none',document.getElementById('Finance').style.display='none',document.getElementById('Board').style.display='none',document.getElementById('Settings').style.display='block';"
       href="#"><br><bs>&#9881;</bs>Settings</a>
       <a id="notifBell" onclick="notifOpen()">
         <button  style="position:relative;background:transparent;border:none;color:#fff;font-size:20px;cursor:pointer;padding:8px;width:8px;height:40px;display:flex;align-items:center;justify-content:left;border-radius:50%;transition:background 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseleave="this.style.background='transparent'">
  🔔
  <span id="notifBadge" style="position:absolute;top:6px;right:6px;width:8px;height:8px;background:#ef4444;border-radius:50%;display:none;"></span>
</button>
<a\>
  <a><div class="drawer-item" onclick="document.getElementById('drawer').style.display='none',document.getElementById('overlay').style.display='none',document.getElementById('profile').style.display='none',document.getElementById('Trending').style.display='none',document.getElementById('Research').style.display='none',document.getElementById('Explore').style.display='none',document.getElementById('Finance').style.display='none',document.getElementById('Board').style.display='none',document.getElementById('Settings').style.display='none',document.getElementById('Messages').style.display='block';">
  <span class="drawer-icon">💬</span>
  <span class="drawer-label">Messages</span>
  <span class="drawer-badge">3</span> <!-- unread count -->
</div></a>
  <a>
<button id="openGlobal" class="open-global">
  🔴 Global Community
</button></a>

    </span>
    <button onclick="document.getElementById('Create').style.display='block';" style="background-color:transparent;border:none;color:dodgerblue;font-size:500%;font-weight:bolder;width:21vw;height:21vw;left:36.5vw;position:relative;border-radius:50%;top:3vh;box-shadow:0 0 40px aliceblue;padding:0px;margin:0px;">
      &tau;
    </button>
  </nav>

  <style>
  *{color:aliceblue;}
    .newMainaccount {
      position: relative;
      height: 100vh;
      overflow-x: hidden;
      font-family: sans-serif;
      color: aliceblue;
    }
    /* Hide scrollbars for ALL elements */
* {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge */
}

*::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* Specifically for body and html */
html, body {
  scrollbar-width: none;
  -ms-overflow-style: none;
}
.drawer a pib img{
  height:7vh;
  width:7vh;
  position:fixed;
  border-radius:500px;
  object-fit:cover;
  background-color:transparent;
}
.drawer a pib{top:2vh;position:fixed;
  display: flex;
  justify-content: center; /* horizontal center */
  align-items: center; /* vertical center */
/*  height: 100vh;  or any height */
 height:7vh;
 width:7vh;
 background-color:#111;
 position:fixed;
 border-radius:500px;
 overflow: hidden; /* hide excess text */
 text-overflow: ellipsis; /* show ... when text overflows */
 white-space: nowrap;
 font-weight:bolder;
 font-size: 300%;
 letter-spacing: 3px;

}

html::-webkit-scrollbar,
body::-webkit-scrollbar {
  display: none;
}

    .menuBtn {
      font-size: 24px;
      margin: 15px;
      z-index: 10;
      position: relative;
    }

    .drawer {
      position: fixed;
      top: 0;
      left: -90vw;
      width: 90vw;
      height: 100%;
      background: black;
      color: #fff;
      transition: left 0.3s ease;
      z-index: 1000;
    }

    .drawer  a {
      display: block;
      color: white;
      text-decoration: none;
      margin-block:10px;
      background-color:transparent;
      left:7vw;
      position: relative;
      font-size: 10px;
      font-weight: 500;
      height:fit-content;
      width:70vw;
      
    }
    .newMainaccount a {
  display: block;
  padding: 12px 16px;
  border-radius: 10px;
}

.newMainaccount a:not(:empty):hover {
  background: rgba(255,255,255,0.08);
  transform: translateX(3px);
}
    .drawer a un{
      position: relative;
      color: aliceblue;
      left:15vw;
      font-size: 110%;
      font-weight:500;
      display: block;
      background-color: transparent;
      bottom:0vh;
      width:fit-content;
      float: left;
      width:39.5vw;
      white-space: nowrap; /* keep text on one line */
    overflow: hidden; /* hide excess text */
    text-overflow: ellipsis; /* show ... when text overflows */
    }
    .drawer a aside{position: relative;
      color: aliceblue;
      display:block;
      font-size: 95%;
      font-weight:500;
      float:left;
      left: 15vw;
      background-color: #2828284f;
      border-radius: 7px 20px 20px 7px;
      padding: 1.8px;
      padding-right:5px;
      top:0.5vh;
      width:39.5vw;
      white-space: nowrap; /* keep text on one line */
    overflow: hidden; /* hide excess text */
    text-overflow: ellipsis; /* show ... when text overflows */
    }
      
      
    .drawer a lr{
      position: relative;
      color: dodgerblue;
      display:block;
      font-size: 95%;
      font-weight:500;
      background-color: transparent;
      float:left;
      left:15vw;
width:39.5vw;
      white-space: nowrap; /* keep text on one line */
    overflow: hidden; /* hide excess text */
    text-overflow: ellipsis; /* show ... when text overflows */
      
      
    }
    
    .drawer a fo{
      position: relative;
      color: grey;
      left:15vw;
      font-size: 95%;
      font-weight:500;
      display: block;
      background-color: transparent;
      top:0.4vh;
      width:fit-content;
      float: left;
    }
    .drawer a fo b{
      color: aliceblue;
      background-color: transparent;
      
    } 
    .drawer span{top:0vh;background-color:transparent;}
    .drawer span a{font-size:100%;margin-block:1vh;}

    .drawer.open {
      left: 0;
    }
    .drawer a bs{
      color: aliceblue;
      margin-right:6vw;
      font-weight: bolder;
      font-size:130%;
      background-color:transparent;
    }
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.4);
      display: none;
      z-index: 999;
    }

    .overlay.show {
      display: block;
    }
  </style>

<!-- GLOBAL COMMUNITY CHAT (REBUILT) -->
<style>
/* Global Chat Overlay */
.global-overlay {
  position: fixed;
  inset: 0;
  background: #080808;
  color: #fff;
  display: none;
  flex-direction: column;
  z-index: 9999;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

/* Header */
.global-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 20px;
  border-bottom: 1px solid #1a1a1a;
  background: rgba(8, 8, 8, 0.97);
  backdrop-filter: blur(10px);
  position: sticky;
  top: 0;
  z-index: 10;
}

.global-header button {
  background: transparent;
  border: none;
  color: #fff;
  font-size: 22px;
  cursor: pointer;
  padding: 0;
  line-height: 1;
}

.global-header span {
  flex: ;
  font-size: 20px;
  font-weight: 800;
  letter-spacing: -0.5px;
  display: flex;
  align-items: center;
  gap: 8px;
  flex-direction: row;
}

.global-live-dot {
  width: 8px;
  height: 8px;
  background: #ef4444;
  border-radius: 50%;
  animation: gpulse 2s infinite;

  
}

@keyframes gpulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.6; transform: scale(1.2); }
}

.global-online-count {
  font-size: 12px;
  color: #666;
  font-weight: 600;
  padding: 4px 10px;
  background: #111;
  border: 1px solid #1a1a1a;
  border-radius: 12px;
}

/* Messages Container */
.global-messages {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  scrollbar-width: none;
}

.global-messages::-webkit-scrollbar {
  display: none;
}

/* Message Bubble */
.g-msg {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  animation: slideIn 0.3s ease;
}

@keyframes slideIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.g-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
  border: 1px solid #1e1e1e;
  flex-shrink: 0;
}

.g-bubble {
  flex: 1;
  background: #0f0f0f;
  border: 1px solid #1a1a1a;
  border-radius: 12px;
  padding: 10px 14px;
  max-width: 80%;
}

.g-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
}

.g-name {
  font-size: 14px;
  font-weight: 700;
  color: #fff;
}

.g-dept {
  font-size: 11px;
  color: #555;
}

.g-time {
  font-size: 11px;
  color: #444;
  margin-left: auto;
  font-variant-numeric: tabular-nums;
}

.g-text {
  font-size: 14px;
  line-height: 1.5;
  color: #ccc;
  word-wrap: break-word;
}

/* Input Area */
.global-input {
  display: flex;
  gap: 10px;
  padding: 16px 20px;
  border-top: 1px solid #1a1a1a;
  background: #000;
}

.global-input input {
  flex: 1;
  padding: 12px 16px;
  background: #111;
  border: 1px solid #222;
  border-radius: 20px;
  color: #fff;
  font-size: 14px;
  outline: none;
  transition: border 0.2s;
  font-family: inherit;
}

.global-input input:focus {
  border-color: #555;
}

.global-input input::placeholder {
  color: #444;
}

.global-input button {
  padding: 12px 20px;
  background: #fff;
  border: none;
  border-radius: 20px;
  color: #000;
  font-weight: 700;
  font-size: 14px;
  cursor: pointer;
  transition: opacity 0.2s;
  flex-shrink: 0;
}

.global-input button:hover {
  opacity: 0.9;
}

.global-input button:disabled {
  background: #333;
  color: #666;
  cursor: not-allowed;
  opacity: 0.5;
}

/* Quick Reactions */
.g-reactions {
  display: flex;
  gap: 6px;
  margin-top: 8px;
}

.g-reaction {
  padding: 4px 8px;
  background: #111;
  border: 1px solid #222;
  border-radius: 12px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 4px;
}

.g-reaction:hover {
  background: #1a1a1a;
  border-color: #333;
}

.g-reaction.active {
  background: #1a1a1a;
  border-color: #fff;
}

.g-reaction-emoji {
  font-size: 14px;
}

.g-reaction-count {
  font-size: 11px;
  font-weight: 700;
  color: #888;
}

/* System Message */
.g-msg.system {
  justify-content: center;
}

.g-msg.system .g-bubble {
  max-width: fit-content;
  background: transparent;
  border: none;
  padding: 6px 12px;
}

.g-msg.system .g-text {
  font-size: 12px;
  color: #444;
  text-align: center;
}
</style>

<div id="globalOverlay" class="global-overlay">
  <div class="global-header">
    <button id="closeGlobal">←</button>
    <span>
      <span class="global-live-dot"></span>
      Global Community
    </span>
    <div class="global-online-count" id="globalOnlineCount">247 online</div>
  </div>
  
  <div class="global-messages" id="globalMessages"></div>
  
  <div class="global-input">
    <input id="globalInput" type="text" placeholder="Type a message..." maxlength="500" oninput="globalInputChange(this)">
    <button id="globalSend" disabled>Send</button>
  </div>
</div>

<script>
// Global Chat Data
const globalChatData = [
  {
    name: 'Israel Mark',
    dept: 'CS · LASU',
    avatar: 'img1',
    text: 'Just finished building a campus navigation app with computer vision 🎉',
    time: '2m ago',
    reactions: [{emoji: '🔥', count: 3}, {emoji: '👏', count: 5}]
  },
  {
    name: 'Ada James',
    dept: 'EE · UNILAG',
    avatar: 'img2',
    text: 'Anyone working on IoT projects? Looking to collaborate',
    time: '5m ago',
    reactions: []
  },
  {
    name: 'Samuel Obi',
    dept: 'Math · OAU',
    avatar: 'img3',
    text: 'Federal grant applications close tomorrow! Don\'t miss it',
    time: '12m ago',
    reactions: [{emoji: '💯', count: 8}]
  },
  {
    name: 'Fatima Bello',
    dept: 'CS · ABU',
    avatar: 'img1',
    text: 'Does anyone have resources on quantum computing fundamentals?',
    time: '18m ago',
    reactions: []
  },
  {
    name: 'Chidi Nwosu',
    dept: 'Physics · FUTO',
    avatar: 'img2',
    text: 'Lab equipment sale this Friday at Physics dept. Microscopes, oscilloscopes, and more',
    time: '24m ago',
    reactions: [{emoji: '👀', count: 12}]
  }
];

// Initialize global chat
function initGlobalChat() {
  const container = document.getElementById('globalMessages');
  if (!container) return;
  
  // Add welcome message
  container.innerHTML = `
    <div class="g-msg system">
      <div class="g-bubble">
        <div class="g-text">Welcome to Global Community! 247 students online</div>
      </div>
    </div>
  `;
  
  // Render messages
  globalChatData.forEach(msg => {
    container.innerHTML += buildGlobalMessage(msg);
  });
  
  // Scroll to bottom
  container.scrollTop = container.scrollHeight;
}

// Build message HTML
function buildGlobalMessage(msg) {
  let reactionsHTML = '';
  if (msg.reactions && msg.reactions.length > 0) {
    reactionsHTML = `
      <div class="g-reactions">
        ${msg.reactions.map(r => `
          <div class="g-reaction" onclick="this.classList.toggle('active')">
            <span class="g-reaction-emoji">${r.emoji}</span>
            <span class="g-reaction-count">${r.count}</span>
          </div>
        `).join('')}
        <div class="g-reaction" onclick="this.classList.toggle('active')">
          <span class="g-reaction-emoji">➕</span>
        </div>
      </div>
    `;
  }
  
  return `
    <div class="g-msg">
      <img src="${msg.avatar}" class="g-avatar" alt="${msg.name}">
      <div class="g-bubble">
        <div class="g-header">
          <span class="g-name">${msg.name}</span>
          <span class="g-dept">${msg.dept}</span>
          <span class="g-time">${msg.time}</span>
        </div>
        <div class="g-text">${msg.text}</div>
        ${reactionsHTML}
      </div>
    </div>
  `;
}

// Input change handler
function globalInputChange(input) {
  const sendBtn = document.getElementById('globalSend');
  sendBtn.disabled = !input.value.trim();
}

// Global Chat Controls
document.addEventListener('DOMContentLoaded', () => {
  const closeBtn = document.getElementById('closeGlobal');
  const overlay = document.getElementById('globalOverlay');
  const input = document.getElementById('globalInput');
  const sendBtn = document.getElementById('globalSend');
  
  if (!overlay || !closeBtn || !input || !sendBtn) return;
  
  // Initialize
  initGlobalChat();
  
  // Close button
  closeBtn.addEventListener('click', () => {
    overlay.style.display = 'none';
  });
  
  // Send message
  function sendGlobalMessage() {
    const text = input.value.trim();
    if (!text) return;
    
    const newMsg = {
      name: 'You',
      dept: 'Your Dept',
      avatar: 'img1',
      text: text,
      time: 'Just now',
      reactions: []
    };
    
    const container = document.getElementById('globalMessages');
    container.innerHTML += buildGlobalMessage(newMsg);
    container.scrollTop = container.scrollHeight;
    
    input.value = '';
    sendBtn.disabled = true;
  }
  
  // Send button click
  sendBtn.addEventListener('click', sendGlobalMessage);
  
  // Enter key
  input.addEventListener('keypress', (e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendGlobalMessage();
    }
  });
  
  // Update online count (simulate)
  setInterval(() => {
    const count = 240 + Math.floor(Math.random() * 20);
    const countEl = document.getElementById('globalOnlineCount');
    if (countEl) countEl.textContent = count + ' online';
  }, 5000);
});
</script>


<style>
  .Trendingemptypage{
    color: aliceblue;
    font-weight: bold;
    font-size: 80%;
    position: relative;
    top: 30vh;
    padding-inline: 10vw;
    color: aliceblue;
    display: flex;
    justify-content: center;
    
    
  }
</style>

<section id="Trending" class="Trending" style="display:block">

<style>
  .Trending {
    background: #080808;
    color: #fff;
    min-height: 100vh;
    width: 100%;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    overflow-x: hidden;
    overflow-y: scroll;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  body, html, #Trending { scrollbar-width: none; -ms-overflow-style: none; }
  body::-webkit-scrollbar, html::-webkit-scrollbar, #Trending::-webkit-scrollbar { display: none; }
  .Trending::-webkit-scrollbar { display: none; }

  /* ── Sticky Header ── */
  .t-header {
    position: sticky;
    top: 0;
    background: rgba(8,8,8,0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid #1a1a1a;
    padding: 14px 18px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 100;
  }

  .t-header-title {
    font-size: 20px;
    font-weight: 800;
    letter-spacing: -0.5px;
    background: linear-gradient(135deg, #fff 60%, #888);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .t-search {
    padding: 8px 14px;
    background: #111;
    border: 1px solid #2a2a2a;
    border-radius: 20px;
    color: #fff;
    font-size: 13px;
    width: 130px;
    outline: none;
    transition: all 0.2s;
  }

  .t-search:focus { border-color: #555; width: 160px; }
  .t-search::placeholder { color: #444; }

  /* ── Section Label ── */
  .t-label {
    font-size: 11px;
    font-weight: 700;
    color: #444;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    padding: 22px 18px 10px;
  }

  /* ── People Suggestions ── */
  .t-people {
    display: flex;
    gap: 10px;
    overflow-x: auto;
    padding: 4px 18px 18px;
    scrollbar-width: none;
  }

  .t-people::-webkit-scrollbar { display: none; }

  .t-person {
    flex: 0 0 auto;
    width: 140px;
    background: #111;
    border: 1px solid #1e1e1e;
    border-radius: 12px;
    padding: 16px 12px 14px;
    text-align: center;
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
  }

  .t-person::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
    background: linear-gradient(90deg, #333, #555, #333);
  }

  .t-person:hover { border-color: #333; transform: translateY(-2px); }

  .t-person-score {
    font-size: 9px;
    color: #444;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 10px;
    font-variant-numeric: tabular-nums;
  }

  .t-person img {
    width: 58px;
    height: 58px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #222;
    margin: 0 auto 10px;
    display: block;
  }

  .t-person-name { font-size: 13px; font-weight: 700; margin-bottom: 3px; }
  .t-person-dept { font-size: 11px; color: #555; margin-bottom: 12px; line-height: 1.4; }

  .t-follow-btn {
    width: 100%;
    padding: 7px 0;
    background: transparent;
    border: 1px solid #2a2a2a;
    border-radius: 6px;
    color: #ccc;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }

  .t-follow-btn:hover { border-color: #fff; color: #fff; }
  .t-follow-btn.following { background: #fff; color: #000; border-color: #fff; }

  /* ── Trending Topics ── */
  .t-topics-wrap {
    margin: 0 18px 4px;
    background: #0f0f0f;
    border: 1px solid #1a1a1a;
    border-radius: 12px;
    overflow: hidden;
  }

  .t-trend {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 13px 16px;
    border-bottom: 1px solid #141414;
    cursor: pointer;
    transition: background 0.2s;
  }

  .t-trend:last-child { border-bottom: none; }
  .t-trend:hover { background: rgba(255,255,255,0.04); }

  .t-trend-num {
    font-size: 16px;
    font-weight: 800;
    color: #2a2a2a;
    width: 22px;
    flex-shrink: 0;
    text-align: center;
    font-variant-numeric: tabular-nums;
  }

  .t-trend-body { flex: 1; }
  .t-trend-cat { font-size: 10px; color: #444; margin-bottom: 3px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
  .t-trend-title { font-size: 14px; font-weight: 700; margin-bottom: 2px; }
  .t-trend-count { font-size: 11px; color: #444; }

  .t-trend-heat {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .heat-hot { background: #ef4444; box-shadow: 0 0 6px #ef4444; }
  .heat-warm { background: #f97316; box-shadow: 0 0 6px #f97316; }
  .heat-cool { background: #3b82f6; box-shadow: 0 0 6px #3b82f6; }
  .heat-new { background: #22c55e; box-shadow: 0 0 6px #22c55e; }

  /* ── Global Chat Entry ── */
  .t-chat-bar {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 16px 18px;
    padding: 14px 16px;
    background: #0f0f0f;
    border: 1px solid #1a1a1a;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .t-chat-bar:hover { border-color: #333; }

  .t-chat-icon {
    width: 40px;
    height: 40px;
    background: #181818;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    flex-shrink: 0;
  }

  .t-chat-info { flex: 1; }
  .t-chat-label { font-size: 14px; font-weight: 700; margin-bottom: 3px; }

  .t-chat-sub {
    font-size: 11px;
    color: #444;
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .t-live-dot {
    width: 6px;
    height: 6px;
    background: #22c55e;
    border-radius: 50%;
    animation: tpulse 2s infinite;
    flex-shrink: 0;
  }

  @keyframes tpulse { 0%,100%{opacity:1} 50%{opacity:0.3} }

  .t-chat-arrow { color: #333; font-size: 18px; }

  /* ── Feed Posts ── */
  .t-feed-divider {
    height: 6px;
    background: #0d0d0d;
    border-top: 1px solid #141414;
    border-bottom: 1px solid #141414;
    margin: 4px 0;
  }

  .t-post {
    padding: 16px 18px;
    border-bottom: 1px solid #111;
    cursor: pointer;
    transition: background 0.15s;
  }

  .t-post:active { background: rgba(255,255,255,0.02); }

  .t-post-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
  }

  .t-post-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    object-fit: cover;
    border: 1px solid #1e1e1e;
    flex-shrink: 0;
  }

  .t-post-name { font-size: 13px; font-weight: 700; }
  .t-post-dept { font-size: 11px; color: #444; margin-top: 1px; }

  .t-post-follow {
    margin-left: auto;
    padding: 5px 12px;
    background: transparent;
    border: 1px solid #222;
    border-radius: 4px;
    color: #888;
    font-size: 11px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    flex-shrink: 0;
  }

  .t-post-follow:hover { border-color: #fff; color: #fff; }
  .t-post-follow.following { background: #1a1a1a; color: #555; border-color: #1a1a1a; }

  .t-post-text {
    font-size: 14px;
    line-height: 1.65;
    color: #ccc;
    margin-bottom: 12px;
  }

  .t-post-media {
    width: 100%;
    border-radius: 8px;
    margin-bottom: 12px;
    display: block;
    max-height: 380px;
    object-fit: cover;
    background: #0a0a0a;
  }

  .t-post-tag {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 8px;
    background: #141414;
    border: 1px solid #1e1e1e;
    border-radius: 4px;
    font-size: 10px;
    font-weight: 700;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 12px;
  }

  .t-post-actions {
    display: flex;
    gap: 0;
    align-items: center;
  }

  .t-action {
    background: transparent;
    border: none;
    color: #444;
    font-size: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 5px;
    padding: 6px 12px 6px 0;
    transition: color 0.2s;
    margin-right: 4px;
  }

  .t-action:hover { color: #aaa; }
  .t-action.liked { color: #fff; }
  .t-action svg { width: 17px; height: 17px; stroke: currentColor; fill: none; stroke-width: 2; }
  .t-action.liked svg { fill: #fff; stroke: #fff; }
  .t-bookmark { margin-left: auto; padding-right: 0; }

  /* ── Event Post ── */
  .t-event-badge {
    display: inline-block;
    padding: 3px 8px;
    background: #141414;
    border: 1px solid #2a2a2a;
    border-radius: 4px;
    font-size: 10px;
    color: #666;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 8px;
  }

  .t-event-title { font-size: 16px; font-weight: 800; margin-bottom: 8px; letter-spacing: -0.3px; }

  .t-event-meta {
    display: flex;
    gap: 14px;
    flex-wrap: wrap;
    font-size: 12px;
    color: #555;
    margin-bottom: 12px;
  }

  .t-event-rsvp { display: flex; gap: 8px; margin-top: 2px; }

  .t-rsvp-btn {
    flex: 1;
    padding: 9px 0;
    background: transparent;
    border: 1px solid #222;
    border-radius: 6px;
    color: #777;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
  }

  .t-rsvp-btn:hover { border-color: #555; color: #fff; }
  .t-rsvp-btn.active { background: #fff; color: #000; border-color: #fff; }

  /* ── Sponsored ── */
  .t-sponsored {
    margin: 4px 18px 4px;
    padding: 16px;
    background: #0f0f0f;
    border: 1px solid #1a1a1a;
    border-radius: 12px;
  }

  .t-sponsored-label {
    font-size: 9px;
    color: #333;
    text-transform: uppercase;
    letter-spacing: 2px;
    font-weight: 700;
    margin-bottom: 12px;
  }

  .t-sponsored-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 12px;
  }

  .t-sponsored-header img {
    width: 34px;
    height: 34px;
    border-radius: 8px;
    object-fit: cover;
    border: 1px solid #1e1e1e;
  }

  .t-sponsored-name { font-size: 13px; font-weight: 700; }
  .t-sponsored-tag { font-size: 11px; color: #444; margin-top: 2px; }

  .t-sponsored-img {
    width: 100%;
    border-radius: 8px;
    margin-bottom: 12px;
    display: block;
    max-height: 200px;
    object-fit: cover;
    background: #111;
  }

  .t-sponsored-text { font-size: 13px; color: #888; margin-bottom: 14px; line-height: 1.6; }

  .t-sponsored-btn {
    width: 100%;
    padding: 12px;
    background: #fff;
    color: #000;
    border: none;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    letter-spacing: 0.3px;
    transition: opacity 0.2s;
  }

  .t-sponsored-btn:hover { opacity: 0.9; }

  /* ── Fullscreen Viewer ── */
  #trendingViewer {
    display: none;
    position: fixed;
    inset: 0;
    background: #000;
    z-index: 99999;
    overflow-y: auto;
    flex-direction: column;
  }

  #trendingViewer.active { display: flex; flex-direction: column; }

  .tv-header {
    position: sticky;
    top: 0;
    background: #000;
    border-bottom: 1px solid #1a1a1a;
    padding: 16px 18px;
    display: flex;
    align-items: center;
    gap: 12px;
    z-index: 10;
  }

  .tv-back { background: transparent; border: none; color: #fff; font-size: 22px; cursor: pointer; padding: 0; line-height: 1; }
  .tv-back-label { font-size: 15px; font-weight: 700; }
  .tv-post { border-bottom: 8px solid #080808; }
  .tv-post-header { display: flex; align-items: center; gap: 10px; padding: 16px 18px; }
  .tv-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 1px solid #1e1e1e; }
  .tv-name { font-size: 14px; font-weight: 700; }
  .tv-time { font-size: 11px; color: #444; margin-top: 2px; }
  .tv-media { width: 100%; max-height: 500px; object-fit: contain; background: #050505; display: block; }
  .tv-body { padding: 14px 18px; font-size: 15px; line-height: 1.7; color: #ccc; }

  .tv-actions {
    display: flex;
    gap: 4px;
    padding: 10px 18px;
    border-top: 1px solid #111;
    border-bottom: 1px solid #111;
  }

  .tv-action-btn {
    background: transparent;
    border: none;
    color: #444;
    font-size: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px 6px 0;
    transition: color 0.2s;
  }

  .tv-action-btn:hover, .tv-action-btn.liked { color: #fff; }
  .tv-action-btn svg { width: 20px; height: 20px; stroke: currentColor; fill: none; stroke-width: 2; }
  .tv-action-btn.liked svg { fill: #fff; stroke: #fff; }

  .tv-comments { padding: 16px 18px; }
  .tv-comments-label { font-size: 10px; font-weight: 700; color: #333; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 16px; }
  .tv-comment { display: flex; gap: 10px; margin-bottom: 16px; }
  .tv-comment-avatar { width: 30px; height: 30px; border-radius: 50%; object-fit: cover; border: 1px solid #1a1a1a; flex-shrink: 0; }
  .tv-comment-name { font-size: 13px; font-weight: 700; margin-bottom: 3px; }
  .tv-comment-text { font-size: 13px; color: #aaa; line-height: 1.5; }
  .tv-comment-time { font-size: 10px; color: #333; margin-top: 4px; }

  .tv-comment-input-wrap {
    display: flex;
    gap: 10px;
    padding: 12px 18px;
    border-top: 1px solid #111;
    position: sticky;
    bottom: 0;
    background: #000;
  }

  .tv-comment-input {
    flex: 1;
    background: #0f0f0f;
    border: 1px solid #222;
    border-radius: 20px;
    padding: 10px 16px;
    color: #fff;
    font-size: 13px;
    outline: none;
    transition: border 0.2s;
    min-width: 0;
  }

  .tv-comment-input:focus { border-color: #555; }
  .tv-comment-input::placeholder { color: #333; }

  .tv-comment-send {
    background: #fff;
    color: #000;
    border: none;
    border-radius: 50%;
    width: 38px;
    height: 38px;
    font-size: 16px;
    cursor: pointer;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.2s;
  }

  .tv-comment-send:hover { opacity: 0.85; }

  /* ── Global Chat (PRESERVED EXACTLY) ── */
  .open-global {
    padding:10px 14px;
    border:none;
    border-radius:6px;
    background:#0095f6;
    color:#fff;
    font-weight:600;
    font-size: 10%;
  }

  .global-overlay {
    position:fixed;
    inset:0;
    background:#000;
    color:#fff;
    display:none;
    flex-direction:column;
    z-index:9999;
  }

  .global-header {
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:14px;
    border-bottom:1px solid #222;
    font-weight:600;
  }

  .global-header button {
    background:none;
    border:none;
    color:#fff;
    font-size:18px;
  }

  .global-messages {
    flex:1;
    overflow-y:auto;
    padding:12px;
    font-size:14px;
  }

  .g-msg {
    margin-bottom:10px;
    color:#ddd;
    line-height:1.4;
  }

  .g-name {
    font-weight:600;
    color:#4dabf7;
  }

  .global-input {
    display:flex;
    border-top:1px solid #222;
    width:100%;
    overflow:hidden;
  }

  .global-input input {
    flex:1;
    min-width:0;
    padding:12px;
    background:#000;
    color:#fff;
    border:none;
    outline:none;
  }

  .global-input button {
    padding:12px 16px;
    background:#0095f6;
    border:none;
    color:#fff;
    font-weight:600;
  }
</style>


<!-- ── Header ── -->
<div class="t-header">
  <div class="t-header-title">Trending</div>
  <input type="text" class="t-search" placeholder="Search...">
</div>

<!-- ── People ── -->
<div class="t-label">People You May Know</div>
<div id="suggestionsBlock">
<div class="t-people" ontouchstart="event.stopPropagation()" ontouchmove="event.stopPropagation()">

  <div class="t-person">
    <div class="t-person-score">Impact · 7,402</div>
    <img src="img2" alt="profile">
    <div class="t-person-name">Israel Mark</div>
    <div class="t-person-dept">Computer Science · LASU</div>
    <button class="t-follow-btn" onclick="this.classList.toggle('following');this.textContent=this.classList.contains('following')?'Following':'Follow'">Follow</button>
  </div>

  <div class="t-person">
    <div class="t-person-score">Impact · 6,891</div>
    <img src="img3" alt="profile">
    <div class="t-person-name">Ada James</div>
    <div class="t-person-dept">Electrical Eng · UNILAG</div>
    <button class="t-follow-btn" onclick="this.classList.toggle('following');this.textContent=this.classList.contains('following')?'Following':'Follow'">Follow</button>
  </div>

  <div class="t-person">
    <div class="t-person-score">Impact · 5,230</div>
    <img src="img1" alt="profile">
    <div class="t-person-name">Samuel Obi</div>
    <div class="t-person-dept">Mathematics · OAU</div>
    <button class="t-follow-btn" onclick="this.classList.toggle('following');this.textContent=this.classList.contains('following')?'Following':'Follow'">Follow</button>
  </div>

  <div class="t-person">
    <div class="t-person-score">Impact · 4,780</div>
    <img src="img2" alt="profile">
    <div class="t-person-name">Fatima Bello</div>
    <div class="t-person-dept">Computer Science · ABU</div>
    <button class="t-follow-btn" onclick="this.classList.toggle('following');this.textContent=this.classList.contains('following')?'Following':'Follow'">Follow</button>
  </div>

  <div class="t-person">
    <div class="t-person-score">Impact · 4,120</div>
    <img src="img3" alt="profile">
    <div class="t-person-name">Chidi Nwosu</div>
    <div class="t-person-dept">Physics · FUTO</div>
    <button class="t-follow-btn" onclick="this.classList.toggle('following');this.textContent=this.classList.contains('following')?'Following':'Follow'">Follow</button>
  </div>

</div>
</div>


<!-- ── Trending Topics ── -->
<div class="t-label">Trending Now</div>
<div id="trendingTopicsBlock">
<div class="t-topics-wrap">

  <div class="t-trend">
    <div class="t-trend-num">1</div>
    <div class="t-trend-body">
      <div class="t-trend-cat">Research</div>
      <div class="t-trend-title">#AIinHealthcare</div>
      <div class="t-trend-count">1,204 posts</div>
    </div>
    <div class="t-trend-heat heat-hot"></div>
  </div>

  <div class="t-trend">
    <div class="t-trend-num">2</div>
    <div class="t-trend-body">
      <div class="t-trend-cat">Campus · Hot</div>
      <div class="t-trend-title">Final Year Project Defense</div>
      <div class="t-trend-count">Schedules and updates ongoing</div>
    </div>
    <div class="t-trend-heat heat-hot"></div>
  </div>

  <div class="t-trend">
    <div class="t-trend-num">3</div>
    <div class="t-trend-body">
      <div class="t-trend-cat">Scholarship</div>
      <div class="t-trend-title">Federal Research Grant 2026</div>
      <div class="t-trend-count">542 mentions · Deadline approaching</div>
    </div>
    <div class="t-trend-heat heat-warm"></div>
  </div>

  <div class="t-trend">
    <div class="t-trend-num">4</div>
    <div class="t-trend-body">
      <div class="t-trend-cat">Technology</div>
      <div class="t-trend-title">#QuantumComputing</div>
      <div class="t-trend-count">889 posts</div>
    </div>
    <div class="t-trend-heat heat-cool"></div>
  </div>

  <div class="t-trend">
    <div class="t-trend-num">5</div>
    <div class="t-trend-body">
      <div class="t-trend-cat">Campus</div>
      <div class="t-trend-title">ASUU Update 2026</div>
      <div class="t-trend-count">3,401 posts</div>
    </div>
    <div class="t-trend-heat heat-new"></div>
  </div>

</div>
</div>
<!-- ── Global Chat Bar ── -->
<div class="t-chat-bar" onclick="document.getElementById('globalOverlay').style.display='flex'; document.getElementById('globalMessages').scrollTop=99999;">
  <div class="t-chat-icon">💬</div>
  <div class="t-chat-info">
    <div class="t-chat-label">Global Community</div>
    <div class="t-chat-sub">
      <div class="t-live-dot"></div>
      247 students online now
    </div>
  </div>
  <div class="t-chat-arrow">›</div>
</div>


<!-- ── Feed ── -->
<div class="t-label">From Your Network</div>
<div class="t-feed-divider"></div>
<div id="feedContainer"></div>


<!-- Image Post -->
<div class="t-post" onclick="openTrendingViewer(0)">
  <div class="t-post-header">
    <img src="img1" class="t-post-avatar">
    <div style="flex:1;">
      <div class="t-post-name">Israel Mark</div>
      <div class="t-post-dept">CS · LASU · 2h ago</div>
    </div>
    <button class="t-post-follow" onclick="event.stopPropagation();this.classList.toggle('following');this.textContent=this.classList.contains('following')?'Following':'Follow'">Follow</button>
  </div>
  <div class="t-post-text">Built the first working prototype of my campus AI navigation system. Computer vision + real-time pathfinding. Still rough but it works!</div>
  <img src="img2" class="t-post-media">
  <div><span class="t-post-tag">Research</span></div>
  <div class="t-post-actions">
    <button class="t-action" onclick="event.stopPropagation();this.classList.toggle('liked');this.querySelector('span').textContent=this.classList.contains('liked')?25:24">
      <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
      <span>24</span>
    </button>
    <button class="t-action" onclick="event.stopPropagation();openTrendingViewer(0)">
      <svg viewBox="0 0 24 24"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
      <span>10</span>
    </button>
    <button class="t-action" onclick="event.stopPropagation();shareTPost(0)">
      <svg viewBox="0 0 24 24"><path d="M22 2L11 13"/><path d="M22 2L15 22L11 13L2 9L22 2Z"/></svg>
      <span>6</span>
    </button>
    <button class="t-action t-bookmark" onclick="event.stopPropagation();this.classList.toggle('liked')">
      <svg viewBox="0 0 24 24"><path d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"/></svg>
    </button>
  </div>
</div>


<!-- Video Post -->
<div class="t-post" onclick="openTrendingViewer(1)">
  <div class="t-post-header">
    <img src="img2" class="t-post-avatar">
    <div style="flex:1;">
      <div class="t-post-name">Ada James</div>
      <div class="t-post-dept">EE · UNILAG · 5h ago</div>
    </div>
    <button class="t-post-follow" onclick="event.stopPropagation();this.classList.toggle('following');this.textContent=this.classList.contains('following')?'Following':'Follow'">Follow</button>
  </div>
  <div class="t-post-text">Demo of our lithography system at the lab. 14nm feature resolution on a university budget — the team worked insane hours for this.</div>
  <video controls class="t-post-media" onclick="event.stopPropagation()" style="max-height:280px;">
    <source src="" type="video/mp4">
  </video>
  <div><span class="t-post-tag">Lab</span></div>
  <div class="t-post-actions">
    <button class="t-action" onclick="event.stopPropagation();this.classList.toggle('liked');this.querySelector('span').textContent=this.classList.contains('liked')?134:133">
      <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
      <span>133</span>
    </button>
    <button class="t-action" onclick="event.stopPropagation();openTrendingViewer(1)">
      <svg viewBox="0 0 24 24"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
      <span>42</span>
    </button>
    <button class="t-action" onclick="event.stopPropagation();shareTPost(1)">
      <svg viewBox="0 0 24 24"><path d="M22 2L11 13"/><path d="M22 2L15 22L11 13L2 9L22 2Z"/></svg>
      <span>19</span>
    </button>
    <button class="t-action t-bookmark" onclick="event.stopPropagation();this.classList.toggle('liked')">
      <svg viewBox="0 0 24 24"><path d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"/></svg>
    </button>
  </div>
</div>


<!-- Event Post -->
<div class="t-post">
  <div class="t-post-header">
    <img src="img3" class="t-post-avatar">
    <div style="flex:1;">
      <div class="t-post-name">Samuel Obi</div>
      <div class="t-post-dept">Math · OAU · 1d ago</div>
    </div>
    <button class="t-post-follow" onclick="event.stopPropagation();this.classList.toggle('following');this.textContent=this.classList.contains('following')?'Following':'Follow'">Follow</button>
  </div>
  <span class="t-event-badge">Event</span>
  <div class="t-event-title">AI & Research Networking Meetup</div>
  <div class="t-event-meta">
    <span>Feb 20, 2026</span>
    <span>10:00 WAT</span>
    <span>Main Auditorium, UNILAG</span>
  </div>
  <img src="img3" class="t-post-media" style="max-height:200px;">
  <div class="t-post-text" style="margin-top:10px;">Join students and researchers for a collaborative session on AI, innovation, and academic networking. Open to all departments.</div>
  <div class="t-event-rsvp">
    <button class="t-rsvp-btn active">Attending</button>
    <button class="t-rsvp-btn">Interested</button>
    <button class="t-rsvp-btn">Can't Go</button>
  </div>
</div>


<!-- Text Post -->
<div class="t-post" onclick="openTrendingViewer(2)">
  <div class="t-post-header">
    <img src="img1" class="t-post-avatar">
    <div style="flex:1;">
      <div class="t-post-name">Fatima Bello</div>
      <div class="t-post-dept">CS · ABU · 1d ago</div>
    </div>
    <button class="t-post-follow" onclick="event.stopPropagation();this.classList.toggle('following');this.textContent=this.classList.contains('following')?'Following':'Follow'">Follow</button>
  </div>
  <div class="t-post-text">Got into the Federal Research Grant shortlist 🎉 Three years of grinding finally paying off. To every student doubting yourself — keep pushing. The work speaks eventually.</div>
  <div class="t-post-actions">
    <button class="t-action" onclick="event.stopPropagation();this.classList.toggle('liked');this.querySelector('span').textContent=this.classList.contains('liked')?893:892">
      <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
      <span>892</span>
    </button>
    <button class="t-action" onclick="event.stopPropagation();openTrendingViewer(2)">
      <svg viewBox="0 0 24 24"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
      <span>204</span>
    </button>
    <button class="t-action" onclick="event.stopPropagation();shareTPost(2)">
      <svg viewBox="0 0 24 24"><path d="M22 2L11 13"/><path d="M22 2L15 22L11 13L2 9L22 2Z"/></svg>
      <span>87</span>
    </button>
    <button class="t-action t-bookmark" onclick="event.stopPropagation();this.classList.toggle('liked')">
      <svg viewBox="0 0 24 24"><path d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"/></svg>
    </button>
  </div>
</div>


<!-- Sponsored -->
<div class="t-sponsored">
  <div class="t-sponsored-label">Sponsored</div>
  <div class="t-sponsored-header">
    <img src="img2" alt="logo">
    <div>
      <div class="t-sponsored-name">AI Research Lab Nigeria</div>
      <div class="t-sponsored-tag">Lagos · Verified</div>
    </div>
  </div>
  <img src="img3" class="t-sponsored-img">
  <div class="t-sponsored-text">Apply for our 2026 AI Research Internship. Open to 300–500 level students across all Nigerian universities. Stipend included.</div>
  <button class="t-sponsored-btn">Apply Now →</button>
</div>


<!-- ── Fullscreen Viewer ── -->
<div id="trendingViewer">
  <div class="tv-header">
    <button class="tv-back" onclick="closeTrendingViewer()">←</button>
    <span class="tv-back-label">Post</span>
  </div>
  <div id="tvFeed"></div>
</div>


<!-- ── Global Chat Overlay (PRESERVED) ── -->
<div id="globalOverlay" class="global-overlay">
  <div class="global-header">
    <span>🔴 Global Community</span>
    <button id="closeGlobal">✕</button>
  </div>
  <div class="global-messages" id="globalMessages"></div>
  <div class="global-input">
    <input id="globalInput" type="text" placeholder="Say something...">
    <button id="globalSend">Send</button>
  </div>
</div>


<script>
  const tPosts = [
    {
      name: 'Israel Mark', dept: 'CS · LASU', time: '2 hours ago', avatar: 'img1',
      text: 'Built the first working prototype of my campus AI navigation system. Computer vision + real-time pathfinding. Still rough but it works!',
      media: { type: 'image', src: 'img2' },
      likes: 24, comments: 10, shares: 6
    },
    {
      name: 'Ada James', dept: 'EE · UNILAG', time: '5 hours ago', avatar: 'img2',
      text: 'Demo of our lithography system at the lab. 14nm feature resolution on a university budget — the team worked insane hours for this.',
      media: { type: 'video', src: '' },
      likes: 133, comments: 42, shares: 19
    },
    {
      name: 'Fatima Bello', dept: 'CS · ABU', time: '1 day ago', avatar: 'img1',
      text: 'Got into the Federal Research Grant shortlist 🎉 Three years of grinding finally paying off. To every student doubting yourself — keep pushing. The work speaks eventually.',
      media: null,
      likes: 892, comments: 204, shares: 87
    }
  ];

  function buildTVPost(p, i) {
    let mediaHTML = '';
    if (p.media) {
      if (p.media.type === 'image' && p.media.src) {
        mediaHTML = `<img src="${p.media.src}" class="tv-media">`;
      } else if (p.media.type === 'video') {
        mediaHTML = `<video controls class="tv-media" style="max-height:400px;"><source src="${p.media.src}" type="video/mp4"></video>`;
      }
    }
    return `
      <div class="tv-post">
        <div class="tv-post-header">
          <img src="${p.avatar}" class="tv-avatar">
          <div style="flex:1;"><div class="tv-name">${p.name}</div><div class="tv-time">${p.dept} · ${p.time}</div></div>
          <button style="padding:5px 12px;background:transparent;border:1px solid #222;border-radius:4px;color:#777;font-size:11px;font-weight:600;cursor:pointer;transition:all 0.2s;"
            onmouseover="this.style.borderColor='#fff';this.style.color='#fff'"
            onmouseleave="this.style.borderColor='#222';this.style.color='#777'">Follow</button>
        </div>
        ${mediaHTML}
        <div class="tv-body">${p.text}</div>
        <div class="tv-actions">
          <button class="tv-action-btn" onclick="this.classList.toggle('liked');let s=this.querySelector('span');let n=parseInt(s.textContent.replace(/,/g,''));s.textContent=(this.classList.contains('liked')?n+1:n-1).toLocaleString()">
            <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
            <span>${p.likes.toLocaleString()}</span>
          </button>
          <button class="tv-action-btn" onclick="document.getElementById('tv-input-${i}').focus()">
            <svg viewBox="0 0 24 24"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
            <span>${p.comments}</span>
          </button>
          <button class="tv-action-btn" onclick="shareTPost(${i})">
            <svg viewBox="0 0 24 24"><path d="M22 2L11 13"/><path d="M22 2L15 22L11 13L2 9L22 2Z"/></svg>
            <span>${p.shares}</span>
          </button>
          <button class="tv-action-btn" style="margin-left:auto" onclick="this.classList.toggle('liked')">
            <svg viewBox="0 0 24 24"><path d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"/></svg>
          </button>
        </div>
        <div class="tv-comments" id="tv-comments-${i}">
          <div class="tv-comments-label">Comments</div>
          <div class="tv-comment">
            <img src="img3" class="tv-comment-avatar">
            <div><div class="tv-comment-name">Samuel Obi</div><div class="tv-comment-text">This is amazing! How long did it take to build?</div><div class="tv-comment-time">1 hour ago</div></div>
          </div>
          <div class="tv-comment">
            <img src="img2" class="tv-comment-avatar">
            <div><div class="tv-comment-name">Ngozi Eze</div><div class="tv-comment-text">Incredible work. Would love to collaborate.</div><div class="tv-comment-time">3 hours ago</div></div>
          </div>
        </div>
        <div class="tv-comment-input-wrap">
          <input type="text" class="tv-comment-input" id="tv-input-${i}" placeholder="Add a comment...">
          <button class="tv-comment-send" onclick="
            const inp=document.getElementById('tv-input-${i}');
            if(!inp.value.trim())return;
            const c=document.getElementById('tv-comments-${i}');
            const d=document.createElement('div');d.className='tv-comment';
            d.innerHTML='<img src=img2 class=tv-comment-avatar><div><div class=tv-comment-name>You</div><div class=tv-comment-text>'+inp.value+'</div><div class=tv-comment-time>Just now</div></div>';
            c.appendChild(d);inp.value='';c.scrollIntoView({behavior:'smooth',block:'end'});
          ">↑</button>
        </div>
      </div>
    `;
  }

  function openTrendingViewer(i) {
    const v = document.getElementById('trendingViewer');
    const f = document.getElementById('tvFeed');
    f.innerHTML = '';
    for (let j = i; j < tPosts.length; j++) f.innerHTML += buildTVPost(tPosts[j], j);
    v.classList.add('active');
    v.scrollTop = 0;
  }

  function closeTrendingViewer() {
    document.getElementById('trendingViewer').classList.remove('active');
  }

  function shareTPost(i) {
    const url = `https://trends.com/post/${i}`;
    if (navigator.share) {
      navigator.share({ title: tPosts[i].text.substring(0, 60), url });
    } else {
      navigator.clipboard.writeText(url).then(() => {
        const t = document.createElement('div');
        t.textContent = 'Link copied!';
        t.style.cssText = 'position:fixed;bottom:32px;left:50%;transform:translateX(-50%);background:#fff;color:#000;padding:10px 20px;border-radius:6px;font-size:13px;font-weight:600;z-index:999999;';
        document.body.appendChild(t);
        setTimeout(() => t.remove(), 2000);
      });
    }
  }

  // RSVP toggle
  document.querySelectorAll('.t-event-rsvp').forEach(group => {
    group.querySelectorAll('.t-rsvp-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        group.querySelectorAll('.t-rsvp-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
      });
    });
  });

  // ── Global Chat (PRESERVED EXACTLY) ──
  document.addEventListener("DOMContentLoaded", () => {
    const openBtn  = document.getElementById("openGlobal");
    const closeBtn = document.getElementById("closeGlobal");
    const overlay  = document.getElementById("globalOverlay");
    const messages = document.getElementById("globalMessages");
    const input    = document.getElementById("globalInput");
    const sendBtn  = document.getElementById("globalSend");

    function addMessage(name, text) {
      const div = document.createElement("div");
      div.className = "g-msg";
      div.innerHTML = `<span class="g-name">${name}:</span> ${text}`;
      messages.appendChild(div);
      messages.scrollTop = messages.scrollHeight;
    }

    const seedMessages = [
    
    ];

    seedMessages.forEach(m => addMessage(m[0], m[1]));

    if (openBtn && overlay && messages) {
      openBtn.addEventListener("click", () => {
        overlay.style.display = "flex";
        messages.scrollTop = messages.scrollHeight;
      });
    }

    if (closeBtn && overlay) {
      closeBtn.addEventListener("click", () => {
        overlay.style.display = "none";
      });
    }

    function sendMessage() {
      const text = input.value.trim();
      if (!text) return;
      addMessage("You • CS", text);
      input.value = "";
    }

    if (sendBtn) sendBtn.addEventListener("click", sendMessage);

    if (input) {
      input.addEventListener("keypress", e => {
        if (e.key === "Enter") sendMessage();
      });
      input.addEventListener("paste", e => {
        e.preventDefault();
        const text = e.clipboardData.getData("text");
        document.execCommand("insertText", false, text);
      });
    }
  });
</script>


</section>
  
  
 <section style="display:none" id="Research" class="Research">
<style>
.Research {
  background: #000;
  color: #fff;
  min-height: 100vh;
  width: 100%;
  position: relative;
  top: 0;
  left: 0;
  overflow-y: scroll;
  overflow-x: hidden;
  z-index: 900;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}
  .research-header {
    position: sticky;
    top: 0;
    background: #000;
    border-bottom: 1px solid #222;
    padding: 16px 20px 0;
    z-index: 100;
  }

  .research-header-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 14px;
    position:fixed ;
    width: 100vw;
    justify-content: space;
    background-color:#000000ba;

    
  }

  .research-page-title {
    font-size: 22px;
    font-weight: 700;
    letter-spacing: -0.5px;
  }

  .research-search {
    padding: 8px 14px;
    background: transparent;
    border: 1px solid #333;
    border-radius: 6px;
    color: #fff;
    font-size: 13px;
    width: 160px;
    transition: all 0.2s;
    outline: none;
  }

  .research-search:focus { border-color: #fff; width: 200px; }
  .research-search::placeholder { color: #555; }

  .research-filters {
    display: flex;
    gap: 0;
    overflow-x: auto;
    scrollbar-width: none;
  }

  .research-filters::-webkit-scrollbar { display: none; }

  .research-filter {
    padding: 10px 18px;
    background: transparent;
    border: none;
    border-bottom: 2px solid transparent;
    color: #555;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.2s;
  }

  .research-filter:hover { color: #fff; }
  .research-filter.active { color: #fff; border-bottom-color: #fff; }

  .research-body {
    max-width: 680px;
    margin: 0 auto;
    padding: 24px 20px 80px;
  }

  .r-section-label {
    font-size: 11px;
    font-weight: 600;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin: 28px 0 14px;
  }

  .r-post {
    border-bottom: 1px solid #1a1a1a;
    padding: 20px 0;
    cursor: pointer;
    transition: background 0.2s;
  }

  .r-post:hover { background: rgba(255,255,255,0.02); }

  .r-post-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 12px;
  }

  .r-post-avatar {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    object-fit: cover;
    border: 1px solid #222;
    flex-shrink: 0;
  }

  .r-post-name { font-size: 13px; font-weight: 600; }
  .r-post-meta { font-size: 12px; color: #555; margin-top: 2px; }

  .r-post-title {
    font-size: 16px;
    font-weight: 600;
    line-height: 1.4;
    margin-bottom: 8px;
    letter-spacing: -0.2px;
  }

  .r-post-abstract {
    font-size: 13px;
    color: #888;
    line-height: 1.7;
    margin-bottom: 10px;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .r-post-tags { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 12px; }

  .r-post-tag {
    padding: 3px 8px;
    border: 1px solid #333;
    border-radius: 3px;
    font-size: 11px;
    color: #777;
  }

  .r-post-actions { display: flex; gap: 18px; align-items: center; }

  .r-action {
    background: transparent;
    border: none;
    color: #555;
    font-size: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 5px;
    padding: 0;
    transition: color 0.2s;
  }

  .r-action:hover, .r-action.liked { color: #fff; }
  .r-action svg { width: 16px; height: 16px; stroke: currentColor; fill: none; stroke-width: 2; }
  .r-action.liked svg { fill: #fff; }
  .r-bookmark { margin-left: auto; }

  .r-event {
    border: 1px solid #222;
    border-radius: 4px;
    padding: 16px;
    margin-bottom: 12px;
    transition: border-color 0.2s;
  }

  .r-event:hover { border-color: #444; }

  .r-event-top { display: flex; gap: 14px; align-items: flex-start; margin-bottom: 12px; }

  .r-event-date {
    width: 52px;
    height: 52px;
    background: #fff;
    color: #000;
    border-radius: 4px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .r-event-month { font-size: 9px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
  .r-event-day { font-size: 22px; font-weight: 700; line-height: 1; }

  .r-event-type {
    display: inline-block;
    padding: 2px 8px;
    border: 1px solid #333;
    border-radius: 3px;
    font-size: 10px;
    color: #777;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 6px;
  }

  .r-event-title { font-size: 15px; font-weight: 600; margin-bottom: 4px; }
  .r-event-meta { font-size: 12px; color: #555; }
  .r-event-snippet { font-size: 13px; color: #777; margin-bottom: 14px; line-height: 1.6; }

  .r-event-rsvp { display: flex; gap: 8px; }

  .r-rsvp-btn {
    flex: 1;
    padding: 9px 0;
    background: transparent;
    border: 1px solid #333;
    border-radius: 4px;
    color: #fff;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
  }

  .r-rsvp-btn:hover, .r-rsvp-btn.active { background: #fff; color: #000; border-color: #fff; }

  .r-topics { display: flex; flex-wrap: wrap; gap: 8px; }

  .r-topic {
    padding: 7px 14px;
    background: transparent;
    border: 1px solid #333;
    border-radius: 4px;
    font-size: 12px;
    color: #888;
    cursor: pointer;
    transition: all 0.2s;
  }

  .r-topic:hover { border-color: #fff; color: #fff; }

  /* Viewer */
  #researchViewer {
    display: none;
    position: fixed;
    inset: 0;
    background: #000;
    z-index: 99999;
    overflow-y: auto;
    flex-direction: column;
  }

  #researchViewer.active { display: flex; flex-direction: column; }

  .rv-header {
    position: sticky;
    top: 0;
    background: #000;
    border-bottom: 1px solid #222;
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    z-index: 10;
  }

  .rv-back { background: transparent; border: none; color: #fff; font-size: 22px; cursor: pointer; padding: 0; }
  .rv-back-label { font-size: 15px; font-weight: 600; }

  .rv-post { padding: 0 0 40px; }

  .rv-post-header { display: flex; align-items: center; gap: 12px; padding: 16px 20px; }

  .rv-avatar { width: 42px; height: 42px; border-radius: 50%; object-fit: cover; border: 1px solid #333; }
  .rv-name { font-size: 14px; font-weight: 600; }
  .rv-time { font-size: 12px; color: #555; margin-top: 2px; }

  .rv-title { font-size: 20px; font-weight: 700; line-height: 1.3; letter-spacing: -0.3px; padding: 0 20px 10px; }
  .rv-authors { font-size: 13px; color: #555; padding: 0 20px 16px; }

  .rv-abstract {
    font-size: 14px;
    color: #aaa;
    line-height: 1.8;
    padding: 16px 20px;
    border-top: 1px solid #111;
    border-bottom: 1px solid #111;
  }

  .rv-tags { display: flex; flex-wrap: wrap; gap: 8px; padding: 16px 20px; }

  .rv-tag { padding: 4px 10px; border: 1px solid #333; border-radius: 3px; font-size: 12px; color: #777; }

  .rv-actions { display: flex; gap: 20px; padding: 14px 20px; border-top: 1px solid #111; border-bottom: 1px solid #111; }

  .rv-action-btn {
    background: transparent;
    border: none;
    color: #666;
    font-size: 13px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 0;
    transition: color 0.2s;
  }

  .rv-action-btn:hover, .rv-action-btn.liked { color: #fff; }
  .rv-action-btn svg { width: 20px; height: 20px; stroke: currentColor; fill: none; stroke-width: 2; }
  .rv-action-btn.liked svg { fill: #fff; }

  .rv-comments { padding: 16px 20px; }

  .rv-comments-label {
    font-size: 11px;
    font-weight: 600;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 16px;
  }

  .rv-comment { display: flex; gap: 10px; margin-bottom: 16px; }

  .rv-comment-avatar { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; border: 1px solid #222; flex-shrink: 0; }
  .rv-comment-name { font-size: 13px; font-weight: 600; margin-bottom: 3px; }
  .rv-comment-text { font-size: 13px; color: #bbb; line-height: 1.5; }
  .rv-comment-time { font-size: 11px; color: #444; margin-top: 4px; }

  .rv-comment-input-wrap {
    display: flex;
    gap: 10px;
    padding: 12px 20px;
    border-top: 1px solid #1a1a1a;
    position: sticky;
    bottom: 0;
    background: #000;
  }

  .rv-comment-input {
    flex: 1;
    background: #111;
    border: 1px solid #333;
    border-radius: 20px;
    padding: 10px 16px;
    color: #fff;
    font-size: 13px;
    outline: none;
    transition: border 0.2s;
  }

  .rv-comment-input:focus { border-color: #fff; }
  .rv-comment-input::placeholder { color: #444; }

  .rv-comment-send {
    background: #fff;
    color: #000;
    border: none;
    border-radius: 50%;
    width: 38px;
    height: 38px;
    font-size: 16px;
    cursor: pointer;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .rv-comment-send:hover { background: #e6e6e6; }

  .Research::-webkit-scrollbar { width: 6px; }
  .Research::-webkit-scrollbar-track { background: #000; }
  .Research::-webkit-scrollbar-thumb { background: #222; border-radius: 4px; }
</style>

<!-- Header -->
<div class="research-header-top">
  <div style="display:flex; align-items:center; gap:12px;">
    <button  onclick="document.getElementById('drawer').style.display='block'" style="background:transparent; border:none; color:#fff; font-size:22px; cursor:pointer; padding:0; line-height:1;">←</button>
    <div class="research-page-title">Research</div>
  </div>
  <input type="text" class="research-search" placeholder="Search...">
</div>
<!-- Body -->
<div class="research-body">

  <div class="r-section-label">Latest Papers</div>
<div id="researchFeed"></div>
  <div class="r-post" onclick="openResearchViewer(0)">
    <div class="r-post-header">
      <img src="img1" class="r-post-avatar">
      <div>
        <div class="r-post-name">Israel Mark</div>
        <div class="r-post-meta">Computer Science · LASU · Jan 28, 2026</div>
      </div>
    </div>
    <div class="r-post-title">Reinforcement Learning for Adaptive Network Routing in Low-Bandwidth Environments</div>
    <div class="r-post-abstract">This paper presents a novel RL-based approach to optimize network routing in constrained bandwidth scenarios common in developing regions. We demonstrate a 34% improvement in throughput over traditional routing algorithms.</div>
    <div class="r-post-tags">
      <span class="r-post-tag">Machine Learning</span>
      <span class="r-post-tag">Networking</span>
      <span class="r-post-tag">RL</span>
    </div>
    <div class="r-post-actions">
      <button class="r-action" onclick="event.stopPropagation(); this.classList.toggle('liked'); let s=this.querySelector('span'); s.textContent=this.classList.contains('liked')?893:892;">
        <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
        <span>892</span>
      </button>
      <button class="r-action" onclick="event.stopPropagation(); openResearchViewer(0)">
        <svg viewBox="0 0 24 24"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
        <span>67</span>
      </button>
      <button class="r-action" onclick="event.stopPropagation(); shareRPost(0)">
        <svg viewBox="0 0 24 24"><path d="M22 2L11 13"/><path d="M22 2L15 22L11 13L2 9L22 2Z"/></svg>
        <span>145</span>
      </button>
      <button class="r-action r-bookmark" onclick="event.stopPropagation(); this.classList.toggle('liked')">
        <svg viewBox="0 0 24 24"><path d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"/></svg>
      </button>
    </div>
  </div>

  <div class="r-post" onclick="openResearchViewer(1)">
    <div class="r-post-header">
      <img src="img2" class="r-post-avatar">
      <div>
        <div class="r-post-name">Ada James</div>
        <div class="r-post-meta">Physics · UNILAG · Dec 12, 2025</div>
      </div>
    </div>
    <div class="r-post-title">Federated Learning on Mobile Devices: Challenges and Opportunities in Sub-Saharan Africa</div>
    <div class="r-post-abstract">We investigate the viability of federated learning deployments on low-spec Android devices across university campuses in Nigeria. Results show a 22% communication overhead reduction while maintaining 96% model accuracy.</div>
    <div class="r-post-tags">
      <span class="r-post-tag">Federated Learning</span>
      <span class="r-post-tag">Mobile</span>
      <span class="r-post-tag">Africa</span>
    </div>
    <div class="r-post-actions">
      <button class="r-action" onclick="event.stopPropagation(); this.classList.toggle('liked'); let s=this.querySelector('span'); s.textContent=this.classList.contains('liked')?'1.2K+':'1.2K';">
        <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
        <span>1.2K</span>
      </button>
      <button class="r-action" onclick="event.stopPropagation(); openResearchViewer(1)">
        <svg viewBox="0 0 24 24"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
        <span>94</span>
      </button>
      <button class="r-action" onclick="event.stopPropagation(); shareRPost(1)">
        <svg viewBox="0 0 24 24"><path d="M22 2L11 13"/><path d="M22 2L15 22L11 13L2 9L22 2Z"/></svg>
        <span>210</span>
      </button>
      <button class="r-action r-bookmark" onclick="event.stopPropagation(); this.classList.toggle('liked')">
        <svg viewBox="0 0 24 24"><path d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"/></svg>
      </button>
    </div>
  </div>

  <div class="r-post" onclick="openResearchViewer(2)">
    <div class="r-post-header">
      <img src="img3" class="r-post-avatar">
      <div>
        <div class="r-post-name">Zainab Yusuf</div>
        <div class="r-post-meta">Biotechnology · ABU · Nov 5, 2025</div>
      </div>
    </div>
    <div class="r-post-title">New CRISPR-Based Techniques for Targeted Gene Therapy in Sickle Cell Disease</div>
    <div class="r-post-abstract">We present a refined CRISPR-Cas9 delivery mechanism that achieves 89% editing efficiency in haematopoietic stem cells with minimal off-target effects, with focus on Nigeria's sickle cell disease burden.</div>
    <div class="r-post-tags">
      <span class="r-post-tag">Biotechnology</span>
      <span class="r-post-tag">CRISPR</span>
      <span class="r-post-tag">Gene Therapy</span>
    </div>
    <div class="r-post-actions">
      <button class="r-action" onclick="event.stopPropagation(); this.classList.toggle('liked'); let s=this.querySelector('span'); s.textContent=this.classList.contains('liked')?'2.1K+':'2.1K';">
        <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
        <span>2.1K</span>
      </button>
      <button class="r-action" onclick="event.stopPropagation(); openResearchViewer(2)">
        <svg viewBox="0 0 24 24"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
        <span>178</span>
      </button>
      <button class="r-action" onclick="event.stopPropagation(); shareRPost(2)">
        <svg viewBox="0 0 24 24"><path d="M22 2L11 13"/><path d="M22 2L15 22L11 13L2 9L22 2Z"/></svg>
        <span>334</span>
      </button>
      <button class="r-action r-bookmark" onclick="event.stopPropagation(); this.classList.toggle('liked')">
        <svg viewBox="0 0 24 24"><path d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"/></svg>
      </button>
    </div>
  </div>

  <!-- Events -->
  <div class="r-section-label">Upcoming Events</div>

  <div class="r-event">
    <div class="r-event-top">
      <div class="r-event-date">
        <div class="r-event-month">FEB</div>
        <div class="r-event-day">20</div>
      </div>
      <div class="r-event-info">
        <span class="r-event-type">Workshop</span>
        <div class="r-event-title">AI in Healthcare Symposium</div>
        <div class="r-event-meta">10:00 WAT · University of Lagos, Akoka</div>
      </div>
    </div>
    <div class="r-event-snippet">Learn about AI applications in medical research. Open for inter-university participants. Keynote by Dr. Amaka Okonkwo.</div>
    <div class="r-event-rsvp">
      <button class="r-rsvp-btn active">Attending</button>
      <button class="r-rsvp-btn">Interested</button>
      <button class="r-rsvp-btn">Can't Go</button>
    </div>
  </div>

  <div class="r-event">
    <div class="r-event-top">
      <div class="r-event-date">
        <div class="r-event-month">MAR</div>
        <div class="r-event-day">5</div>
      </div>
      <div class="r-event-info">
        <span class="r-event-type">Conference</span>
        <div class="r-event-title">Quantum Computing Seminar</div>
        <div class="r-event-meta">09:00 WAT · Ahmadu Bello University, Zaria</div>
      </div>
    </div>
    <div class="r-event-snippet">Discuss breakthroughs in quantum algorithm design and simulations. Paper submissions welcome until Feb 28.</div>
    <div class="r-event-rsvp">
      <button class="r-rsvp-btn">Attending</button>
      <button class="r-rsvp-btn active">Interested</button>
      <button class="r-rsvp-btn">Can't Go</button>
    </div>
  </div>

  <!-- Trending -->
  <div class="r-section-label">Trending Topics</div>
  <div class="r-topics">
    <span class="r-topic">Artificial Intelligence</span>
    <span class="r-topic">Quantum Computing</span>
    <span class="r-topic">Biotechnology</span>
    <span class="r-topic">Machine Learning</span>
    <span class="r-topic">Campus Innovation</span>
    <span class="r-topic">Research Collaboration</span>
    <span class="r-topic">Data Science</span>
    <span class="r-topic">Climate Tech</span>
    <span class="r-topic">Robotics</span>
  </div>

</div>

<!-- Fullscreen Viewer -->
<div id="researchViewer">
  <div class="rv-header">
    <button class="rv-back" onclick="closeResearchViewer()">←</button>
    <span class="rv-back-label">Research</span>
  </div>
  <div id="rvFeed"></div>
</div>

<script>
  const rPosts = [
    {
      name: 'Israel Mark', dept: 'Computer Science · LASU', time: 'Jan 28, 2026', avatar: 'img1',
      title: 'Reinforcement Learning for Adaptive Network Routing in Low-Bandwidth Environments',
      authors: 'Israel Mark, Ada James, Tunde Adeyemi',
      abstract: 'This paper presents a novel RL-based approach to optimize network routing in constrained bandwidth scenarios common in developing regions. We demonstrate a 34% improvement in throughput over traditional routing algorithms using a custom reward function trained on real network traces from three Nigerian universities. The proposed system adapts dynamically to fluctuating bandwidth conditions and outperforms static routing strategies under high congestion scenarios.',
      tags: ['Machine Learning', 'Networking', 'RL', 'Distributed Systems'],
      likes: 892, comments: 67, shares: 145
    },
    {
      name: 'Ada James', dept: 'Physics · UNILAG', time: 'Dec 12, 2025', avatar: 'img2',
      title: 'Federated Learning on Mobile Devices: Challenges and Opportunities in Sub-Saharan Africa',
      authors: 'Ada James, Chidi Nwosu',
      abstract: 'We investigate the viability of federated learning deployments on low-spec Android devices across university campuses in Nigeria. Our experiments reveal unique challenges including intermittent connectivity and hardware heterogeneity, and propose adaptive aggregation strategies to address them. Results show a 22% communication overhead reduction compared to standard FedAvg while maintaining 96% model accuracy.',
      tags: ['Federated Learning', 'Mobile', 'Africa', 'Privacy'],
      likes: 1200, comments: 94, shares: 210
    },
    {
      name: 'Zainab Yusuf', dept: 'Biotechnology · ABU', time: 'Nov 5, 2025', avatar: 'img3',
      title: 'New CRISPR-Based Techniques for Targeted Gene Therapy in Sickle Cell Disease',
      authors: 'Zainab Yusuf, Emeka Dike, Ngozi Eze',
      abstract: 'We present a refined CRISPR-Cas9 delivery mechanism that achieves 89% editing efficiency in haematopoietic stem cells with minimal off-target effects. Clinical implications for sickle cell patients in low-resource settings are discussed with particular focus on Nigeria\'s disease burden. The technique reduces off-target edits by 61% compared to standard CRISPR protocols.',
      tags: ['Biotechnology', 'CRISPR', 'Gene Therapy', 'Medicine'],
      likes: 2100, comments: 178, shares: 334
    }
  ];

  function buildRVPost(p, i) {
    return `
      <div class="rv-post">
        <div class="rv-post-header">
          <img src="${p.avatar}" class="rv-avatar">
          <div style="flex:1;">
            <div class="rv-name">${p.name}</div>
            <div class="rv-time">${p.dept} · ${p.time}</div>
          </div>
          <button style="padding:6px 14px;background:transparent;border:1px solid #333;border-radius:4px;color:#fff;font-size:12px;cursor:pointer;transition:all 0.2s;"
            onmouseover="this.style.background='#fff';this.style.color='#000'"
            onmouseleave="this.style.background='transparent';this.style.color='#fff'">Follow</button>
        </div>
        <div class="rv-title">${p.title}</div>
        <div class="rv-authors">By ${p.authors}</div>
        <div class="rv-abstract">${p.abstract}</div>
        <div class="rv-tags">${p.tags.map(t=>`<span class="rv-tag">${t}</span>`).join('')}</div>
        <div class="rv-actions">
          <button class="rv-action-btn" onclick="this.classList.toggle('liked');let s=this.querySelector('span');let n=parseInt(s.textContent.replace(/,/g,''));s.textContent=(this.classList.contains('liked')?n+1:n-1).toLocaleString()">
            <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
            <span>${p.likes.toLocaleString()}</span>
          </button>
          <button class="rv-action-btn" onclick="document.getElementById('rv-input-${i}').focus()">
            <svg viewBox="0 0 24 24"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
            <span>${p.comments}</span>
          </button>
          <button class="rv-action-btn" onclick="shareRPost(${i})">
            <svg viewBox="0 0 24 24"><path d="M22 2L11 13"/><path d="M22 2L15 22L11 13L2 9L22 2Z"/></svg>
            <span>${p.shares}</span>
          </button>
          <button class="rv-action-btn" style="margin-left:auto" onclick="this.classList.toggle('liked')">
            <svg viewBox="0 0 24 24"><path d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"/></svg>
          </button>
        </div>
        <div class="rv-comments" id="rv-comments-${i}">
          <div class="rv-comments-label">Comments</div>
          <div class="rv-comment">
            <img src="img2" class="rv-comment-avatar">
            <div><div class="rv-comment-name">Samuel Obi</div><div class="rv-comment-text">Incredible work. What dataset did you use for training the reward function?</div><div class="rv-comment-time">2 hours ago</div></div>
          </div>
          <div class="rv-comment">
            <img src="img3" class="rv-comment-avatar">
            <div><div class="rv-comment-name">Fatima Bello</div><div class="rv-comment-text">This could be huge for rural connectivity. Are you planning a follow-up study?</div><div class="rv-comment-time">5 hours ago</div></div>
          </div>
        </div>
        <div class="rv-comment-input-wrap">
          <input type="text" class="rv-comment-input" id="rv-input-${i}" placeholder="Add a comment...">
          <button class="rv-comment-send" onclick="
            const inp=document.getElementById('rv-input-${i}');
            if(!inp.value.trim())return;
            const c=document.getElementById('rv-comments-${i}');
            const d=document.createElement('div');
            d.className='rv-comment';
            d.innerHTML='<img src=img2 class=rv-comment-avatar><div><div class=rv-comment-name>Oshifala Israel</div><div class=rv-comment-text>'+inp.value+'</div><div class=rv-comment-time>Just now</div></div>';
            c.appendChild(d);
            inp.value='';
          ">↑</button>
        </div>
      </div>
      <div style="height:6px;background:#111;"></div>
    `;
  }

  function openResearchViewer(i) {
    const v = document.getElementById('researchViewer');
    const f = document.getElementById('rvFeed');
    f.innerHTML = '';
    for (let j = i; j < rPosts.length; j++) f.innerHTML += buildRVPost(rPosts[j], j);
    v.classList.add('active');
    v.scrollTop = 0;
  }

  function closeResearchViewer() {
    document.getElementById('researchViewer').classList.remove('active');
  }

  function shareRPost(i) {
    const url = `https://trends.com/research/${i}`;
    if (navigator.share) {
      navigator.share({ title: rPosts[i].title, url });
    } else {
      navigator.clipboard.writeText(url).then(() => {
        const t = document.createElement('div');
        t.textContent = 'Link copied!';
        t.style.cssText = 'position:fixed;bottom:32px;left:50%;transform:translateX(-50%);background:#fff;color:#000;padding:10px 20px;border-radius:6px;font-size:13px;font-weight:600;z-index:999999;';
        document.body.appendChild(t);
        setTimeout(() => t.remove(), 2000);
      });
    }
  }

  document.querySelectorAll('.research-filter').forEach(btn => {
    btn.addEventListener('click', function() {
      document.querySelectorAll('.research-filter').forEach(b => b.classList.remove('active'));
      this.classList.add('active');
    });
  });

  document.querySelectorAll('.r-event-rsvp').forEach(group => {
    group.querySelectorAll('.r-rsvp-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        group.querySelectorAll('.r-rsvp-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
      });
    });
  });
</script>

</section>

  
  
<section id="Explore" class="Explore" style="display:none">
<style>
  .Explore {
    background: #080808;
    color: #fff;
    min-height: 100vh;
    width: 100%;
    position: fixed;
    top: 0; left: 0; bottom: 0; right: 0;
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    z-index: 900;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    scrollbar-width: none;
    padding-bottom: 60px;
    box-sizing: border-box;
  }
  .Explore::-webkit-scrollbar { display: none; }

  /* ── Header ── */
  .ex-header {
    position: sticky;
    top: 0;
    background: rgba(8,8,8,0.97);
    backdrop-filter: blur(12px);
    z-index: 100;
    padding: 14px 18px 0;
    border-bottom: 1px solid #141414;
  }

  .ex-header-top {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
  }

  .ex-back {
    background: transparent;
    border: none;
    color: #fff;
    font-size: 22px;
    cursor: pointer;
    padding: 0;
    line-height: 1;
    flex-shrink: 0;
  }

  .ex-search-wrap {
    flex: 1;
    position: relative;
  }

  .ex-search {
    width: 100%;
    padding: 11px 16px 11px 40px;
    background: #111;
    border: 1px solid #1e1e1e;
    border-radius: 10px;
    color: #fff;
    font-size: 14px;
    outline: none;
    box-sizing: border-box;
    transition: border-color 0.2s;
  }

  .ex-search:focus { border-color: #444; }
  .ex-search::placeholder { color: #383838; }

  .ex-search-ico {
    position: absolute;
    left: 13px;
    top: 50%;
    transform: translateY(-50%);
    color: #383838;
    pointer-events: none;
    line-height: 1;
  }

  /* ── Filter tabs ── */
  .ex-tabs {
    display: flex;
    gap: 0;
    overflow-x: auto;
    scrollbar-width: none;
  }

  .ex-tabs::-webkit-scrollbar { display: none; }

  .ex-tab {
    padding: 10px 14px;
    background: transparent;
    border: none;
    border-bottom: 2px solid transparent;
    color: #444;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.2s;
  }

  .ex-tab:hover { color: #888; }
  .ex-tab.active { color: #fff; border-bottom-color: #fff; }

  /* ── Section label ── */
  .ex-label {
    font-size: 11px;
    font-weight: 700;
    color: #333;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    padding: 20px 18px 10px;
  }

  /* ── Horizontal scroll row ── */
  .ex-row {
    display: flex;
    gap: 10px;
    overflow-x: auto;
    padding: 0 18px 18px;
    scrollbar-width: none;
  }

  .ex-row::-webkit-scrollbar { display: none; }

  /* ── Featured cards ── */
  .ex-feat {
    flex: 0 0 200px;
    background: #0f0f0f;
    border: 1px solid #1a1a1a;
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    transition: border-color 0.2s;
  }

  .ex-feat:hover { border-color: #2a2a2a; }
  .ex-feat img { width: 100%; height: 110px; object-fit: cover; display: block; background: #111; }
  .ex-feat-body { padding: 10px 12px; }
  .ex-feat-cat { font-size: 9px; font-weight: 700; color: #444; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
  .ex-feat-title { font-size: 12px; font-weight: 700; line-height: 1.4; margin-bottom: 3px; }
  .ex-feat-sub { font-size: 10px; color: #444; }

  /* ── People cards ── */
  .ex-person {
    flex: 0 0 120px;
    background: #0f0f0f;
    border: 1px solid #1a1a1a;
    border-radius: 10px;
    padding: 14px 10px;
    text-align: center;
    transition: border-color 0.2s;
  }

  .ex-person:hover { border-color: #2a2a2a; }
  .ex-person img { width: 48px; height: 48px; border-radius: 50%; object-fit: cover; border: 1px solid #222; margin: 0 auto 8px; display: block; }
  .ex-person-name { font-size: 12px; font-weight: 700; margin-bottom: 2px; }
  .ex-person-dept { font-size: 10px; color: #444; margin-bottom: 10px; line-height: 1.4; }

  .ex-follow {
    width: 100%;
    padding: 6px 0;
    background: transparent;
    border: 1px solid #1e1e1e;
    border-radius: 4px;
    color: #888;
    font-size: 11px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }

  .ex-follow:hover, .ex-follow.on { background: #fff; color: #000; border-color: #fff; }

  /* ── Lab cards ── */
  .ex-lab {
    flex: 0 0 180px;
    background: #0f0f0f;
    border: 1px solid #1a1a1a;
    border-radius: 10px;
    overflow: hidden;
    transition: border-color 0.2s;
    cursor: pointer;
  }

  .ex-lab:hover { border-color: #2a2a2a; }
  .ex-lab img { width: 100%; height: 80px; object-fit: cover; display: block; background: #111; }
  .ex-lab-body { padding: 10px 12px; }
  .ex-lab-name { font-size: 12px; font-weight: 700; margin-bottom: 2px; }
  .ex-lab-uni { font-size: 10px; color: #444; margin-bottom: 8px; }
  .ex-lab-stats { display: flex; gap: 10px; margin-bottom: 8px; }
  .ex-lab-stat { font-size: 10px; color: #444; }
  .ex-lab-stat strong { color: #fff; font-size: 12px; display: block; }

  .ex-lab-btn {
    width: 100%;
    padding: 6px 0;
    background: transparent;
    border: 1px solid #1e1e1e;
    border-radius: 4px;
    color: #888;
    font-size: 11px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }

  .ex-lab-btn:hover { border-color: #fff; color: #fff; }

  /* ── List items (papers, grants, bounties, events, polls) ── */
  .ex-item {
    margin: 0 18px 10px;
    padding: 16px;
    background: #0f0f0f;
    border: 1px solid #141414;
    border-radius: 10px;
    cursor: pointer;
    transition: border-color 0.2s;
  }

  .ex-item:hover { border-color: #222; }

  /* paper */
  .ex-paper-head { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
  .ex-avatar { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; border: 1px solid #1e1e1e; flex-shrink: 0; }
  .ex-name { font-size: 13px; font-weight: 700; }
  .ex-meta { font-size: 11px; color: #444; margin-top: 1px; }
  .ex-paper-title { font-size: 14px; font-weight: 700; line-height: 1.4; margin-bottom: 6px; }
  .ex-abstract { font-size: 12px; color: #666; line-height: 1.6; margin-bottom: 10px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
  .ex-img { width: 100%; border-radius: 6px; max-height: 200px; object-fit: cover; display: block; background: #111; margin-bottom: 10px; }

  .ex-tags { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 10px; }
  .ex-tag { padding: 3px 7px; background: #141414; border: 1px solid #1a1a1a; border-radius: 3px; font-size: 10px; font-weight: 700; color: #444; text-transform: uppercase; }

  .ex-actions { display: flex; align-items: center; gap: 2px; }
  .ex-act {
    background: transparent; border: none; color: #444; font-size: 12px; cursor: pointer;
    display: flex; align-items: center; gap: 5px; padding: 5px 10px 5px 0; transition: color 0.2s;
  }
  .ex-act:hover, .ex-act.on { color: #fff; }
  .ex-act svg { width: 16px; height: 16px; stroke: currentColor; fill: none; stroke-width: 2; }
  .ex-act.on svg { fill: #fff; stroke: #fff; }
  .ex-bm { margin-left: auto; padding-right: 0; }

  /* grant */
  .ex-grant-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 6px; gap: 10px; }
  .ex-grant-name { font-size: 14px; font-weight: 700; line-height: 1.3; }
  .ex-amount { font-size: 14px; font-weight: 800; background: #1a1a1a; padding: 3px 8px; border-radius: 4px; white-space: nowrap; flex-shrink: 0; }
  .ex-grant-org { font-size: 11px; color: #444; margin-bottom: 6px; }
  .ex-grant-desc { font-size: 12px; color: #666; line-height: 1.6; margin-bottom: 12px; }
  .ex-grant-foot { display: flex; justify-content: space-between; align-items: center; }
  .ex-deadline { font-size: 11px; color: #444; }

  .ex-apply {
    padding: 7px 16px;
    background: #fff;
    color: #000;
    border: none;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 700;
    cursor: pointer;
    transition: opacity 0.2s;
  }

  .ex-apply:hover { opacity: 0.85; }

  /* event */
  .ex-event-top { display: flex; gap: 12px; margin-bottom: 10px; }
  .ex-date-box { width: 46px; height: 46px; background: #fff; color: #000; border-radius: 6px; display: flex; flex-direction: column; align-items: center; justify-content: center; flex-shrink: 0; }
  .ex-date-mon { font-size: 8px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
  .ex-date-day { font-size: 20px; font-weight: 800; line-height: 1; }
  .ex-event-type { font-size: 10px; color: #444; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 3px; }
  .ex-event-title { font-size: 14px; font-weight: 700; margin-bottom: 2px; }
  .ex-event-loc { font-size: 11px; color: #444; }
  .ex-event-desc { font-size: 12px; color: #666; line-height: 1.6; margin-bottom: 12px; }

  .ex-rsvp { display: flex; gap: 6px; }
  .ex-rsvp-btn { flex: 1; padding: 8px 0; background: transparent; border: 1px solid #1e1e1e; border-radius: 4px; color: #666; font-size: 11px; font-weight: 600; cursor: pointer; transition: all 0.2s; text-align: center; }
  .ex-rsvp-btn:hover, .ex-rsvp-btn.on { background: #fff; color: #000; border-color: #fff; }

  /* bounty */
  .ex-bounty-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 5px; gap: 10px; }
  .ex-bounty-title { font-size: 14px; font-weight: 700; line-height: 1.3; }
  .ex-reward { font-size: 15px; font-weight: 800; white-space: nowrap; flex-shrink: 0; }
  .ex-bounty-poster { font-size: 11px; color: #444; margin-bottom: 6px; }
  .ex-bounty-desc { font-size: 12px; color: #666; line-height: 1.6; margin-bottom: 12px; }
  .ex-bounty-foot { display: flex; justify-content: space-between; align-items: center; }
  .ex-applicants { font-size: 11px; color: #444; }

  /* poll */
  .ex-poll-head { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
  .ex-poll-q { font-size: 14px; font-weight: 700; margin-bottom: 10px; line-height: 1.4; }

  .ex-poll-opt {
    padding: 10px 12px;
    border: 1px solid #1a1a1a;
    border-radius: 6px;
    margin-bottom: 6px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: border-color 0.2s;
  }

  .ex-poll-opt:hover, .ex-poll-opt.on { border-color: #333; }
  .ex-poll-bar { position: absolute; left: 0; top: 0; height: 100%; background: rgba(255,255,255,0.05); transition: width 0.4s; }
  .ex-poll-row { position: relative; z-index: 1; display: flex; justify-content: space-between; font-size: 13px; }
  .ex-poll-foot { font-size: 10px; color: #333; margin-top: 6px; }

  /* ── Search results overlay ── */
  #exResults {
    display: none;
    position: fixed;
    top: 110px; left: 0; right: 0; bottom: 0;
    background: #080808;
    z-index: 200;
    overflow-y: auto;
    padding: 12px 18px;
  }

  #exResults.active { display: block; }
  .ex-result { padding: 14px 0; border-bottom: 1px solid #111; cursor: pointer; }
  .ex-result-type { font-size: 9px; font-weight: 700; color: #444; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
  .ex-result-title { font-size: 14px; font-weight: 700; margin-bottom: 3px; }
  .ex-result-sub { font-size: 12px; color: #555; }
  .ex-no-results { text-align: center; color: #333; font-size: 14px; padding: 60px 0; }

  /* section visibility */
  .ex-section { }
  .ex-section.hidden { display: none; }
</style>


<!-- Header -->
<div class="ex-header">
  <div class="ex-header-top">
    <button class="ex-back" onclick="document.getElementById('drawer').style.display='block';">←</button>
    <div class="ex-search-wrap">
      <span class="ex-search-ico">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      </span>
      <input type="text" class="ex-search" id="exSearch" placeholder="Search papers, people, labs, grants, events...">
    </div>
  </div>
  <div class="ex-tabs">
    <button class="ex-tab active" data-s="all">All</button>
    <button class="ex-tab" data-s="papers">Papers</button>
    <button class="ex-tab" data-s="people">People</button>
    <button class="ex-tab" data-s="labs">Labs</button>
    <button class="ex-tab" data-s="grants">Grants</button>
    <button class="ex-tab" data-s="events">Events</button>
    <button class="ex-tab" data-s="bounties">Bounties</button>
    <button class="ex-tab" data-s="polls">Polls</button>
  </div>
</div>

<!-- Search results overlay -->
<div id="exResults"></div>


<!-- Featured -->
<div class="ex-section" data-s="all papers">
  <div class="ex-label">Featured</div>
  <div class="ex-row">
    <div class="ex-feat" onclick="openExViewer(0)">
      <img src="img1" alt="">
      <div class="ex-feat-body">
        <div class="ex-feat-cat">AI · Trending</div>
        <div class="ex-feat-title">RL for Network Routing in Low-Bandwidth Environments</div>
        <div class="ex-feat-sub">892 likes · LASU</div>
      </div>
    </div>
    <div class="ex-feat" onclick="openExViewer(1)">
      <img src="img2" alt="">
      <div class="ex-feat-body">
        <div class="ex-feat-cat">Federated Learning · Hot</div>
        <div class="ex-feat-title">Federated Learning on Mobile Devices in Africa</div>
        <div class="ex-feat-sub">1.2K likes · UNILAG</div>
      </div>
    </div>
    <div class="ex-feat" onclick="openExViewer(2)">
      <img src="img3" alt="">
      <div class="ex-feat-body">
        <div class="ex-feat-cat">Biotech · New</div>
        <div class="ex-feat-title">CRISPR 3.0 Gene Editing Advances</div>
        <div class="ex-feat-sub">2.4K citations · ABU</div>
      </div>
    </div>
    <div class="ex-feat">
      <img src="img1" alt="">
      <div class="ex-feat-body">
        <div class="ex-feat-cat">Climate · Urgent</div>
        <div class="ex-feat-title">Carbon Capture via Algae Networks</div>
        <div class="ex-feat-sub">Stanford Earth · 892 citations</div>
      </div>
    </div>
  </div>
</div>


<!-- Papers -->
<div class="ex-section" data-s="all papers">
  <div class="ex-label">Latest Papers</div>

  <div class="ex-item" onclick="openExViewer(0)">
    <div class="ex-paper-head">
      <img src="img1" class="ex-avatar">
      <div><div class="ex-name">Israel Mark</div><div class="ex-meta">CS · LASU · Jan 28, 2026</div></div>
    </div>
    <div class="ex-paper-title">Reinforcement Learning for Adaptive Network Routing in Low-Bandwidth Environments</div>
    <div class="ex-abstract">A novel RL-based approach to optimize network routing in constrained bandwidth scenarios common in developing regions. 34% improvement in throughput.</div>
    <img src="img2" class="ex-img">
    <div class="ex-tags"><span class="ex-tag">Machine Learning</span><span class="ex-tag">Networking</span><span class="ex-tag">RL</span></div>
    <div class="ex-actions">
      <button class="ex-act" onclick="event.stopPropagation();this.classList.toggle('on');this.querySelector('span').textContent=this.classList.contains('on')?893:892">
        <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg><span>892</span>
      </button>
      <button class="ex-act" onclick="event.stopPropagation();openExViewer(0)">
        <svg viewBox="0 0 24 24"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg><span>67</span>
      </button>
      <button class="ex-act" onclick="event.stopPropagation()">
        <svg viewBox="0 0 24 24"><path d="M22 2L11 13"/><path d="M22 2L15 22L11 13L2 9L22 2Z"/></svg><span>145</span>
      </button>
      <button class="ex-act ex-bm" onclick="event.stopPropagation();this.classList.toggle('on')">
        <svg viewBox="0 0 24 24"><path d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"/></svg>
      </button>
    </div>
  </div>

  <div class="ex-item" onclick="openExViewer(1)">
    <div class="ex-paper-head">
      <img src="img2" class="ex-avatar">
      <div><div class="ex-name">Ada James</div><div class="ex-meta">Physics · UNILAG · Dec 12, 2025</div></div>
    </div>
    <div class="ex-paper-title">Federated Learning on Mobile Devices: Challenges in Sub-Saharan Africa</div>
    <div class="ex-abstract">Viability of federated learning on low-spec Android devices across Nigerian campuses. 22% communication overhead reduction, 96% model accuracy.</div>
    <video controls class="ex-img" onclick="event.stopPropagation()" style="max-height:180px;background:#0a0a0a;">
      <source src="" type="video/mp4">
    </video>
    <div class="ex-tags"><span class="ex-tag">Federated Learning</span><span class="ex-tag">Mobile</span><span class="ex-tag">Africa</span></div>
    <div class="ex-actions">
      <button class="ex-act" onclick="event.stopPropagation();this.classList.toggle('on');this.querySelector('span').textContent=this.classList.contains('on')?'1.2K+':'1.2K'">
        <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg><span>1.2K</span>
      </button>
      <button class="ex-act" onclick="event.stopPropagation();openExViewer(1)">
        <svg viewBox="0 0 24 24"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg><span>94</span>
      </button>
      <button class="ex-act" onclick="event.stopPropagation()">
        <svg viewBox="0 0 24 24"><path d="M22 2L11 13"/><path d="M22 2L15 22L11 13L2 9L22 2Z"/></svg><span>210</span>
      </button>
      <button class="ex-act ex-bm" onclick="event.stopPropagation();this.classList.toggle('on')">
        <svg viewBox="0 0 24 24"><path d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"/></svg>
      </button>
    </div>
  </div>
</div>


<!-- People -->
<div class="ex-section" data-s="all people">
  <div class="ex-label">People to Explore</div>
  <div class="ex-row">
    <div class="ex-person">
      <img src="img1" alt=""><div class="ex-person-name">Israel Mark</div><div class="ex-person-dept">CS · LASU</div>
      <button class="ex-follow" onclick="this.classList.toggle('on');this.textContent=this.classList.contains('on')?'Following':'Follow'">Follow</button>
    </div>
    <div class="ex-person">
      <img src="img2" alt=""><div class="ex-person-name">Ada James</div><div class="ex-person-dept">EE · UNILAG</div>
      <button class="ex-follow" onclick="this.classList.toggle('on');this.textContent=this.classList.contains('on')?'Following':'Follow'">Follow</button>
    </div>
    <div class="ex-person">
      <img src="img3" alt=""><div class="ex-person-name">Zainab Yusuf</div><div class="ex-person-dept">Biotech · ABU</div>
      <button class="ex-follow" onclick="this.classList.toggle('on');this.textContent=this.classList.contains('on')?'Following':'Follow'">Follow</button>
    </div>
    <div class="ex-person">
      <img src="img1" alt=""><div class="ex-person-name">Chidi Nwosu</div><div class="ex-person-dept">Physics · FUTO</div>
      <button class="ex-follow" onclick="this.classList.toggle('on');this.textContent=this.classList.contains('on')?'Following':'Follow'">Follow</button>
    </div>
    <div class="ex-person">
      <img src="img2" alt=""><div class="ex-person-name">Fatima Bello</div><div class="ex-person-dept">CS · ABU</div>
      <button class="ex-follow" onclick="this.classList.toggle('on');this.textContent=this.classList.contains('on')?'Following':'Follow'">Follow</button>
    </div>
  </div>
</div>


<!-- Labs -->
<div class="ex-section" data-s="all labs">
  <div class="ex-label">Research Labs</div>
  <div class="ex-row">
    <div class="ex-lab">
      <img src="img3" alt="">
      <div class="ex-lab-body">
        <div class="ex-lab-name">LASU AI Research Lab</div>
        <div class="ex-lab-uni">Lagos State University</div>
        <div class="ex-lab-stats"><div class="ex-lab-stat"><strong>42</strong>Members</div><div class="ex-lab-stat"><strong>18</strong>Papers</div></div>
        <button class="ex-lab-btn">Follow Lab</button>
      </div>
    </div>
    <div class="ex-lab">
      <img src="img1" alt="">
      <div class="ex-lab-body">
        <div class="ex-lab-name">UNILAG Quantum Lab</div>
        <div class="ex-lab-uni">Univ. of Lagos</div>
        <div class="ex-lab-stats"><div class="ex-lab-stat"><strong>28</strong>Members</div><div class="ex-lab-stat"><strong>11</strong>Papers</div></div>
        <button class="ex-lab-btn">Follow Lab</button>
      </div>
    </div>
    <div class="ex-lab">
      <img src="img2" alt="">
      <div class="ex-lab-body">
        <div class="ex-lab-name">ABU Biotech Centre</div>
        <div class="ex-lab-uni">Ahmadu Bello Univ.</div>
        <div class="ex-lab-stats"><div class="ex-lab-stat"><strong>61</strong>Members</div><div class="ex-lab-stat"><strong>34</strong>Papers</div></div>
        <button class="ex-lab-btn">Follow Lab</button>
      </div>
    </div>
    <div class="ex-lab">
      <img src="img3" alt="">
      <div class="ex-lab-body">
        <div class="ex-lab-name">OAU Data Science Lab</div>
        <div class="ex-lab-uni">Obafemi Awolowo Univ.</div>
        <div class="ex-lab-stats"><div class="ex-lab-stat"><strong>35</strong>Members</div><div class="ex-lab-stat"><strong>22</strong>Papers</div></div>
        <button class="ex-lab-btn">Follow Lab</button>
      </div>
    </div>
  </div>
</div>


<!-- Grants -->
<div class="ex-section" data-s="all grants">
  <div class="ex-label">Grants & Funding</div>

  <div class="ex-item">
    <div class="ex-grant-top"><div class="ex-grant-name">Federal Research Grant 2026</div><div class="ex-amount">₦5M</div></div>
    <div class="ex-grant-org">National Research Foundation of Nigeria</div>
    <div class="ex-grant-desc">Open to final year and postgraduate students across all Nigerian universities. Focus: AI, Climate Tech, Biotech, Engineering.</div>
    <div class="ex-grant-foot"><div class="ex-deadline">⏰ Deadline: Apr 15, 2026</div><button class="ex-apply" onclick="event.stopPropagation()">Apply Now</button></div>
  </div>

  <div class="ex-item">
    <div class="ex-grant-top"><div class="ex-grant-name">$2M Climate AI Innovation Fund</div><div class="ex-amount">$2M</div></div>
    <div class="ex-grant-org">African Climate Foundation</div>
    <div class="ex-grant-desc">For research teams developing AI-powered climate solutions. Joint applications from multiple universities encouraged.</div>
    <div class="ex-grant-foot"><div class="ex-deadline">⏰ Deadline: Mar 30, 2026</div><button class="ex-apply" onclick="event.stopPropagation()">Apply Now</button></div>
  </div>

  <div class="ex-item">
    <div class="ex-grant-top"><div class="ex-grant-name">TETFund Research Grant</div><div class="ex-amount">₦2.5M</div></div>
    <div class="ex-grant-org">Tertiary Education Trust Fund</div>
    <div class="ex-grant-desc">Annual research grant for Nigerian university lecturers and student researchers in STEM fields.</div>
    <div class="ex-grant-foot"><div class="ex-deadline">⏰ Deadline: May 1, 2026</div><button class="ex-apply" onclick="event.stopPropagation()">Apply Now</button></div>
  </div>
</div>


<!-- Events -->
<div class="ex-section" data-s="all events">
  <div class="ex-label">Upcoming Events</div>

  <div class="ex-item">
    <div class="ex-event-top">
      <div class="ex-date-box"><div class="ex-date-mon">FEB</div><div class="ex-date-day">20</div></div>
      <div><div class="ex-event-type">Workshop</div><div class="ex-event-title">AI in Healthcare Symposium</div><div class="ex-event-loc">10:00 WAT · UNILAG, Akoka</div></div>
    </div>
    <div class="ex-event-desc">Learn about AI applications in medical research. Open for inter-university participants. Keynote by Dr. Amaka Okonkwo.</div>
    <div class="ex-rsvp">
      <button class="ex-rsvp-btn on">Attending</button>
      <button class="ex-rsvp-btn">Interested</button>
      <button class="ex-rsvp-btn">Can't Go</button>
    </div>
  </div>

  <div class="ex-item">
    <div class="ex-event-top">
      <div class="ex-date-box"><div class="ex-date-mon">MAR</div><div class="ex-date-day">5</div></div>
      <div><div class="ex-event-type">Conference</div><div class="ex-event-title">Quantum Computing Seminar</div><div class="ex-event-loc">09:00 WAT · ABU, Zaria</div></div>
    </div>
    <div class="ex-event-desc">Discuss breakthroughs in quantum algorithm design. Paper submissions welcome until Feb 28.</div>
    <div class="ex-rsvp">
      <button class="ex-rsvp-btn">Attending</button>
      <button class="ex-rsvp-btn on">Interested</button>
      <button class="ex-rsvp-btn">Can't Go</button>
    </div>
  </div>

  <div class="ex-item">
    <div class="ex-event-top">
      <div class="ex-date-box"><div class="ex-date-mon">MAR</div><div class="ex-date-day">18</div></div>
      <div><div class="ex-event-type">Hackathon</div><div class="ex-event-title">Campus Innovation Hackathon</div><div class="ex-event-loc">All day · OAU, Ile-Ife</div></div>
    </div>
    <div class="ex-event-desc">48-hour hackathon open to all students. Build solutions for campus challenges. ₦500K in prizes.</div>
    <div class="ex-rsvp">
      <button class="ex-rsvp-btn">Attending</button>
      <button class="ex-rsvp-btn">Interested</button>
      <button class="ex-rsvp-btn">Can't Go</button>
    </div>
  </div>
</div>


<!-- Bounties -->
<div class="ex-section" data-s="all bounties">
  <div class="ex-label">Open Bounties</div>

  <div class="ex-item">
    <div class="ex-bounty-top"><div class="ex-bounty-title">NLP Sentiment Analysis on Nigerian Social Media Dataset</div><div class="ex-reward">₦25K</div></div>
    <div class="ex-bounty-poster">Posted by Israel Mark · CS · LASU</div>
    <div class="ex-bounty-desc">Train a sentiment analysis model on a custom Nigerian social media dataset. Must know NLP and Hugging Face.</div>
    <div class="ex-bounty-foot"><div class="ex-applicants">12 applicants</div><button class="ex-apply" onclick="event.stopPropagation()">Apply</button></div>
  </div>

  <div class="ex-item">
    <div class="ex-bounty-top"><div class="ex-bounty-title">React Dashboard for Lab Data Visualization</div><div class="ex-reward">₦40K</div></div>
    <div class="ex-bounty-poster">Posted by UNILAG Quantum Lab</div>
    <div class="ex-bounty-desc">Responsive dashboard to visualize quantum experiment results using React and Chart.js or D3.js.</div>
    <div class="ex-bounty-foot"><div class="ex-applicants">7 applicants</div><button class="ex-apply" onclick="event.stopPropagation()">Apply</button></div>
  </div>

  <div class="ex-item">
    <div class="ex-bounty-top"><div class="ex-bounty-title">Proofread Research Paper — Gene Therapy</div><div class="ex-reward">₦8K</div></div>
    <div class="ex-bounty-poster">Posted by Zainab Yusuf · Biotech · ABU</div>
    <div class="ex-bounty-desc">Edit a 14-page paper on CRISPR gene therapy. Background in biology preferred.</div>
    <div class="ex-bounty-foot"><div class="ex-applicants">3 applicants</div><button class="ex-apply" onclick="event.stopPropagation()">Apply</button></div>
  </div>
</div>


<!-- Polls -->
<div class="ex-section" data-s="all polls">
  <div class="ex-label">Active Polls</div>

  <div class="ex-item">
    <div class="ex-poll-head">
      <img src="img1" class="ex-avatar">
      <div><div class="ex-name">Israel Mark</div><div class="ex-meta">2 days left · 1,204 votes</div></div>
    </div>
    <div class="ex-poll-q">Which AI framework do you prefer for research?</div>
    <div class="ex-poll-opt" onclick="exPickPoll(this)"><div class="ex-poll-bar" style="width:62%"></div><div class="ex-poll-row"><span>PyTorch</span><span>62%</span></div></div>
    <div class="ex-poll-opt" onclick="exPickPoll(this)"><div class="ex-poll-bar" style="width:31%"></div><div class="ex-poll-row"><span>TensorFlow</span><span>31%</span></div></div>
    <div class="ex-poll-opt" onclick="exPickPoll(this)"><div class="ex-poll-bar" style="width:7%"></div><div class="ex-poll-row"><span>JAX</span><span>7%</span></div></div>
  </div>

  <div class="ex-item">
    <div class="ex-poll-head">
      <img src="img2" class="ex-avatar">
      <div><div class="ex-name">Ada James</div><div class="ex-meta">4 days left · 876 votes</div></div>
    </div>
    <div class="ex-poll-q">Biggest challenge for student researchers in Nigeria?</div>
    <div class="ex-poll-opt" onclick="exPickPoll(this)"><div class="ex-poll-bar" style="width:48%"></div><div class="ex-poll-row"><span>Funding</span><span>48%</span></div></div>
    <div class="ex-poll-opt" onclick="exPickPoll(this)"><div class="ex-poll-bar" style="width:28%"></div><div class="ex-poll-row"><span>Equipment</span><span>28%</span></div></div>
    <div class="ex-poll-opt" onclick="exPickPoll(this)"><div class="ex-poll-bar" style="width:24%"></div><div class="ex-poll-row"><span>Mentorship</span><span>24%</span></div></div>
  </div>
</div>


<!-- Fullscreen Viewer -->
<div id="exViewer" style="display:none;position:fixed;inset:0;background:#000;z-index:99999;overflow-y:auto;flex-direction:column;">
  <div style="position:sticky;top:0;background:#000;border-bottom:1px solid #1a1a1a;padding:16px 18px;display:flex;align-items:center;gap:12px;z-index:10;">
    <button onclick="document.getElementById('exViewer').style.display='none'" style="background:transparent;border:none;color:#fff;font-size:22px;cursor:pointer;padding:0;">←</button>
    <span style="font-size:15px;font-weight:700;">Post</span>
  </div>
  <div id="exViewerFeed"></div>
</div>


<script>
  const exData = [
    { name:'Israel Mark', dept:'CS · LASU', time:'Jan 28, 2026', avatar:'img1', title:'Reinforcement Learning for Adaptive Network Routing in Low-Bandwidth Environments', authors:'Israel Mark, Ada James, Tunde Adeyemi', body:'This paper presents a novel RL-based approach to optimize network routing in constrained bandwidth scenarios common in developing regions. We demonstrate a 34% improvement in throughput over traditional routing algorithms using a custom reward function trained on real network traces from three Nigerian universities.', media:{type:'image',src:'img2'}, likes:892, comments:67, shares:145 },
    { name:'Ada James', dept:'Physics · UNILAG', time:'Dec 12, 2025', avatar:'img2', title:'Federated Learning on Mobile Devices: Challenges in Sub-Saharan Africa', authors:'Ada James, Chidi Nwosu', body:'We investigate the viability of federated learning deployments on low-spec Android devices across university campuses in Nigeria. Results show a 22% communication overhead reduction compared to standard FedAvg while maintaining 96% model accuracy.', media:{type:'video',src:''}, likes:1200, comments:94, shares:210 },
    { name:'Zainab Yusuf', dept:'Biotech · ABU', time:'Nov 5, 2025', avatar:'img3', title:'CRISPR 3.0 Gene Editing Advances', authors:'MIT Neuro Lab', body:'Advances in brain-computer interface technology showing 94% signal accuracy using non-invasive EEG combined with deep learning classifiers trained on 10,000+ hours of neural data.', media:{type:'image',src:'img3'}, likes:2400, comments:178, shares:334 }
  ];

  // search index
  const exIndex = [
    ...exData.map((p,i) => ({ type:'Paper', title:p.title, sub:`${p.name} · ${p.dept}`, action:()=>openExViewer(i) })),
    {type:'Person',title:'Israel Mark',sub:'CS · LASU',action:()=>{}},
    {type:'Person',title:'Ada James',sub:'EE · UNILAG',action:()=>{}},
    {type:'Person',title:'Zainab Yusuf',sub:'Biotech · ABU',action:()=>{}},
    {type:'Lab',title:'LASU AI Research Lab',sub:'Lagos State University · 42 members',action:()=>{}},
    {type:'Lab',title:'UNILAG Quantum Lab',sub:'Univ. of Lagos · 28 members',action:()=>{}},
    {type:'Grant',title:'Federal Research Grant 2026',sub:'₦5M · Deadline Apr 15, 2026',action:()=>{}},
    {type:'Grant',title:'$2M Climate AI Innovation Fund',sub:'African Climate Foundation · Mar 30',action:()=>{}},
    {type:'Event',title:'AI in Healthcare Symposium',sub:'Feb 20 · UNILAG, Akoka',action:()=>{}},
    {type:'Event',title:'Campus Innovation Hackathon',sub:'Mar 18 · OAU · ₦500K prize',action:()=>{}},
    {type:'Bounty',title:'NLP Sentiment Analysis on Nigerian Dataset',sub:'₦25K · Israel Mark',action:()=>{}},
    {type:'Bounty',title:'React Dashboard for Lab Data',sub:'₦40K · UNILAG Quantum Lab',action:()=>{}},
    {type:'Poll',title:'Which AI framework for research?',sub:'1,204 votes · 2 days left',action:()=>{}},
    {type:'Poll',title:'Biggest challenge for student researchers?',sub:'876 votes · 4 days left',action:()=>{}}
  ];

  const exSearchEl = document.getElementById('exSearch');
  const exResultsEl = document.getElementById('exResults');

  exSearchEl.addEventListener('input', function() {
    const q = this.value.trim().toLowerCase();
    if (!q) { exResultsEl.style.display='none'; exResultsEl.innerHTML=''; return; }
    const hits = exIndex.filter(item => item.title.toLowerCase().includes(q) || item.sub.toLowerCase().includes(q));
    if (!hits.length) {
      exResultsEl.innerHTML = '<div class="ex-no-results">No results for "'+this.value+'"</div>';
    } else {
      exResultsEl.innerHTML = hits.map((h,i) => `
        <div class="ex-result" onclick="exIndex[${exIndex.indexOf(h)}].action()">
          <div class="ex-result-type">${h.type}</div>
          <div class="ex-result-title">${h.title}</div>
          <div class="ex-result-sub">${h.sub}</div>
        </div>
      `).join('');
    }
    exResultsEl.style.display = 'block';
  });

  exSearchEl.addEventListener('focus', function() {
    if (this.value.trim()) exResultsEl.style.display = 'block';
  });

  document.addEventListener('click', function(e) {
    if (!e.target.closest('.ex-search-wrap') && !e.target.closest('#exResults')) {
      exResultsEl.style.display = 'none';
    }
  });

  // Filter tabs
  document.querySelectorAll('.ex-tab').forEach(tab => {
    tab.addEventListener('click', function() {
      document.querySelectorAll('.ex-tab').forEach(t => t.classList.remove('active'));
      this.classList.add('active');
      const s = this.dataset.s;
      document.querySelectorAll('.ex-section').forEach(sec => {
        sec.style.display = (s === 'all' || sec.dataset.s.includes(s)) ? '' : 'none';
      });
    });
  });

  // RSVP
  document.querySelectorAll('.ex-rsvp').forEach(group => {
    group.querySelectorAll('.ex-rsvp-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        group.querySelectorAll('.ex-rsvp-btn').forEach(b => b.classList.remove('on'));
        this.classList.add('on');
      });
    });
  });

  // Poll
  function exPickPoll(el) {
    const parent = el.closest('.ex-item');
    parent.querySelectorAll('.ex-poll-opt').forEach(o => o.classList.remove('on'));
    el.classList.add('on');
  }

  // Viewer
  function openExViewer(i) {
    const v = document.getElementById('exViewer');
    const f = document.getElementById('exViewerFeed');
    f.innerHTML = exData.slice(i).map((p, j) => {
      const idx = i + j;
      const media = p.media?.type === 'image'
        ? `<img src="${p.media.src}" style="width:100%;max-height:400px;object-fit:contain;background:#050505;display:block;">`
        : p.media?.type === 'video'
        ? `<video controls style="width:100%;max-height:400px;background:#050505;display:block;"><source src="${p.media.src}" type="video/mp4"></video>`
        : '';
      return `
        <div style="border-bottom:8px solid #080808;padding-bottom:16px;">
          <div style="display:flex;align-items:center;gap:10px;padding:16px 18px;">
            <img src="${p.avatar}" style="width:38px;height:38px;border-radius:50%;object-fit:cover;border:1px solid #1e1e1e;">
            <div style="flex:1;"><div style="font-size:14px;font-weight:700;">${p.name}</div><div style="font-size:11px;color:#444;">${p.dept} · ${p.time}</div></div>
            <button style="padding:5px 12px;background:transparent;border:1px solid #222;border-radius:4px;color:#777;font-size:11px;font-weight:600;cursor:pointer;">Follow</button>
          </div>
          ${media}
          <div style="padding:14px 18px 6px;font-size:18px;font-weight:700;letter-spacing:-0.3px;line-height:1.3;">${p.title}</div>
          <div style="padding:0 18px 12px;font-size:11px;color:#444;">By ${p.authors}</div>
          <div style="padding:0 18px 14px;font-size:14px;line-height:1.7;color:#bbb;border-top:1px solid #111;padding-top:14px;">${p.body}</div>
          <div style="display:flex;gap:4px;padding:10px 18px;border-top:1px solid #111;">
            <button onclick="this.style.color=this.style.color==='#fff'?'#444':'#fff'" style="background:transparent;border:none;color:#444;font-size:12px;cursor:pointer;display:flex;align-items:center;gap:5px;padding:5px 10px 5px 0;transition:color 0.2s;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
              ${p.likes.toLocaleString()}
            </button>
            <button onclick="document.getElementById('exci-${idx}').focus()" style="background:transparent;border:none;color:#444;font-size:12px;cursor:pointer;display:flex;align-items:center;gap:5px;padding:5px 10px 5px 0;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
              ${p.comments}
            </button>
          </div>
          <div id="excc-${idx}" style="padding:12px 18px 0;">
            <div style="font-size:10px;font-weight:700;color:#333;text-transform:uppercase;letter-spacing:1.5px;margin-bottom:12px;">Comments</div>
            <div style="display:flex;gap:10px;margin-bottom:12px;">
              <img src="img3" style="width:28px;height:28px;border-radius:50%;object-fit:cover;flex-shrink:0;">
              <div><div style="font-size:13px;font-weight:700;margin-bottom:2px;">Samuel Obi</div><div style="font-size:13px;color:#aaa;">Incredible work. What dataset?</div><div style="font-size:10px;color:#333;margin-top:3px;">2h ago</div></div>
            </div>
          </div>
          <div style="display:flex;gap:10px;padding:12px 18px;border-top:1px solid #111;position:sticky;bottom:0;background:#000;">
            <input id="exci-${idx}" type="text" placeholder="Add a comment..." style="flex:1;min-width:0;background:#111;border:1px solid #222;border-radius:20px;padding:9px 14px;color:#fff;font-size:13px;outline:none;">
            <button onclick="(function(){const i=document.getElementById('exci-${idx}');if(!i.value.trim())return;const c=document.getElementById('excc-${idx}');const d=document.createElement('div');d.style='display:flex;gap:10px;margin-bottom:12px;';d.innerHTML='<img src=img2 style=\"width:28px;height:28px;border-radius:50%;object-fit:cover;\"><div><div style=\"font-size:13px;font-weight:700;margin-bottom:2px;\">You</div><div style=\"font-size:13px;color:#aaa;\">'+i.value+'</div></div>';c.appendChild(d);i.value=''})()" style="background:#fff;color:#000;border:none;border-radius:50%;width:36px;height:36px;font-size:15px;cursor:pointer;flex-shrink:0;display:flex;align-items:center;justify-content:center;">↑</button>
          </div>
        </div>`;
    }).join('');
    v.style.display = 'flex';
    v.scrollTop = 0;
  }
</script>

</section>


<section id="Finance" class="Finance" style="display:none">
<style>
.Finance{background:#080808;color:#fff;min-height:100vh;width:100%;position:fixed;top:0;left:0;bottom:0;right:0;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;z-index:900;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;scrollbar-width:none;}
.Finance::-webkit-scrollbar{display:none;}

/* HEADER */
.fin-header{position:sticky;top:0;background:rgba(8,8,8,0.97);backdrop-filter:blur(10px);border-bottom:1px solid #1a1a1a;padding:14px 18px 0;z-index:100;}
.fin-header-top{display:flex;align-items:center;gap:10px;margin-bottom:12px;}
.fin-back{background:transparent;border:none;color:#fff;font-size:22px;cursor:pointer;padding:0;line-height:1;flex-shrink:0;}
.fin-title{flex:1;font-size:20px;font-weight:800;letter-spacing:-0.5px;background:linear-gradient(135deg,#fff 60%,#888);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.fin-search-wrap{position:relative;width:130px;}
.fin-search{width:100%;padding:8px 12px;background:#111;border:1px solid #222;border-radius:18px;color:#fff;font-size:12px;outline:none;box-sizing:border-box;transition:all 0.2s;}
.fin-search:focus{border-color:#444;width:160px;}
.fin-search::placeholder{color:#444;}

/* TABS */
.fin-tabs{display:flex;gap:0;overflow-x:auto;scrollbar-width:none;border-bottom:1px solid #111;margin:0 -18px;padding:0 18px;}
.fin-tabs::-webkit-scrollbar{display:none;}
.fin-tab{flex-shrink:0;padding:10px 16px;background:transparent;border:none;border-bottom:2px solid transparent;color:#444;font-size:13px;font-weight:600;cursor:pointer;transition:all 0.2s;white-space:nowrap;}
.fin-tab.active{color:#fff;border-bottom-color:#fff;}

/* LABEL */
.fin-label{font-size:11px;font-weight:700;color:#333;text-transform:uppercase;letter-spacing:1.5px;padding:22px 18px 10px;}

/* BALANCE CARD */
.fin-balance{margin:8px 18px 18px;background:linear-gradient(135deg,#1a1a1a 0%,#0f0f0f 100%);border:1px solid #222;border-radius:16px;padding:20px;position:relative;overflow:hidden;}
.fin-balance::before{content:'';position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,0.03) 0%,transparent 70%);pointer-events:none;}
.fin-balance-label{font-size:11px;color:#444;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;}
.fin-balance-amount{font-size:32px;font-weight:800;letter-spacing:-1px;margin-bottom:4px;font-variant-numeric:tabular-nums;}
.fin-balance-change{font-size:13px;color:#22c55e;font-weight:600;}
.fin-balance-change.neg{color:#ef4444;}
.fin-balance-actions{display:flex;gap:8px;margin-top:16px;}
.fin-balance-btn{flex:1;padding:11px;background:#fff;color:#000;border:none;border-radius:8px;font-size:13px;font-weight:700;cursor:pointer;transition:opacity 0.2s;}
.fin-balance-btn:hover{opacity:0.9;}
.fin-balance-btn.secondary{background:#1a1a1a;color:#fff;border:1px solid #2a2a2a;}
.fin-balance-btn.secondary:hover{border-color:#fff;}

/* MARKETPLACE GRID */
.fin-market{padding:0 18px 18px;}
.fin-market-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:10px;}
.fin-product{background:#0f0f0f;border:1px solid #1a1a1a;border-radius:12px;overflow:hidden;cursor:pointer;transition:all 0.2s;}
.fin-product:active{opacity:0.8;}
.fin-product-img{width:100%;height:110px;object-fit:cover;background:#111;display:block;}
.fin-product-body{padding:10px;}
.fin-product-name{font-size:13px;font-weight:700;margin-bottom:4px;line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}
.fin-product-seller{font-size:10px;color:#444;margin-bottom:6px;}
.fin-product-price{font-size:15px;font-weight:800;color:#fff;}

/* NEWS TICKER */
.fin-ticker{display:flex;gap:20px;overflow-x:auto;padding:12px 18px;background:#0d0d0d;border-top:1px solid #111;border-bottom:1px solid #111;scrollbar-width:none;margin-bottom:4px;}
.fin-ticker::-webkit-scrollbar{display:none;}
.fin-ticker-item{flex:0 0 auto;display:flex;flex-direction:column;gap:2px;}
.fin-ticker-symbol{font-size:10px;color:#444;font-weight:700;text-transform:uppercase;}
.fin-ticker-price{font-size:14px;font-weight:800;font-variant-numeric:tabular-nums;}
.fin-ticker-change{font-size:11px;font-weight:600;}
.fin-ticker-change.pos{color:#22c55e;}
.fin-ticker-change.neg{color:#ef4444;}

/* NEWS CARDS */
.fin-news{padding:0 18px 18px;}
.fin-news-card{background:#0f0f0f;border:1px solid#1a1a1a;border-radius:12px;padding:16px;margin-bottom:10px;cursor:pointer;transition:border 0.2s;}
.fin-news-card:hover{border-color:#2a2a2a;}
.fin-news-eyebrow{font-size:10px;font-weight:700;color:#444;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;display:flex;align-items:center;gap:6px;}
.fin-news-live{width:6px;height:6px;background:#22c55e;border-radius:50%;animation:fpulse 2s infinite;}
@keyframes fpulse{0%,100%{opacity:1}50%{opacity:0.3}}
.fin-news-title{font-size:15px;font-weight:800;margin-bottom:8px;line-height:1.4;letter-spacing:-0.3px;}
.fin-news-excerpt{font-size:13px;color:#666;line-height:1.6;margin-bottom:10px;}
.fin-news-meta{display:flex;gap:12px;font-size:11px;color:#333;}

/* BOUNTY CARDS */
.fin-bounties{padding:0 18px 18px;}
.fin-bounty{background:#0f0f0f;border:1px solid#1a1a1a;border-radius:12px;padding:16px;margin-bottom:10px;}
.fin-bounty-amount{font-size:24px;font-weight:800;color:#22c55e;margin-bottom:10px;letter-spacing:-0.5px;}
.fin-bounty-title{font-size:14px;font-weight:700;margin-bottom:6px;line-height:1.4;}
.fin-bounty-desc{font-size:12px;color:#555;line-height:1.5;margin-bottom:12px;}
.fin-bounty-meta{display:flex;justify-content:space-between;align-items:center;font-size:11px;color:#333;margin-bottom:12px;}
.fin-bounty-btn{width:100%;padding:11px;background:#fff;color:#000;border:none;border-radius:8px;font-size:13px;font-weight:700;cursor:pointer;transition:opacity 0.2s;}
.fin-bounty-btn:hover{opacity:0.9;}

/* EARNINGS OVERVIEW */
.fin-earnings{padding:0 18px;}
.fin-stat-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:18px;}
.fin-stat{background:#0f0f0f;border:1px solid#1a1a1a;border-radius:12px;padding:16px;text-align:center;}
.fin-stat-value{font-size:28px;font-weight:800;margin-bottom:4px;letter-spacing:-0.5px;font-variant-numeric:tabular-nums;}
.fin-stat-label{font-size:11px;color:#444;font-weight:700;text-transform:uppercase;letter-spacing:1px;}
.fin-activity{background:#0f0f0f;border:1px solid#1a1a1a;border-radius:12px;margin-bottom:10px;}
.fin-activity-item{display:flex;align-items:center;gap:12px;padding:14px 16px;border-bottom:1px solid#111;}
.fin-activity-item:last-child{border-bottom:none;}
.fin-activity-icon{width:38px;height:38px;background:#141414;border:1px solid#1e1e1e;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;}
.fin-activity-info{flex:1;}
.fin-activity-title{font-size:13px;font-weight:700;margin-bottom:2px;}
.fin-activity-sub{font-size:11px;color:#444;}
.fin-activity-amount{font-size:14px;font-weight:800;color:#22c55e;flex-shrink:0;}

/* WALLET */
.fin-wallet{padding:0 18px;}
.fin-wallet-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;}
.fin-wallet-balance{font-size:36px;font-weight:800;letter-spacing:-1px;font-variant-numeric:tabular-nums;}
.fin-wallet-btn{padding:10px 20px;background:#fff;color:#000;border:none;border-radius:8px;font-size:13px;font-weight:700;cursor:pointer;transition:opacity 0.2s;}
.fin-wallet-btn:hover{opacity:0.9;}
.fin-wallet-methods{display:flex;flex-direction:column;gap:10px;margin-bottom:18px;}
.fin-method{background:#0f0f0f;border:1px solid#1a1a1a;border-radius:12px;padding:16px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:border 0.2s;}
.fin-method:hover{border-color:#2a2a2a;}
.fin-method-icon{width:42px;height:42px;background:#141414;border:1px solid#1e1e1e;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0;}
.fin-method-info{flex:1;}
.fin-method-name{font-size:13px;font-weight:700;margin-bottom:2px;}
.fin-method-sub{font-size:11px;color:#444;}
.fin-method-arrow{color:#222;font-size:18px;}

/* SECTION */
.fin-section{display:none;}
.fin-section.active{display:block;}
</style>

<!-- HEADER -->
<div class="fin-header">
  <div class="fin-header-top">
    <button class="fin-back" onclick="document.getElementById('drawer').style.display='block';">←</button>
    <div class="fin-title">Finance</div>
    <div class="fin-search-wrap">
      <input class="fin-search" type="text" placeholder="Search...">
    </div>
  </div>
  <div class="fin-tabs">
    <button class="fin-tab active" onclick="finTab('overview',this)">Overview</button>
    <button class="fin-tab" onclick="finTab('marketplace',this)">Marketplace</button>
    <button class="fin-tab" onclick="finTab('news',this)">Markets</button>
    <button class="fin-tab" onclick="finTab('bounties',this)">Bounties</button>
    <button class="fin-tab" onclick="finTab('earnings',this)">Earnings</button>
    <button class="fin-tab" onclick="finTab('wallet',this)">Wallet</button>
  </div>
</div>

<!-- OVERVIEW -->
<div class="fin-section active" id="fin-overview">
  <div class="fin-balance">
    <div class="fin-balance-label">Total Balance</div>
    <div class="fin-balance-amount">₦48,240</div>
    <div class="fin-balance-change">+₦1,820 this month</div>
    <div class="fin-balance-actions">
      <button class="fin-balance-btn">Withdraw</button>
      <button class="fin-balance-btn secondary">Add Funds</button>
    </div>
  </div>

  <div class="fin-label">Quick Stats</div>
  <div class="fin-earnings">
    <div class="fin-stat-grid">
      <div class="fin-stat">
        <div class="fin-stat-value">12</div>
        <div class="fin-stat-label">Completed</div>
      </div>
      <div class="fin-stat">
        <div class="fin-stat-value">₦3,200</div>
        <div class="fin-stat-label">Pending</div>
      </div>
      <div class="fin-stat">
        <div class="fin-stat-value">4.9</div>
        <div class="fin-stat-label">Rating</div>
      </div>
      <div class="fin-stat">
        <div class="fin-stat-value">98%</div>
        <div class="fin-stat-label">Success Rate</div>
      </div>
    </div>
  </div>

  <div class="fin-label">Recent Activity</div>
  <div class="fin-earnings">
    <div class="fin-activity">
      <div class="fin-activity-item">
        <div class="fin-activity-icon">✓</div>
        <div class="fin-activity-info">
          <div class="fin-activity-title">Bounty Completed</div>
          <div class="fin-activity-sub">BCI ethics review · 2 days ago</div>
        </div>
        <div class="fin-activity-amount">+₦220</div>
      </div>
      <div class="fin-activity-item">
        <div class="fin-activity-icon">📦</div>
        <div class="fin-activity-info">
          <div class="fin-activity-title">Item Sold</div>
          <div class="fin-activity-sub">Oscilloscope DSOX1102G · 4 days ago</div>
        </div>
        <div class="fin-activity-amount">+₦1,450</div>
      </div>
      <div class="fin-activity-item">
        <div class="fin-activity-icon">💳</div>
        <div class="fin-activity-info">
          <div class="fin-activity-title">Withdrawal</div>
          <div class="fin-activity-sub">To Bank Account · 1 week ago</div>
        </div>
        <div class="fin-activity-amount" style="color:#888">-₦5,000</div>
      </div>
      <div class="fin-activity-item">
        <div class="fin-activity-icon">✓</div>
        <div class="fin-activity-info">
          <div class="fin-activity-title">Bounty Completed</div>
          <div class="fin-activity-sub">Cell annotation task · 2 weeks ago</div>
        </div>
        <div class="fin-activity-amount">+₦480</div>
      </div>
    </div>
  </div>
</div>

<!-- MARKETPLACE -->
<div class="fin-section" id="fin-marketplace">
  <div class="fin-label">Equipment & Services</div>
  <div class="fin-market">
    <div class="fin-market-grid">
      <div class="fin-product">
        <img src="img1" class="fin-product-img">
        <div class="fin-product-body">
          <div class="fin-product-name">Keysight Oscilloscope DSOX1102G</div>
          <div class="fin-product-seller">Samuel Obi · LASU</div>
          <div class="fin-product-price">₦1,450</div>
        </div>
      </div>
      <div class="fin-product">
        <img src="img2" class="fin-product-img">
        <div class="fin-product-body">
          <div class="fin-product-name">scRNA-seq Human Atlas Dataset</div>
          <div class="fin-product-seller">Ada James · UNILAG</div>
          <div class="fin-product-price">₦420</div>
        </div>
      </div>
      <div class="fin-product">
        <img src="img3" class="fin-product-img">
        <div class="fin-product-body">
          <div class="fin-product-name">Peer Review Service</div>
          <div class="fin-product-seller">Dr. Fatima · ABU</div>
          <div class="fin-product-price">₦180</div>
        </div>
      </div>
      <div class="fin-product">
        <img src="img1" class="fin-product-img">
        <div class="fin-product-body">
          <div class="fin-product-name">Thermo PCR Machine</div>
          <div class="fin-product-seller">Israel Mark · FUTO</div>
          <div class="fin-product-price">₦2,100</div>
        </div>
      </div>
      <div class="fin-product">
        <img src="img2" class="fin-product-img">
        <div class="fin-product-body">
          <div class="fin-product-name">Genome Assembly Pipeline</div>
          <div class="fin-product-seller">Chidi · OAU</div>
          <div class="fin-product-price">₦350</div>
        </div>
      </div>
      <div class="fin-product">
        <img src="img3" class="fin-product-img">
        <div class="fin-product-body">
          <div class="fin-product-name">Grant Writing Workshop</div>
          <div class="fin-product-seller">Ngozi Eze · UNIBEN</div>
          <div class="fin-product-price">₦120</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- MARKETS NEWS -->
<div class="fin-section" id="fin-news">
  <div class="fin-ticker">
    <div class="fin-ticker-item">
      <div class="fin-ticker-symbol">S&P 500</div>
      <div class="fin-ticker-price">6,127.45</div>
      <div class="fin-ticker-change pos">+0.84%</div>
    </div>
    <div class="fin-ticker-item">
      <div class="fin-ticker-symbol">DOW</div>
      <div class="fin-ticker-price">44,623</div>
      <div class="fin-ticker-change pos">+1.12%</div>
    </div>
    <div class="fin-ticker-item">
      <div class="fin-ticker-symbol">NASDAQ</div>
      <div class="fin-ticker-price">19,658</div>
      <div class="fin-ticker-change neg">-0.35%</div>
    </div>
    <div class="fin-ticker-item">
      <div class="fin-ticker-symbol">GOLD</div>
      <div class="fin-ticker-price">$2,834</div>
      <div class="fin-ticker-change pos">+0.67%</div>
    </div>
    <div class="fin-ticker-item">
      <div class="fin-ticker-symbol">OIL</div>
      <div class="fin-ticker-price">$73.21</div>
      <div class="fin-ticker-change neg">-1.45%</div>
    </div>
    <div class="fin-ticker-item">
      <div class="fin-ticker-symbol">BTC</div>
      <div class="fin-ticker-price">$95,240</div>
      <div class="fin-ticker-change pos">+2.34%</div>
    </div>
  </div>

  <div class="fin-label">Breaking News</div>
  <div class="fin-news">
    <div class="fin-news-card">
      <div class="fin-news-eyebrow"><div class="fin-news-live"></div>Breaking · 2h ago</div>
      <div class="fin-news-title">Fed Signals Potential Rate Cut as Inflation Cools to 2.4%</div>
      <div class="fin-news-excerpt">Federal Reserve Chair Jerome Powell indicated interest rates could be reduced in coming months as inflation continues downward trajectory. Data-dependent approach emphasized while acknowledging improving conditions.</div>
      <div class="fin-news-meta"><span>📍 Washington</span><span>📰 Reuters</span></div>
    </div>

    <div class="fin-news-card">
      <div class="fin-news-eyebrow">Markets · 3h ago</div>
      <div class="fin-news-title">Tech Stocks Rally on Strong AI Chip Demand</div>
      <div class="fin-news-excerpt">Semiconductor stocks surge as hyperscalers increase AI infrastructure spending. NVIDIA up 4.2% on raised guidance.</div>
      <div class="fin-news-meta"><span>💼 Technology</span><span>📰 Bloomberg</span></div>
    </div>

    <div class="fin-news-card">
      <div class="fin-news-eyebrow">Crypto · 7h ago</div>
      <div class="fin-news-title">Bitcoin Surges Past $95K on ETF Inflows</div>
      <div class="fin-news-excerpt">Spot Bitcoin ETFs see record $2.1B weekly inflows as institutional adoption accelerates. Total crypto market cap exceeds $3.5T.</div>
      <div class="fin-news-meta"><span>₿ Crypto</span><span>📰 CoinDesk</span></div>
    </div>

    <div class="fin-news-card">
      <div class="fin-news-eyebrow">Energy · 11h ago</div>
      <div class="fin-news-title">OPEC+ Announces Production Increase</div>
      <div class="fin-news-excerpt">Crude oil futures fell 1.5% following decision to boost output by 500K barrels/day starting next month, easing supply concerns.</div>
      <div class="fin-news-meta"><span>⚡ Energy</span><span>📰 FT</span></div>
    </div>

    <div class="fin-news-card">
      <div class="fin-news-eyebrow">Markets · 14h ago</div>
      <div class="fin-news-title">Major Banks Report Strong Q1 Earnings</div>
      <div class="fin-news-excerpt">JPMorgan and Goldman exceed expectations with trading revenues up 25% YoY amid increased volatility and client activity.</div>
      <div class="fin-news-meta"><span>🏦 Banking</span><span>📰 WSJ</span></div>
    </div>
  </div>
</div>

<!-- BOUNTIES -->
<div class="fin-section" id="fin-bounties">
  <div class="fin-label">Active Bounties</div>
  <div class="fin-bounties">
    <div class="fin-bounty">
      <div class="fin-bounty-amount">₦220</div>
      <div class="fin-bounty-title">Review BCI ethics & methods preprint</div>
      <div class="fin-bounty-desc">8–12 pages. Need strong neuro background. Detailed feedback required on experimental design and ethical considerations.</div>
      <div class="fin-bounty-meta"><span>NeuralTech Lab</span><span>Due Feb 18</span></div>
      <button class="fin-bounty-btn">Apply Now</button>
    </div>

    <div class="fin-bounty">
      <div class="fin-bounty-amount">₦480</div>
      <div class="fin-bounty-title">Annotate 8k cells – multi-omics data</div>
      <div class="fin-bounty-desc">Scanpy/Seurat clustering + markers. Preprocessed h5ad file provided. Must have experience with single-cell analysis.</div>
      <div class="fin-bounty-meta"><span>Broad Institute</span><span>Due Feb 25</span></div>
      <button class="fin-bounty-btn">Apply Now</button>
    </div>

    <div class="fin-bounty">
      <div class="fin-bounty-amount">₦280</div>
      <div class="fin-bounty-title">Write NSF proposal impact section</div>
      <div class="fin-bounty-desc">AI climate model project. Need compelling 1-page narrative demonstrating broader impacts and societal benefits.</div>
      <div class="fin-bounty-meta"><span>ClimateAI Research</span><span>Due Mar 5</span></div>
      <button class="fin-bounty-btn">Apply Now</button>
    </div>

    <div class="fin-bounty">
      <div class="fin-bounty-amount">₦350</div>
      <div class="fin-bounty-title">Debug quantum circuit implementation</div>
      <div class="fin-bounty-desc">Qiskit error correction code failing on hardware. Need expert to identify issue and fix within 48h.</div>
      <div class="fin-bounty-meta"><span>Quantum Lab · FUTO</span><span>Due Feb 20</span></div>
      <button class="fin-bounty-btn">Apply Now</button>
    </div>

    <div class="fin-bounty">
      <div class="fin-bounty-amount">₦180</div>
      <div class="fin-bounty-title">Statistical analysis for clinical trial</div>
      <div class="fin-bounty-desc">Small dataset (n=120). Need power analysis, t-tests, regression. R or Python. Report + visualizations required.</div>
      <div class="fin-bounty-meta"><span>BioMed Research</span><span>Due Mar 1</span></div>
      <button class="fin-bounty-btn">Apply Now</button>
    </div>
  </div>
</div>

<!-- EARNINGS -->
<div class="fin-section" id="fin-earnings">
  <div class="fin-label">Earnings Overview</div>
  <div class="fin-earnings">
    <div class="fin-stat-grid">
      <div class="fin-stat">
        <div class="fin-stat-value">₦48,240</div>
        <div class="fin-stat-label">Total Earned</div>
      </div>
      <div class="fin-stat">
        <div class="fin-stat-value">₦3,200</div>
        <div class="fin-stat-label">Pending</div>
      </div>
      <div class="fin-stat">
        <div class="fin-stat-value">12</div>
        <div class="fin-stat-label">Completed</div>
      </div>
      <div class="fin-stat">
        <div class="fin-stat-value">4.9</div>
        <div class="fin-stat-label">Avg Rating</div>
      </div>
    </div>
  </div>

  <div class="fin-label">All Transactions</div>
  <div class="fin-earnings">
    <div class="fin-activity">
      <div class="fin-activity-item">
        <div class="fin-activity-icon">✓</div>
        <div class="fin-activity-info">
          <div class="fin-activity-title">Bounty Completed</div>
          <div class="fin-activity-sub">BCI ethics review · Feb 16</div>
        </div>
        <div class="fin-activity-amount">+₦220</div>
      </div>
      <div class="fin-activity-item">
        <div class="fin-activity-icon">📦</div>
        <div class="fin-activity-info">
          <div class="fin-activity-title">Item Sold</div>
          <div class="fin-activity-sub">Oscilloscope · Feb 14</div>
        </div>
        <div class="fin-activity-amount">+₦1,450</div>
      </div>
      <div class="fin-activity-item">
        <div class="fin-activity-icon">💳</div>
        <div class="fin-activity-info">
          <div class="fin-activity-title">Withdrawal</div>
          <div class="fin-activity-sub">Bank Transfer · Feb 11</div>
        </div>
        <div class="fin-activity-amount" style="color:#888">-₦5,000</div>
      </div>
      <div class="fin-activity-item">
        <div class="fin-activity-icon">✓</div>
        <div class="fin-activity-info">
          <div class="fin-activity-title">Bounty Completed</div>
          <div class="fin-activity-sub">Cell annotation · Feb 4</div>
        </div>
        <div class="fin-activity-amount">+₦480</div>
      </div>
      <div class="fin-activity-item">
        <div class="fin-activity-icon">✓</div>
        <div class="fin-activity-info">
          <div class="fin-activity-title">Bounty Completed</div>
          <div class="fin-activity-sub">Grant writing · Jan 28</div>
        </div>
        <div class="fin-activity-amount">+₦280</div>
      </div>
      <div class="fin-activity-item">
        <div class="fin-activity-icon">📦</div>
        <div class="fin-activity-info">
          <div class="fin-activity-title">Item Sold</div>
          <div class="fin-activity-sub">Dataset · Jan 24</div>
        </div>
        <div class="fin-activity-amount">+₦420</div>
      </div>
      <div class="fin-activity-item">
        <div class="fin-activity-icon">💳</div>
        <div class="fin-activity-info">
          <div class="fin-activity-title">Withdrawal</div>
          <div class="fin-activity-sub">Bank Transfer · Jan 20</div>
        </div>
        <div class="fin-activity-amount" style="color:#888">-₦3,500</div>
      </div>
    </div>
  </div>
</div>

<!-- WALLET -->
<div class="fin-section" id="fin-wallet">
  <div class="fin-wallet">
    <div class="fin-wallet-header">
      <div>
        <div style="font-size:11px;color:#444;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Available Balance</div>
        <div class="fin-wallet-balance">₦48,240</div>
      </div>
      <button class="fin-wallet-btn">Withdraw</button>
    </div>

    <div class="fin-label" style="padding:0 0 10px">Payout Methods</div>
    <div class="fin-wallet-methods">
      <div class="fin-method">
        <div class="fin-method-icon">🏦</div>
        <div class="fin-method-info">
          <div class="fin-method-name">Bank Transfer</div>
          <div class="fin-method-sub">GTBank · ****4892 · 2-3 days</div>
        </div>
        <div class="fin-method-arrow">›</div>
      </div>
      <div class="fin-method">
        <div class="fin-method-icon">📱</div>
        <div class="fin-method-info">
          <div class="fin-method-name">Mobile Money</div>
          <div class="fin-method-sub">MTN · 0803****201 · Instant</div>
        </div>
        <div class="fin-method-arrow">›</div>
      </div>
      <div class="fin-method">
        <div class="fin-method-icon">💳</div>
        <div class="fin-method-info">
          <div class="fin-method-name">Debit Card</div>
          <div class="fin-method-sub">Visa ****7834 · 1-2 days</div>
        </div>
        <div class="fin-method-arrow">›</div>
      </div>
    </div>

    <button style="width:100%;padding:12px;background:#1a1a1a;color:#fff;border:1px solid#2a2a2a;border-radius:8px;font-size:13px;font-weight:700;cursor:pointer;transition:border 0.2s;" onmouseover="this.style.borderColor='#fff'" onmouseleave="this.style.borderColor='#2a2a2a'">+ Add Payment Method</button>
  </div>
</div>

<script>
function finTab(tab,btn){
  document.querySelectorAll('.fin-tab').forEach(t=>t.classList.remove('active'));
  btn.classList.add('active');
  document.querySelectorAll('.fin-section').forEach(s=>s.classList.remove('active'));
  document.getElementById('fin-'+tab).classList.add('active');
}
</script>

</section>


<section style="display:none" id="Board" class="Board">
  <style>
    /* Board Container */
    .Board {
      background: #000;
      color: #fff;
      min-height: 100vh;
      width: 100%;
      top: 0;
      left: 0;
      overflow-y: auto;
      z-index: 900;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      position: relative;
    }

    /* Header */
    .board-header {
      position: sticky;
      top: 0;
      background: #000;
      border-bottom: 1px solid #222;
      padding: 20px;
      z-index: 100;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .board-title {
      font-size: 24px;
      font-weight: 600;
      letter-spacing: -0.5px;
    }

    .board-close {
      width: 36px;
      height: 36px;
      background: transparent;
      border: 1px solid #333;
      border-radius: 50%;
      color: #fff;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .board-close:hover {
      background: #fff;
      color: #000;
    }

    /* Filters & Search */
    .board-controls {
      padding: 20px;
      border-bottom: 1px solid #222;
      display: flex;
      gap: 16px;
      align-items: center;
      overflow-x: auto;
    }

    .board-filter {
      padding: 8px 16px;
      background: transparent;
      border: 1px solid #333;
      border-radius: 6px;
      color: #999;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.2s;
    }

    .board-filter:hover {
      border-color: #fff;
      color: #fff;
    }

    .board-filter.active {
      background: #fff;
      color: #000;
      border-color: #fff;
    }

    .board-search {
      flex: 1;
      max-width: 300px;
      position: relative;
    }

    .board-search-input {
      width: 100%;
      padding: 8px 16px;
      background: transparent;
      border: 1px solid #333;
      border-radius: 6px;
      color: #fff;
      font-size: 13px;
      transition: border 0.2s;
    }

    .board-search-input:focus {
      outline: none;
      border-color: #fff;
    }

    .board-search-input::placeholder {
      color: #666;
    }

    /* Content Container */
    .board-content {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    /* Announcement Card */
    .announcement {
      background: transparent;
      border: 1px solid #222;
      border-radius: 2px;
      padding: 32px;
      margin-bottom: 1px;
      transition: all 0.2s;
      position: relative;
    }

    .announcement:hover {
      border-color: #fff;
      background: rgba(255, 255, 255, 0.02);
    }

    .announcement.critical {
      border-left: 3px solid #fff;
    }

    /* Announcement Header */
    .announcement-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 16px;
    }

    .announcement-meta {
      display: flex;
      gap: 16px;
      align-items: center;
      font-size: 12px;
      color: #666;
    }

    .announcement-type {
      padding: 4px 10px;
      background: #fff;
      color: #000;
      border-radius: 2px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .announcement-date {
      font-size: 12px;
      color: #666;
    }

    .announcement-priority {
      padding: 4px 8px;
      background: transparent;
      border: 1px solid #333;
      border-radius: 2px;
      font-size: 11px;
      color: #999;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .announcement-priority.high {
      border-color: #fff;
      color: #fff;
    }

    /* Announcement Content */
    .announcement-title {
      font-size: 20px;
      font-weight: 600;
      letter-spacing: -0.3px;
      margin-bottom: 12px;
      line-height: 1.3;
    }

    .announcement-body {
      font-size: 14px;
      line-height: 1.7;
      color: #999;
      margin-bottom: 20px;
    }

    /* List Items */
    .announcement-list {
      list-style: none;
      padding: 0;
      margin: 16px 0;
    }

    .announcement-list li {
      padding: 8px 0;
      padding-left: 20px;
      position: relative;
      font-size: 14px;
      color: #ccc;
      border-bottom: 1px solid #111;
    }

    .announcement-list li:last-child {
      border-bottom: none;
    }

    .announcement-list li::before {
      content: '—';
      position: absolute;
      left: 0;
      color: #666;
    }

    /* Poll Section */
    .poll {
      margin: 24px 0;
      padding: 20px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid #222;
      border-radius: 2px;
    }

    .poll-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .poll-option {
      position: relative;
      padding: 14px 16px;
      margin-bottom: 8px;
      background: transparent;
      border: 1px solid #222;
      border-radius: 2px;
      cursor: pointer;
      transition: all 0.2s;
      overflow: hidden;
    }

    .poll-option:hover {
      border-color: #fff;
    }

    .poll-option.selected {
      border-color: #fff;
      background: rgba(255, 255, 255, 0.05);
    }

    .poll-bar {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      background: rgba(255, 255, 255, 0.1);
      transition: width 0.3s;
      z-index: 0;
    }

    .poll-content {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .poll-text {
      font-size: 13px;
    }

    .poll-percentage {
      font-size: 13px;
      font-weight: 600;
      color: #fff;
    }

    .poll-footer {
      margin-top: 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      color: #666;
    }

    .poll-submit {
      padding: 8px 20px;
      background: #fff;
      color: #000;
      border: none;
      border-radius: 2px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .poll-submit:hover {
      background: #e6e6e6;
    }

    /* Event Card */
    .event {
      margin: 24px 0;
      padding: 20px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid #222;
      border-radius: 2px;
    }

    .event-date-block {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }

    .event-date-box {
      width: 60px;
      height: 60px;
      background: #fff;
      color: #000;
      border-radius: 2px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .event-month {
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .event-day {
      font-size: 24px;
      font-weight: 700;
      line-height: 1;
    }

    .event-details h4 {
      font-size: 16px;
      font-weight: 600;
      margin: 0 0 8px 0;
    }

    .event-info {
      font-size: 13px;
      color: #999;
      line-height: 1.6;
    }

    .event-actions {
      margin-top: 16px;
      display: flex;
      gap: 8px;
    }

    .event-btn {
      padding: 8px 16px;
      background: transparent;
      border: 1px solid #333;
      border-radius: 2px;
      color: #fff;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .event-btn:hover {
      background: #fff;
      color: #000;
      border-color: #fff;
    }

    .event-btn.active {
      background: #fff;
      color: #000;
      border-color: #fff;
    }

    /* Tags */
    .announcement-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 16px 0;
    }

    .announcement-tag {
      padding: 4px 10px;
      background: transparent;
      border: 1px solid #333;
      border-radius: 2px;
      font-size: 11px;
      color: #999;
      cursor: pointer;
      transition: all 0.2s;
    }

    .announcement-tag:hover {
      border-color: #fff;
      color: #fff;
    }

    /* Footer Actions */
    .announcement-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 20px;
      border-top: 1px solid #111;
      margin-top: 20px;
    }

    .announcement-stats {
      display: flex;
      gap: 20px;
      font-size: 12px;
      color: #666;
    }

    .announcement-stat {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .announcement-actions {
      display: flex;
      gap: 8px;
    }

    .announcement-action {
      padding: 6px 14px;
      background: transparent;
      border: 1px solid #333;
      border-radius: 2px;
      color: #999;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .announcement-action:hover {
      border-color: #fff;
      color: #fff;
    }

    .announcement-action.active {
      background: #fff;
      color: #000;
      border-color: #fff;
    }

    /* Version Badge */
    .version-badge {
      display: inline-block;
      padding: 2px 8px;
      background: #fff;
      color: #000;
      border-radius: 2px;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.5px;
      margin-left: 12px;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .board-controls {
        flex-direction: column;
        align-items: stretch;
      }

      .board-search {
        max-width: 100%;
      }

      .announcement {
        padding: 24px;
      }

      .announcement-header {
        flex-direction: column;
        gap: 12px;
      }

      .announcement-footer {
        flex-direction: column;
        gap: 16px;
        align-items: flex-start;
      }

      .event-actions {
        flex-direction: column;
      }

      .event-btn {
        width: 100%;
      }
    }

    /* Scrollbar */
    .Board::-webkit-scrollbar {
      width: 8px;
    }

    .Board::-webkit-scrollbar-track {
      background: #000;
    }

    .Board::-webkit-scrollbar-thumb {
      background: #333;
      border-radius: 4px;
    }

    .Board::-webkit-scrollbar-thumb:hover {
      background: #555;
    }
  </style>

  <!-- Header -->
  <div class="board-header">
    <div class="board-title">Official Announcements</div>
    <button style="display:block" class="board-close" onclick="document.getElementById('drawer').style.display='block'">×</button>
  </div>

  <!-- Filters & Search -->
  <div class="board-controls">
    <button class="board-filter active" data-filter="all">All</button>
    <button class="board-filter" data-filter="critical">Critical</button>
    <button class="board-filter" data-filter="updates">Updates</button>
    <button class="board-filter" data-filter="events">Events</button>
    <button class="board-filter" data-filter="polls">Polls</button>
    <div class="board-search">
      <input type="text" class="board-search-input" placeholder="Search announcements...">
    </div>
  </div>

  <!-- Content -->
  <div class="board-content">

    <!-- Critical Announcement -->
    <div class="announcement critical">
      <div class="announcement-header">
        <div class="announcement-meta">
          <span class="announcement-type">System</span>
          <span class="announcement-date">February 10, 2026</span>
        </div>
        <span class="announcement-priority high">Critical</span>
      </div>

      <h2 class="announcement-title">Scheduled Maintenance — February 12, 2026</h2>
      
      <div class="announcement-body">
        We will be performing critical infrastructure upgrades to improve platform performance and security. The service will be temporarily unavailable during this maintenance window.
      </div>

      <ul class="announcement-list">
        <li>Date: February 12, 2026</li>
        <li>Time: 02:00 – 06:00 UTC</li>
        <li>Expected downtime: 4 hours</li>
        <li>Impact: Full service unavailable</li>
      </ul>

      <div class="announcement-footer">
        <div class="announcement-stats">
          <span class="announcement-stat">2,347 views</span>
          <span class="announcement-stat">45 reactions</span>
        </div>
        <div class="announcement-actions">
          <button class="announcement-action active">Mark Read</button>
          <button class="announcement-action">Share</button>
        </div>
      </div>
    </div>

    <!-- Poll Announcement -->
    <div class="announcement">
      <div class="announcement-header">
        <div class="announcement-meta">
          <span class="announcement-type">Community</span>
          <span class="announcement-date">February 9, 2026</span>
        </div>
        <span class="announcement-priority">Standard</span>
      </div>

      <h2 class="announcement-title">Product Roadmap — Your Input Needed</h2>
      
      <div class="announcement-body">
        Help us prioritize our development roadmap. Your feedback directly influences which features we build next.
      </div>

      <div class="poll">
        <div class="poll-title">Which feature should we prioritize?</div>
        
        <div class="poll-option" data-votes="42">
          <div class="poll-bar" style="width: 42%"></div>
          <div class="poll-content">
            <span class="poll-text">Video messaging and conferencing</span>
            <span class="poll-percentage">42%</span>
          </div>
        </div>

        <div class="poll-option selected" data-votes="31">
          <div class="poll-bar" style="width: 31%"></div>
          <div class="poll-content">
            <span class="poll-text">Advanced analytics dashboard</span>
            <span class="poll-percentage">31%</span>
          </div>
        </div>

        <div class="poll-option" data-votes="18">
          <div class="poll-bar" style="width: 18%"></div>
          <div class="poll-content">
            <span class="poll-text">Mobile application</span>
            <span class="poll-percentage">18%</span>
          </div>
        </div>

        <div class="poll-option" data-votes="9">
          <div class="poll-bar" style="width: 9%"></div>
          <div class="poll-content">
            <span class="poll-text">API and integrations</span>
            <span class="poll-percentage">9%</span>
          </div>
        </div>

        <div class="poll-footer">
          <span>1,847 responses • Closes February 15</span>
          <button class="poll-submit">Submit Vote</button>
        </div>
      </div>

      <div class="announcement-footer">
        <div class="announcement-stats">
          <span class="announcement-stat">1,847 participants</span>
          <span class="announcement-stat">89 comments</span>
        </div>
        <div class="announcement-actions">
          <button class="announcement-action">Discuss</button>
          <button class="announcement-action">Share</button>
        </div>
      </div>
    </div>

    <!-- Event Announcement -->
    <div class="announcement">
      <div class="announcement-header">
        <div class="announcement-meta">
          <span class="announcement-type">Events</span>
          <span class="announcement-date">February 8, 2026</span>
        </div>
        <span class="announcement-priority">Standard</span>
      </div>

      <h2 class="announcement-title">Academic Research Symposium 2026</h2>
      
      <div class="announcement-body">
        Join leading researchers from MIT, Stanford, and Cambridge for our annual virtual symposium. Present your work, network with peers, and explore collaborative opportunities.
      </div>

      <div class="event">
        <div class="event-date-block">
          <div class="event-date-box">
            <div class="event-month">FEB</div>
            <div class="event-day">15</div>
          </div>
          <div class="event-details">
            <h4>Virtual Research Symposium</h4>
            <div class="event-info">
              14:00 – 18:00 UTC<br>
              Virtual Event (Zoom)
            </div>
          </div>
        </div>

        <div class="event-actions">
          <button class="event-btn active">Attending (234)</button>
          <button class="event-btn">Interested (89)</button>
          <button class="event-btn">Add to Calendar</button>
        </div>
      </div>

      <div class="announcement-footer">
        <div class="announcement-stats">
          <span class="announcement-stat">323 attendees</span>
          <span class="announcement-stat">456 interested</span>
        </div>
        <div class="announcement-actions">
          <button class="announcement-action">Details</button>
          <button class="announcement-action">Share</button>
        </div>
      </div>
    </div>

    <!-- Product Update -->
    <div class="announcement">
      <div class="announcement-header">
        <div class="announcement-meta">
          <span class="announcement-type">Product</span>
          <span class="announcement-date">February 7, 2026</span>
          <span class="version-badge">v1.2.0</span>
        </div>
        <span class="announcement-priority">Standard</span>
      </div>

      <h2 class="announcement-title">Platform Update — Enhanced Search & Analytics</h2>
      
      <div class="announcement-body">
        We've shipped significant improvements to search functionality and introduced advanced analytics for research tracking.
      </div>

      <ul class="announcement-list">
        <li>AI-powered semantic search across papers and discussions</li>
        <li>Real-time collaboration analytics dashboard</li>
        <li>Performance improvements (40% faster page loads)</li>
        <li>Enhanced security protocols</li>
        <li>Bug fixes and stability improvements</li>
      </ul>

      <div class="announcement-tags">
        <span class="announcement-tag">Search</span>
        <span class="announcement-tag">Analytics</span>
        <span class="announcement-tag">Performance</span>
      </div>

      <div class="announcement-footer">
        <div class="announcement-stats">
          <span class="announcement-stat">5,234 views</span>
          <span class="announcement-stat">187 reactions</span>
        </div>
        <div class="announcement-actions">
          <button class="announcement-action">Learn More</button>
          <button class="announcement-action">Share</button>
        </div>
      </div>
    </div>

    <!-- Milestone -->
    <div class="announcement">
      <div class="announcement-header">
        <div class="announcement-meta">
          <span class="announcement-type">Milestone</span>
          <span class="announcement-date">February 5, 2026</span>
        </div>
        <span class="announcement-priority">Standard</span>
      </div>

      <h2 class="announcement-title">50,000 Researchers Strong</h2>
      
      <div class="announcement-body">
        We've reached 50,000 registered users across 200+ universities worldwide. Thank you for making Trends the leading academic collaboration platform.
      </div>

      <div class="announcement-tags">
        <span class="announcement-tag">Milestone</span>
        <span class="announcement-tag">Community</span>
      </div>

      <div class="announcement-footer">
        <div class="announcement-stats">
          <span class="announcement-stat">8,934 views</span>
          <span class="announcement-stat">1,245 reactions</span>
        </div>
        <div class="announcement-actions">
          <button class="announcement-action">Celebrate</button>
          <button class="announcement-action">Share</button>
        </div>
      </div>
    </div>

  </div>

  <script>
    // Filter functionality
    document.querySelectorAll('.board-filter').forEach(filter => {
      filter.addEventListener('click', function() {
        document.querySelectorAll('.board-filter').forEach(f => f.classList.remove('active'));
        this.classList.add('active');
        
        const filterType = this.dataset.filter;
        console.log('Filtering by:', filterType);
        // Add filtering logic here
      });
    });

    // Poll selection
    document.querySelectorAll('.poll-option').forEach(option => {
      option.addEventListener('click', function() {
        const parent = this.closest('.poll');
        parent.querySelectorAll('.poll-option').forEach(opt => opt.classList.remove('selected'));
        this.classList.add('selected');
      });
    });

    // Event RSVP
    document.querySelectorAll('.event-btn').forEach(btn => {
      if (!btn.textContent.includes('Calendar')) {
        btn.addEventListener('click', function() {
          const parent = this.closest('.event-actions');
          parent.querySelectorAll('.event-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
        });
      }
    });

    // Mark as read
    document.querySelectorAll('.announcement-action').forEach(action => {
      if (action.textContent.includes('Mark')) {
        action.addEventListener('click', function() {
          this.classList.toggle('active');
          this.textContent = this.classList.contains('active') ? 'Mark Read' : 'Marked';
        });
      }
    });

    // Search
    document.querySelector('.board-search-input').addEventListener('input', function(e) {
      const query = e.target.value.toLowerCase();
      console.log('Searching:', query);
      // Add search logic here
    });
  </script>
</section>

  
<section id="Settings" class="Settings" style="display:none">
<style>
.Settings{background:#080808;color:#fff;min-height:100vh;width:100%;position:fixed;top:0;left:0;bottom:0;right:0;overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:900;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;scrollbar-width:none;}
.Settings::-webkit-scrollbar{display:none;}

/* HEADER */
.set-header{position:sticky;top:0;background:rgba(8,8,8,0.97);backdrop-filter:blur(10px);border-bottom:1px solid#1a1a1a;padding:16px 20px;display:flex;align-items:center;gap:12px;z-index:100;}
.set-back{background:transparent;border:none;color:#fff;font-size:22px;cursor:pointer;padding:0;line-height:1;flex-shrink:0;}
.set-title{flex:1;font-size:20px;font-weight:800;letter-spacing:-0.5px;}
.set-search{padding:8px 12px;background:#111;border:1px solid#222;border-radius:18px;color:#fff;font-size:12px;outline:none;width:100px;transition:all 0.2s;}
.set-search:focus{border-color:#444;width:140px;}
.set-search::placeholder{color:#444;}

/* MAIN */
.set-main{max-width:700px;margin:0 auto;padding:20px 20px 100px;}

/* PROFILE CARD */
.set-profile{background:#0f0f0f;border:1px solid#1a1a1a;border-radius:16px;padding:24px;margin-bottom:20px;}
.set-profile-top{display:flex;align-items:center;gap:20px;margin-bottom:20px;}
.set-profile-pic-wrap{position:relative;flex-shrink:0;}
.set-profile-pic{width:80px;height:80px;border-radius:50%;object-fit:cover;border:2px solid#222;display:block;}
.set-profile-badge{position:absolute;bottom:0;right:0;width:24px;height:24px;background:#22c55e;border:3px solid#0f0f0f;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;}
.set-profile-info{flex:1;min-width:0;}
.set-profile-name{font-size:18px;font-weight:800;margin-bottom:4px;}
.set-profile-handle{font-size:14px;color:#555;margin-bottom:8px;}
.set-profile-verified{display:inline-flex;align-items:center;gap:4px;font-size:12px;color:#888;padding:3px 8px;background:#111;border:1px solid#222;border-radius:12px;margin-bottom:12px;}
.set-profile-btns{display:flex;gap:8px;flex-wrap:wrap;}
.set-profile-btn{padding:8px 14px;background:transparent;border:1px solid#333;border-radius:8px;color:#888;font-size:13px;font-weight:600;cursor:pointer;transition:all 0.2s;white-space:nowrap;}
.set-profile-btn:hover{border-color:#fff;color:#fff;}
.set-profile-btn.primary{background:#fff;color:#000;border-color:#fff;}
.set-profile-btn.primary:hover{opacity:0.9;}
.set-profile-btn.danger{color:#ef4444;border-color:#ef4444;}
.set-profile-btn.danger:hover{background:#ef4444;color:#fff;}

/* SECTION */
.set-section{background:#0f0f0f;border:1px solid#1a1a1a;border-radius:12px;overflow:hidden;margin-bottom:16px;}
.set-section-header{padding:16px 20px;border-bottom:1px solid#111;}
.set-section-title{font-size:16px;font-weight:800;margin-bottom:3px;letter-spacing:-0.3px;}
.set-section-desc{font-size:12px;color:#444;}

/* ITEM */
.set-item{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid#0d0d0d;transition:background 0.15s;}
.set-item:last-child{border-bottom:none;}
.set-item:hover{background:rgba(255,255,255,0.02);}
.set-item-info{flex:1;padding-right:16px;min-width:0;}
.set-item-label{font-size:14px;font-weight:700;margin-bottom:3px;}
.set-item-desc{font-size:12px;color:#555;line-height:1.4;}

/* INPUT */
.set-input{width:100%;padding:12px 16px;background:#111;border:1px solid#222;border-radius:8px;color:#fff;font-size:14px;margin-top:10px;box-sizing:border-box;outline:none;transition:border 0.2s;font-family:inherit;}
.set-input:focus{border-color:#555;}
.set-input::placeholder{color:#444;}

/* SELECT */
.set-select{padding:8px 14px;background:#111;border:1px solid#222;border-radius:8px;color:#fff;font-size:13px;cursor:pointer;min-width:120px;outline:none;flex-shrink:0;}
.set-select:focus{border-color:#555;}

/* TOGGLE */
.set-toggle{width:48px;height:26px;background:#333;border-radius:13px;position:relative;cursor:pointer;transition:background 0.2s;flex-shrink:0;}
.set-toggle.active{background:#22c55e;}
.set-toggle-knob{width:20px;height:20px;background:#fff;border-radius:50%;position:absolute;top:3px;left:3px;transition:left 0.2s;}
.set-toggle.active .set-toggle-knob{left:25px;}

/* BUTTON */
.set-btn{padding:9px 18px;background:transparent;border:1px solid#333;border-radius:8px;color:#888;font-size:13px;font-weight:600;cursor:pointer;transition:all 0.2s;flex-shrink:0;white-space:nowrap;}
.set-btn:hover{border-color:#fff;color:#fff;}
.set-btn.primary{background:#fff;color:#000;border-color:#fff;}
.set-btn.primary:hover{opacity:0.9;}
.set-btn.danger{background:transparent;color:#ef4444;border-color:#ef4444;}
.set-btn.danger:hover{background:#ef4444;color:#fff;}

/* RADIO GROUP */
.set-radio-group{padding:16px 20px;}
.set-radio{display:flex;align-items:center;gap:12px;padding:14px;background:#111;border:1px solid#1a1a1a;border-radius:8px;cursor:pointer;margin-bottom:8px;transition:all 0.2s;}
.set-radio:last-child{margin-bottom:0;}
.set-radio:hover{border-color:#333;}
.set-radio.selected{background:#1a1a1a;border-color:#fff;}
.set-radio-circle{width:18px;height:18px;border:2px solid#555;border-radius:50%;position:relative;flex-shrink:0;transition:border-color 0.2s;}
.set-radio.selected .set-radio-circle{border-color:#fff;}
.set-radio.selected .set-radio-circle::after{content:'';position:absolute;top:50%;left:50%;width:8px;height:8px;background:#fff;border-radius:50%;transform:translate(-50%,-50%);}
.set-radio-label{font-size:14px;font-weight:600;}

/* DANGER ZONE */
.set-danger{background:#0f0f0f;border:1px solid#ef4444;border-radius:12px;overflow:hidden;margin-bottom:16px;}
.set-danger .set-section-header{border-bottom-color:#2a0f0f;}

/* SAVE BAR */
.set-save-bar{position:fixed;bottom:-100px;left:0;right:0;background:#1a1a1a;border-top:1px solid#333;padding:16px 20px;display:flex;justify-content:space-between;align-items:center;z-index:200;transition:bottom 0.3s;box-shadow:0 -4px 12px rgba(0,0,0,0.5);}
.set-save-bar.visible{bottom:0;}
.set-save-bar-text{font-size:14px;font-weight:600;}
.set-save-bar-btns{display:flex;gap:10px;}

/* MODAL */
.set-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.9);z-index:9999;align-items:center;justify-content:center;padding:20px;}
.set-modal.active{display:flex;}
.set-modal-content{background:#0f0f0f;border:1px solid#222;border-radius:16px;max-width:500px;width:100%;max-height:90vh;overflow-y:auto;padding:24px;}
.set-modal-title{font-size:20px;font-weight:800;margin-bottom:8px;}
.set-modal-desc{font-size:14px;color:#666;margin-bottom:20px;}
.set-modal-btns{display:flex;gap:10px;margin-top:20px;}

/* HIDDEN */
.set-hidden{display:none;}
</style>

<!-- HEADER -->
<div class="set-header">
  <button class="set-back" onclick="document.getElementById('drawer').style.display='block';">←</button>
  <div class="set-title">Settings</div>
  <input class="set-search" id="setSearch" type="text" placeholder="Search..." oninput="setSearchFilter(this.value)">
</div>

<div class="set-main">

  <!-- PROFILE CARD -->
  <div class="set-profile">
    <div class="set-profile-top">
      <div class="set-profile-pic-wrap">
        <img id="setProfilePic" src="img1" class="set-profile-pic" alt="avatar">
        <div class="set-profile-badge">✓</div>
      </div>
      <div class="set-profile-info">
        <div class="set-profile-name" id="setProfileName">Israel Mark</div>
        <div class="set-profile-handle" id="setProfileHandle">@israelmark · Computer Science · LASU</div>
        <div class="set-profile-verified">
          <span>✓</span>
          <span>Verified Account</span>
        </div>
      </div>
    </div>
    <div class="set-profile-btns">
      <button class="set-profile-btn primary" onclick="document.getElementById('setPicInput').click()">Change Photo</button>
      <button class="set-profile-btn" onclick="opeSetModal('editProfile')">Edit Profile</button>
      <button class="set-profile-btn" onclick="shareProfile()">Share Profile</button>
      <button class="set-profile-btn danger" onclick="removeProfilePic()">Remove Photo</button>
    </div>
    <input type="file" id="setPicInput" class="set-hidden" accept="image/*" onchange="handleProfilePicChange(this)">
  </div>

  <!-- ACCOUNT SECTION -->
  <div class="set-section" data-section="account">
    <div class="set-section-header">
      <div class="set-section-title">Account</div>
      <div class="set-section-desc">Manage your account information</div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Email</div>
        <div class="set-item-desc" id="setEmail"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="6108121300040d0c00130a210419000c110d044f020e0c">[email&#160;protected]</a></div>
      </div>
      <button class="set-btn" onclick="openSetModal('changeEmail')">Change</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Username</div>
        <div class="set-item-desc" id="setUsername">@israelmark</div>
      </div>
      <button class="set-btn" onclick="openSetModal('changeUsername')">Change</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Bio</div>
        <div class="set-item-desc" id="setBio">CS student researching ML & networks</div>
      </div>
      <button class="set-btn" onclick="openSetModal('changeBio')">Edit</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">University</div>
        <div class="set-item-desc" id="setUniversity">Lagos State University (LASU)</div>
      </div>
      <button class="set-btn" onclick="openSetModal('changeUniversity')">Change</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Department</div>
        <div class="set-item-desc" id="setDepartment">Computer Science</div>
      </div>
      <button class="set-btn" onclick="openSetModal('changeDepartment')">Change</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Verification</div>
        <div class="set-item-desc">Request account verification badge</div>
      </div>
      <button class="set-btn primary" onclick="openSetModal('requestVerification')">Request</button>
    </div>
  </div>

  <!-- PRIVACY SECTION -->
  <div class="set-section" data-section="privacy">
    <div class="set-section-header">
      <div class="set-section-title">Privacy</div>
      <div class="set-section-desc">Control who can see your content</div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Private Account</div>
        <div class="set-item-desc">Only followers can see your posts</div>
      </div>
      <div class="set-toggle" id="togglePrivate" onclick="toggleSetting('private')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Activity Status</div>
        <div class="set-item-desc">Show when you're active</div>
      </div>
      <div class="set-toggle active" id="toggleActivity" onclick="toggleSetting('activity')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Default Post Visibility</div>
        <div class="set-item-desc">Who can see your posts by default</div>
      </div>
      <select class="set-select" id="selectPostVisibility" onchange="changeSetting('postVisibility',this.value)">
        <option value="public" selected>Public</option>
        <option value="followers">Followers Only</option>
        <option value="university">University Only</option>
        <option value="private">Private</option>
      </select>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Research Paper Visibility</div>
        <div class="set-item-desc">Default visibility for research posts</div>
      </div>
      <select class="set-select" id="selectResearchVisibility" onchange="changeSetting('researchVisibility',this.value)">
        <option value="public" selected>Public</option>
        <option value="university">University Only</option>
        <option value="private">Private</option>
      </select>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Who Can Message You</div>
        <div class="set-item-desc">Control who can send DMs</div>
      </div>
      <select class="set-select" id="selectMessagePrivacy" onchange="changeSetting('messagePrivacy',this.value)">
        <option value="everyone" selected>Everyone</option>
        <option value="followers">Followers Only</option>
        <option value="none">No One</option>
      </select>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Who Can Tag You</div>
        <div class="set-item-desc">Control who can mention you</div>
      </div>
      <select class="set-select" id="selectTagPrivacy" onchange="changeSetting('tagPrivacy',this.value)">
        <option value="everyone" selected>Everyone</option>
        <option value="followers">Followers Only</option>
        <option value="none">No One</option>
      </select>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Who Can See Your Followers</div>
        <div class="set-item-desc">Control follower list visibility</div>
      </div>
      <select class="set-select" id="selectFollowersVisibility" onchange="changeSetting('followersVisibility',this.value)">
        <option value="everyone" selected>Everyone</option>
        <option value="followers">Followers Only</option>
        <option value="none">No One</option>
      </select>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Blocked Accounts</div>
        <div class="set-item-desc" id="setBlockedCount">3 accounts blocked</div>
      </div>
      <button class="set-btn" onclick="openSetModal('blockedAccounts')">Manage</button>
    </div>
  </div>

  <!-- MESSAGING SECTION -->
  <div class="set-section" data-section="messaging">
    <div class="set-section-header">
      <div class="set-section-title">Messaging</div>
      <div class="set-section-desc">Control your messaging experience</div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Read Receipts</div>
        <div class="set-item-desc">Let others know when you read their messages</div>
      </div>
      <div class="set-toggle active" id="toggleReadReceipts" onclick="toggleSetting('readReceipts')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Typing Indicators</div>
        <div class="set-item-desc">Show when you're typing a message</div>
      </div>
      <div class="set-toggle active" id="toggleTypingIndicators" onclick="toggleSetting('typingIndicators')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Message Requests</div>
        <div class="set-item-desc">Approve messages from people you don't follow</div>
      </div>
      <div class="set-toggle active" id="toggleMessageRequests" onclick="toggleSetting('messageRequests')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Group Chat Invites</div>
        <div class="set-item-desc">Who can add you to group chats</div>
      </div>
      <select class="set-select" id="selectGroupInvites" onchange="changeSetting('groupInvites',this.value)">
        <option value="everyone" selected>Everyone</option>
        <option value="followers">Followers Only</option>
        <option value="none">No One</option>
      </select>
    </div>
  </div>

  <!-- NOTIFICATIONS SECTION -->
  <div class="set-section" data-section="notifications">
    <div class="set-section-header">
      <div class="set-section-title">Notifications</div>
      <div class="set-section-desc">Choose what updates you receive</div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Push Notifications</div>
        <div class="set-item-desc">Receive notifications on this device</div>
      </div>
      <div class="set-toggle active" id="togglePush" onclick="toggleSetting('push')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Likes</div>
        <div class="set-item-desc">When someone likes your post</div>
      </div>
      <div class="set-toggle active" id="toggleLikes" onclick="toggleSetting('likes')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Comments</div>
        <div class="set-item-desc">When someone comments on your post</div>
      </div>
      <div class="set-toggle active" id="toggleComments" onclick="toggleSetting('comments')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">New Followers</div>
        <div class="set-item-desc">When someone follows you</div>
      </div>
      <div class="set-toggle active" id="toggleFollowers" onclick="toggleSetting('followers')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Direct Messages</div>
        <div class="set-item-desc">New DMs and message requests</div>
      </div>
      <div class="set-toggle active" id="toggleDMs" onclick="toggleSetting('dms')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Mentions</div>
        <div class="set-item-desc">When someone tags you</div>
      </div>
      <div class="set-toggle active" id="toggleMentions" onclick="toggleSetting('mentions')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Bounty Matches</div>
        <div class="set-item-desc">New bounties matching your skills</div>
      </div>
      <div class="set-toggle active" id="toggleBounties" onclick="toggleSetting('bounties')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Event Reminders</div>
        <div class="set-item-desc">Reminders for upcoming events</div>
      </div>
      <div class="set-toggle active" id="toggleEvents" onclick="toggleSetting('events')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Research Updates</div>
        <div class="set-item-desc">New papers from researchers you follow</div>
      </div>
      <div class="set-toggle active" id="toggleResearch" onclick="toggleSetting('research')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Email Notifications</div>
        <div class="set-item-desc">Weekly digest and important updates</div>
      </div>
      <div class="set-toggle" id="toggleEmail" onclick="toggleSetting('email')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
  </div>

  <!-- SECURITY SECTION -->
  <div class="set-section" data-section="security">
    <div class="set-section-header">
      <div class="set-section-title">Security</div>
      <div class="set-section-desc">Keep your account safe</div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Password</div>
        <div class="set-item-desc" id="setPasswordDate">Last changed 3 months ago</div>
      </div>
      <button class="set-btn primary" onclick="openSetModal('changePassword')">Change</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Two-Factor Authentication</div>
        <div class="set-item-desc" id="set2FAStatus">Add extra security layer</div>
      </div>
      <button class="set-btn primary" id="btn2FA" onclick="openSetModal('setup2FA')">Enable</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Active Sessions</div>
        <div class="set-item-desc" id="setSessionCount">2 devices logged in</div>
      </div>
      <button class="set-btn" onclick="openSetModal('activeSessions')">View All</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Login Alerts</div>
        <div class="set-item-desc">Get notified of new logins</div>
      </div>
      <div class="set-toggle active" id="toggleLoginAlerts" onclick="toggleSetting('loginAlerts')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
  </div>

  <!-- APPEARANCE SECTION -->
  <div class="set-section" data-section="appearance">
    <div class="set-section-header">
      <div class="set-section-title">Appearance</div>
      <div class="set-section-desc">Customize your experience</div>
    </div>
    <div class="set-radio-group">
      <div class="set-radio selected" onclick="selectTheme('dark',this)">
        <div class="set-radio-circle"></div>
        <div class="set-radio-label">Dark Mode</div>
      </div>
      <div class="set-radio" onclick="selectTheme('light',this)">
        <div class="set-radio-circle"></div>
        <div class="set-radio-label">Light Mode</div>
      </div>
      <div class="set-radio" onclick="selectTheme('auto',this)">
        <div class="set-radio-circle"></div>
        <div class="set-radio-label">Auto (System)</div>
      </div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Font Size</div>
        <div class="set-item-desc">Adjust text size</div>
      </div>
      <select class="set-select" id="selectFontSize" onchange="changeSetting('fontSize',this.value)">
        <option value="small">Small</option>
        <option value="medium" selected>Medium</option>
        <option value="large">Large</option>
      </select>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Language</div>
        <div class="set-item-desc">Choose your language</div>
      </div>
      <select class="set-select" id="selectLanguage" onchange="changeSetting('language',this.value)">
        <option value="en" selected>English</option>
        <option value="es">Español</option>
        <option value="fr">Français</option>
        <option value="zh">中文</option>
        <option value="ar">العربية</option>
      </select>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Compact Mode</div>
        <div class="set-item-desc">Show more content on screen</div>
      </div>
      <div class="set-toggle" id="toggleCompact" onclick="toggleSetting('compact')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
  </div>

  <!-- DATA & PRIVACY SECTION -->
  <div class="set-section" data-section="data">
    <div class="set-section-header">
      <div class="set-section-title">Data & Privacy</div>
      <div class="set-section-desc">Manage your data</div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Download Your Data</div>
        <div class="set-item-desc">Get a copy of your information</div>
      </div>
      <button class="set-btn" onclick="openSetModal('downloadData')">Request</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Search History</div>
        <div class="set-item-desc">View and clear your search history</div>
      </div>
      <button class="set-btn" onclick="openSetModal('searchHistory')">Manage</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Connected Apps</div>
        <div class="set-item-desc" id="setConnectedApps">0 apps connected</div>
      </div>
      <button class="set-btn" onclick="openSetModal('connectedApps')">Manage</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Ad Preferences</div>
        <div class="set-item-desc">Control personalized ads</div>
      </div>
      <button class="set-btn" onclick="openSetModal('adPreferences')">Manage</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Analytics</div>
        <div class="set-item-desc">Help us improve with usage data</div>
      </div>
      <div class="set-toggle active" id="toggleAnalytics" onclick="toggleSetting('analytics')">
        <div class="set-toggle-knob"></div>
      </div>
    </div>
  </div>

  <!-- SUPPORT SECTION -->
  <div class="set-section" data-section="support">
    <div class="set-section-header">
      <div class="set-section-title">Support</div>
      <div class="set-section-desc">Get help and information</div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Help Center</div>
        <div class="set-item-desc">FAQs and guides</div>
      </div>
      <button class="set-btn" onclick="window.open('https://help.example.com')">Visit</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Report a Problem</div>
        <div class="set-item-desc">Let us know about issues</div>
      </div>
      <button class="set-btn" onclick="openSetModal('reportProblem')">Report</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Terms & Privacy Policy</div>
        <div class="set-item-desc">Read our policies</div>
      </div>
      <button class="set-btn" onclick="window.open('/terms.html')">View</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">About</div>
        <div class="set-item-desc">v1.0.0 • Build 2026.02.18</div>
      </div>
    </div>
  </div>

  <!-- DANGER ZONE -->
  <div class="set-danger" data-section="danger">
    <div class="set-section-header">
      <div class="set-section-title">Danger Zone</div>
      <div class="set-section-desc">Irreversible account actions</div>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Deactivate Account</div>
        <div class="set-item-desc">Temporarily disable your account</div>
      </div>
      <button class="set-btn danger" onclick="openSetModal('deactivate')">Deactivate</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Delete Account</div>
        <div class="set-item-desc">Permanently delete all your data</div>
      </div>
      <button class="set-btn danger" onclick="openSetModal('delete')">Delete</button>
    </div>
    <div class="set-item">
      <div class="set-item-info">
        <div class="set-item-label">Logout</div>
        <div class="set-item-desc">End current session</div>
      </div>
      <button class="set-btn danger" onclick="logout()">Logout</button>
    </div>
  </div>

</div>

<!-- SAVE BAR -->
<div id="setSaveBar" class="set-save-bar">
  <div class="set-save-bar-text">You have unsaved changes</div>
  <div class="set-save-bar-btns">
    <button class="set-btn" onclick="discardChanges()">Discard</button>
    <button class="set-btn primary" onclick="saveAllSettings()">Save Changes</button>
  </div>
</div>

<!-- MODAL -->
<div id="setModal" class="set-modal">
  <div class="set-modal-content" id="setModalContent"></div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
// Settings state
const settingsState = {
  private: false,
  activity: true,
  postVisibility: 'public',
  researchVisibility: 'public',
  messagePrivacy: 'everyone',
  tagPrivacy: 'everyone',
  followersVisibility: 'everyone',
  readReceipts: true,
  typingIndicators: true,
  messageRequests: true,
  groupInvites: 'everyone',
  push: true,
  likes: true,
  comments: true,
  followers: true,
  dms: true,
  mentions: true,
  bounties: true,
  events: true,
  research: true,
  email: false,
  loginAlerts: true,
  theme: 'dark',
  fontSize: 'medium',
  language: 'en',
  compact: false,
  analytics: true,
  changed: false
};

// Show save bar
function showSaveBar() {
  settingsState.changed = true;
  document.getElementById('setSaveBar').classList.add('visible');
}

// Toggle setting
function toggleSetting(key) {
  const toggle = document.getElementById('toggle' + key.charAt(0).toUpperCase() + key.slice(1));
  if (!toggle) return;
  
  toggle.classList.toggle('active');
  settingsState[key] = toggle.classList.contains('active');
  showSaveBar();
}

// Change setting
function changeSetting(key, value) {
  settingsState[key] = value;
  showSaveBar();
}

// Select theme
function selectTheme(theme, el) {
  el.parentElement.querySelectorAll('.set-radio').forEach(r => r.classList.remove('selected'));
  el.classList.add('selected');
  settingsState.theme = theme;
  showSaveBar();
}

// Handle profile pic change
function handleProfilePicChange(input) {
  if (input.files && input.files[0]) {
    const reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('setProfilePic').src = e.target.result;
      showSaveBar();
    };
    reader.readAsDataURL(input.files[0]);
  }
}

// Remove profile pic
function removeProfilePic() {
  if (confirm('Remove your profile picture?')) {
    document.getElementById('setProfilePic').src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80"><rect fill="%23333" width="80" height="80"/><text x="50%" y="50%" text-anchor="middle" dy=".3em" fill="%23fff" font-size="30" font-family="sans-serif">IM</text></svg>';
    showSaveBar();
  }
}

// Share profile
function shareProfile() {
  const url = 'https://app.com/@israelmark';
  if (navigator.share) {
    navigator.share({ title: 'Israel Mark', text: 'Check out my profile', url });
  } else {
    navigator.clipboard.writeText(url).then(() => alert('Profile link copied!'));
  }
}

// Open modal
function opeSetnModal(type) {
  const modal = document.getElementById('setModal');
  const content = document.getElementById('setModalContent');
  
  const modals = {
    editProfile: `
      <div class="set-modal-title">Edit Profile</div>
      <div class="set-modal-desc">Update your profile information</div>
      <input type="text" class="set-input" placeholder="Name" value="Israel Mark">
      <input type="text" class="set-input" placeholder="Username" value="@israelmark">
      <textarea class="set-input" style="min-height:100px;resize:vertical;" placeholder="Bio">CS student researching ML & networks</textarea>
      <div class="set-modal-btns">
        <button class="set-btn" onclick="closeSetModal()">Cancel</button>
        <button class="set-btn primary" onclick="alert('Profile updated!');closeModal();showSaveBar()">Save</button>
      </div>
    `,
    changeEmail: `
      <div class="set-modal-title">Change Email</div>
      <div class="set-modal-desc">Enter your new email address</div>
      <input type="email" class="set-input" placeholder="New email address">
      <input type="password" class="set-input" placeholder="Current password">
      <div class="set-modal-btns">
        <button class="set-btn" onclick="closeSetModal()">Cancel</button>
        <button class="set-btn primary" onclick="alert('Email change request sent. Check your inbox.');closeModal()">Continue</button>
      </div>
    `,
    changeUsername: `
      <div class="set-modal-title">Change Username</div>
      <div class="set-modal-desc">Choose a new username</div>
      <input type="text" class="set-input" placeholder="New username" value="israelmark">
      <div style="font-size:12px;color:#666;margin-top:8px;">Username can only be changed once every 30 days</div>
      <div class="set-modal-btns">
        <button class="set-btn" onclick="closeSetModal()">Cancel</button>
        <button class="set-btn primary" onclick="alert('Username updated!');closeModal();showSaveBar()">Save</button>
      </div>
    `,
    changeBio: `
      <div class="set-modal-title">Edit Bio</div>
      <div class="set-modal-desc">Tell people about yourself</div>
      <textarea class="set-input" style="min-height:120px;resize:vertical;" placeholder="Bio" maxlength="200">CS student researching ML & networks</textarea>
      <div style="font-size:12px;color:#666;margin-top:8px;text-align:right;">0 / 200</div>
      <div class="set-modal-btns">
        <button class="set-btn" onclick="closeSetModal()">Cancel</button>
        <button class="set-btn primary" onclick="alert('Bio updated!');closeModal();showSaveBar()">Save</button>
      </div>
    `,
    changeUniversity: `
      <div class="set-modal-title">Change University</div>
      <div class="set-modal-desc">Select your university</div>
      <select class="set-input">
        <option>Lagos State University (LASU)</option>
        <option>University of Lagos (UNILAG)</option>
        <option>Obafemi Awolowo University (OAU)</option>
        <option>Federal University of Technology, Owerri (FUTO)</option>
        <option>Ahmadu Bello University (ABU)</option>
        <option>University of Benin (UNIBEN)</option>
      </select>
      <div class="set-modal-btns">
        <button class="set-btn" onclick="closeSetModal()">Cancel</button>
        <button class="set-btn primary" onclick="alert('University updated!');closeModal();showSaveBar()">Save</button>
      </div>
    `,
    changeDepartment: `
      <div class="set-modal-title">Change Department</div>
      <div class="set-modal-desc">Select your department</div>
      <select class="set-input">
        <option>Computer Science</option>
        <option>Electrical Engineering</option>
        <option>Mechanical Engineering</option>
        <option>Mathematics</option>
        <option>Physics</option>
        <option>Chemistry</option>
        <option>Biology</option>
        <option>Biomedical Engineering</option>
      </select>
      <div class="set-modal-btns">
        <button class="set-btn" onclick="closeSetModal()">Cancel</button>
        <button class="set-btn primary" onclick="alert('Department updated!');closeModal();showSaveBar()">Save</button>
      </div>
    `,
    requestVerification: `
      <div class="set-modal-title">Request Verification</div>
      <div class="set-modal-desc">Verified accounts have a blue checkmark badge. To be eligible, you must:</div>
      <div style="font-size:13px;color:#888;line-height:1.7;margin:16px 0;">
        • Have a complete profile with photo, bio, and university<br>
        • Be an active researcher or academic<br>
        • Have published research or significant academic contributions<br>
        • Follow our community guidelines
      </div>
      <input type="text" class="set-input" placeholder="Link to your research profile">
      <textarea class="set-input" style="min-height:100px;resize:vertical;margin-bottom:0;" placeholder="Tell us why you should be verified"></textarea>
      <div class="set-modal-btns">
        <button class="set-btn" onclick="closeSetModal()">Cancel</button>
        <button class="set-btn primary" onclick="alert('Verification request submitted! We\\'ll review it within 7 days.');closeModal()">Submit Request</button>
      </div>
    `,
    blockedAccounts: `
      <div class="set-modal-title">Blocked Accounts</div>
      <div class="set-modal-desc">Manage blocked users</div>
      <div style="margin:16px 0;">
        <div style="display:flex;align-items:center;justify-content:space-between;padding:12px;background:#111;border:1px solid#1a1a1a;border-radius:8px;margin-bottom:8px;">
          <div>
            <div style="font-size:14px;font-weight:700;">@user1</div>
            <div style="font-size:12px;color:#555;">Blocked 2 weeks ago</div>
          </div>
          <button class="set-btn" onclick="alert('Unblocked @user1');this.parentElement.remove()">Unblock</button>
        </div>
        <div style="display:flex;align-items:center;justify-content:space-between;padding:12px;background:#111;border:1px solid#1a1a1a;border-radius:8px;margin-bottom:8px;">
          <div>
            <div style="font-size:14px;font-weight:700;">@user2</div>
            <div style="font-size:12px;color:#555;">Blocked 1 month ago</div>
          </div>
          <button class="set-btn" onclick="alert('Unblocked @user2');this.parentElement.remove()">Unblock</button>
        </div>
        <div style="display:flex;align-items:center;justify-content:space-between;padding:12px;background:#111;border:1px solid#1a1a1a;border-radius:8px;">
          <div>
            <div style="font-size:14px;font-weight:700;">@user3</div>
            <div style="font-size:12px;color:#555;">Blocked 3 months ago</div>
          </div>
          <button class="set-btn" onclick="alert('Unblocked @user3');this.parentElement.remove()">Unblock</button>
        </div>
      </div>
      <button class="set-btn" style="width:100%;" onclick="closeSetModal()">Close</button>
    `,
    changePassword: `
      <div class="set-modal-title">Change Password</div>
      <div class="set-modal-desc">Enter your current and new password</div>
      <input type="password" class="set-input" placeholder="Current password">
      <input type="password" class="set-input" placeholder="New password">
      <input type="password" class="set-input" placeholder="Confirm new password">
      <div class="set-modal-btns">
        <button class="set-btn" onclick="closeSetModal()">Cancel</button>
        <button class="set-btn primary" onclick="alert('Password changed successfully!');closeModal()">Change Password</button>
      </div>
    `,
    setup2FA: `
      <div class="set-modal-title">Two-Factor Authentication</div>
      <div class="set-modal-desc">Add an extra layer of security to your account</div>
      <div style="font-size:13px;color:#888;line-height:1.7;margin:16px 0;">
        When enabled, you'll need to enter a code from your authenticator app every time you log in.
      </div>
      <select class="set-input">
        <option>Authenticator App (Recommended)</option>
        <option>SMS</option>
        <option>Email</option>
      </select>
      <div class="set-modal-btns">
        <button class="set-btn" onclick="closeSetModal()">Cancel</button>
        <button class="set-btn primary" onclick="alert('2FA setup started. Follow the instructions sent to your email.');closeModal()">Continue</button>
      </div>
    `,
    activeSessions: `
      <div class="set-modal-title">Active Sessions</div>
      <div class="set-modal-desc">Devices currently logged in to your account</div>
      <div style="margin:16px 0;">
        <div style="padding:12px;background:#111;border:1px solid#1a1a1a;border-radius:8px;margin-bottom:8px;">
          <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:8px;">
            <div>
              <div style="font-size:14px;font-weight:700;">💻 Chrome on MacBook Pro</div>
              <div style="font-size:12px;color:#555;margin-top:4px;">Lagos, Nigeria · Active now</div>
            </div>
            <span style="font-size:10px;padding:3px 8px;background:#22c55e;color:#000;border-radius:12px;font-weight:700;">CURRENT</span>
          </div>
        </div>
        <div style="padding:12px;background:#111;border:1px solid#1a1a1a;border-radius:8px;">
          <div style="display:flex;justify-content:space-between;align-items:start;">
            <div style="flex:1;">
              <div style="font-size:14px;font-weight:700;">📱 Safari on iPhone</div>
              <div style="font-size:12px;color:#555;margin-top:4px;">Lagos, Nigeria · 2 hours ago</div>
            </div>
            <button class="set-btn danger" style="padding:6px 12px;font-size:11px;" onclick="alert('Session ended');this.parentElement.parentElement.remove()">End</button>
          </div>
        </div>
      </div>
      <button class="set-btn danger" style="width:100%;margin-bottom:10px;" onclick="if(confirm('End all other sessions?')){alert('All other sessions ended');closeModal()}">End All Other Sessions</button>
      <button class="set-btn" style="width:100%;" onclick="closeSetModal()">Close</button>
    `,
    downloadData: `
      <div class="set-modal-title">Download Your Data</div>
      <div class="set-modal-desc">Request a copy of your information</div>
      <div style="font-size:13px;color:#888;line-height:1.7;margin:16px 0;">
        Your data archive will include:<br>
        • Profile information<br>
        • Posts and comments<br>
        • Research papers<br>
        • Messages<br>
        • Activity history<br><br>
        We'll email you a download link within 48 hours.
      </div>
      <input type="password" class="set-input" placeholder="Enter password to confirm">
      <div class="set-modal-btns">
        <button class="set-btn" onclick="closeSetModal()">Cancel</button>
        <button class="set-btn primary" onclick="alert('Data download request submitted. Check your email in 48 hours.');closeModal()">Request Download</button>
      </div>
    `,
    searchHistory: `
      <div class="set-modal-title">Search History</div>
      <div class="set-modal-desc">Recent searches</div>
      <div style="margin:16px 0;max-height:300px;overflow-y:auto;">
        <div style="padding:10px;background:#111;border:1px solid#1a1a1a;border-radius:8px;margin-bottom:6px;display:flex;justify-content:space-between;align-items:center;">
          <span style="font-size:13px;">machine learning research</span>
          <button onclick="this.parentElement.remove()" style="background:none;border:none;color:#555;cursor:pointer;font-size:18px;">×</button>
        </div>
        <div style="padding:10px;background:#111;border:1px solid#1a1a1a;border-radius:8px;margin-bottom:6px;display:flex;justify-content:space-between;align-items:center;">
          <span style="font-size:13px;">quantum computing papers</span>
          <button onclick="this.parentElement.remove()" style="background:none;border:none;color:#555;cursor:pointer;font-size:18px;">×</button>
        </div>
        <div style="padding:10px;background:#111;border:1px solid#1a1a1a;border-radius:8px;margin-bottom:6px;display:flex;justify-content:space-between;align-items:center;">
          <span style="font-size:13px;">@ada</span>
          <button onclick="this.parentElement.remove()" style="background:none;border:none;color:#555;cursor:pointer;font-size:18px;">×</button>
        </div>
      </div>
      <button class="set-btn danger" style="width:100%;margin-bottom:10px;" onclick="if(confirm('Clear all search history?')){alert('Search history cleared');closeModal()}">Clear All</button>
      <button class="set-btn" style="width:100%;" onclick="closeSetModal()">Close</button>
    `,
    connectedApps: `
      <div class="set-modal-title">Connected Apps</div>
      <div class="set-modal-desc">Apps with access to your account</div>
      <div style="padding:40px 20px;text-align:center;color:#555;">
        No apps connected to your account
      </div>
      <button class="set-btn" style="width:100%;" onclick="closeSetModal()">Close</button>
    `,
    adPreferences: `
      <div class="set-modal-title">Ad Preferences</div>
      <div class="set-modal-desc">Control how we personalize ads</div>
      <div style="margin:16px 0;">
        <div style="display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid#111;">
          <div>
            <div style="font-size:14px;font-weight:700;margin-bottom:3px;">Personalized Ads</div>
            <div style="font-size:12px;color:#555;">Show ads based on your activity</div>
          </div>
          <div class="set-toggle active"><div class="set-toggle-knob"></div></div>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;padding:12px 0;">
          <div>
            <div style="font-size:14px;font-weight:700;margin-bottom:3px;">Ad Tracking</div>
            <div style="font-size:12px;color:#555;">Allow advertisers to track performance</div>
          </div>
          <div class="set-toggle"><div class="set-toggle-knob"></div></div>
        </div>
      </div>
      <button class="set-btn primary" style="width:100%;margin-bottom:10px;" onclick="alert('Ad preferences saved');closeModal()">Save</button>
      <button class="set-btn" style="width:100%;" onclick="closeSetModal()">Close</button>
    `,
    reportProblem: `
      <div class="set-modal-title">Report a Problem</div>
      <div class="set-modal-desc">Let us know what's wrong</div>
      <select class="set-input">
        <option>Select issue type</option>
        <option>Bug or technical issue</option>
        <option>Feature request</option>
        <option>Harassment or abuse</option>
        <option>Spam</option>
        <option>Other</option>
      </select>
      <textarea class="set-input" style="min-height:120px;resize:vertical;margin-bottom:0;" placeholder="Describe the problem in detail"></textarea>
      <div class="set-modal-btns">
        <button class="set-btn" onclick="closeSetModal()">Cancel</button>
        <button class="set-btn primary" onclick="alert('Problem report submitted. We\\'ll investigate and get back to you.');closeModal()">Submit</button>
      </div>
    `,
    deactivate: `
      <div class="set-modal-title">Deactivate Account</div>
      <div class="set-modal-desc">Temporarily disable your account</div>
      <div style="font-size:13px;color:#888;line-height:1.7;margin:16px 0;">
        Your profile will be hidden and you won't be able to log in. You can reactivate your account anytime by logging back in.<br><br>
        This action is reversible.
      </div>
      <input type="password" class="set-input" placeholder="Enter password to confirm">
      <div class="set-modal-btns">
        <button class="set-btn" onclick="closeSetModal()">Cancel</button>
        <button class="set-btn danger" onclick="if(confirm('Are you sure you want to deactivate?')){alert('Account deactivated');closeModal()}">Deactivate Account</button>
      </div>
    `,
    delete: `
      <div class="set-modal-title">Delete Account</div>
      <div class="set-modal-desc">Permanently delete your account and all data</div>
      <div style="font-size:13px;color:#ef4444;line-height:1.7;margin:16px 0;">
        ⚠️ <strong>This action cannot be undone.</strong><br><br>
        All your data will be permanently deleted including:<br>
        • Profile and posts<br>
        • Research papers<br>
        • Messages<br>
        • Comments and likes<br>
        • All activity history
      </div>
      <input type="text" class="set-input" placeholder="Type DELETE to confirm">
      <input type="password" class="set-input" placeholder="Enter password">
      <div class="set-modal-btns">
        <button class="set-btn" onclick="closeSetModal()">Cancel</button>
        <button class="set-btn danger" onclick="alert('To delete your account, contact support@example.com');closeModal()">Delete Account</button>
      </div>
    `
  };
  
  content.innerHTML = modals[type] || '<div class="set-modal-title">Coming soon</div><button class="set-btn" style="width:100%;margin-top:20px;" onclick="closeSetModal()">Close</button>';
  modal.classList.add('active');
}

// Close modal
function closeSetModal() {
  document.getElementById('setModal').classList.remove('active');
}

// Logout

// Save all settings
function saveAllSettings() {
  // TODO: Send settingsState to backend
  console.log('Saving settings:', settingsState);
  alert('Settings saved successfully!');
  document.getElementById('setSaveBar').classList.remove('visible');
  settingsState.changed = false;
}

// Discard changes
function discardChanges() {
  if (confirm('Discard all unsaved changes?')) {
    location.reload();
  }
}

// Search filter
function setSearchFilter(query) {
  const q = query.toLowerCase().trim();
  document.querySelectorAll('.set-section').forEach(section => {
    if (!q) {
      section.style.display = 'block';
      return;
    }
    const text = section.textContent.toLowerCase();
    section.style.display = text.includes(q) ? 'block' : 'none';
  });
}

// Close modal on outside click
document.getElementById('setModal').addEventListener('click', function(e) {
  if (e.target === this) closeModal();
});
</script>

</section>

  
  <section style="display:none" id="profile" class="profile">
  <style>
  .user-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 20px;
    border-bottom: 1px solid #1a1a1a;
    transition: background 0.2s;
    cursor: pointer;
  }

  .user-item:hover {
    background: rgba(255,255,255,0.04);
  }

  .user-item img {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    object-fit: cover;
    border: 1px solid #333;
  }

  .user-item-info {
    flex: 1;
  }

  .user-item-name {
    font-size: 14px;
    font-weight: 600;
    color: #fff;
  }

  .user-item-handle {
    font-size: 12px;
    color: #666;
    margin-top: 2px;
  }

  .user-item-dept {
    font-size: 11px;
    color: #444;
    margin-top: 2px;
  }

  .user-follow-btn {
    padding: 6px 14px;
    background: transparent;
    border: 1px solid #333;
    border-radius: 6px;
    color: #fff;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }

  .user-follow-btn:hover {
    background: #fff;
    color: #000;
    border-color: #fff;
  }

  .user-follow-btn.following {
    background: #fff;
    color: #000;
    border-color: #fff;
  }
    .profile {
      position: fixed;
      inset: 0;
      background: #000;
      color: #fff;
      overflow-y: auto;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    }/* Top Bar */
.profile-header {
  position: sticky;
  top: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  background: rgba(0,0,0,0.9);
  backdrop-filter: blur(16px);
  border-bottom: 1px solid #111;
  z-index: 10;
}

.profile-title { font-size: 18px; font-weight: 600; }

.close-btn {
  width: 36px; height: 36px;
  border-radius: 50%;
  border: 1px solid #222;
  background: #111;
  color: #fff;
  cursor: pointer;
  transition: 0.2s;
}

.close-btn:hover { background: #fff; color: #000; }

/* Cover */
.cover {
  height: 180px;
  background: linear-gradient(180deg, #111, #000);
}

/* Avatar */
.avatar-wrap {
  display: flex;
  justify-content: center;
  margin-top: -60px;
}

.avatar {
  width: 120px; height: 120px;
  border-radius: 50%;
  border: 4px solid #000;
  object-fit: cover;
  box-shadow: 0 0 0 2px #222;
}

/* Info */
.info { text-align: center; padding: 12px 20px 0; }

.name { font-size: 24px; font-weight: 700; }
.handle { color: #888; margin-top: 4px; font-size: 14px; }

.bio {
  margin-top: 12px;
  color: charteuse;
  line-height: 1.6;
  font-size: 14px;
}

/* Stats */
.stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
  padding: 20px;
  border-top: 1px solid #111;
  border-bottom: 1px solid #111;
  margin-top: 20px;
  text-align: center;
}

.stat-num { font-weight: 700; font-size: 18px; }
.stat-label { font-size: 11px; color: #777; margin-top: 4px; }

/* Actions */
.actions {
  display: flex;
  gap: 10px;
  padding: 16px 20px;
}

.btn {
  flex: 1;
  padding: 10px;
  border-radius: 999px;
  border: 1px solid #222;
  background: #111;
  color: #fff;
  cursor: pointer;
  transition: 0.2s;
  font-size: 14px;
}

.btn:hover { background: #fff; color: #000; }

/* Tabs */
.tabs {
  display: flex;
  border-bottom: 1px solid #111;
  margin-top: 10px;
}

.tab {
  flex: 1;
  text-align: center;
  padding: 14px;
  font-size: 13px;
  color: #777;
  cursor: pointer;
}

.tab.active {
  color: #fff;
  border-bottom: 2px solid #fff;
  font-weight: 600;
}

/* Grid */
.grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 2px;
  padding-bottom: 60px;
}

.grid img {
  width: 100%;
  aspect-ratio: 1;
  object-fit: cover;
  transition: 0.3s;
}

.grid img:hover { filter: grayscale(0%); opacity: 0.9; }

/* Mobile */
@media (max-width: 600px) {
  .stats { grid-template-columns: repeat(2, 1fr); }
  .grid { grid-template-columns: repeat(2, 1fr); }
}

  </style>  <div class="profile-header">
    <div class="profile-title">Profile</div>
    <button style="display:none" class="close-btn" onclick="document.getElementById('profile').style.display='none'">×</button>
  </div>  <div class="cover"></div>  
  <div class="avatar-wrap">
    <img id="avatar" src="img2" class="avatar" />
  </div>  
  <div id="info" class="info">
    <div class="name">Oshifala Israel Omobayode</div>
    <div class="handle">@Montreal_protocol</div>
    <div class="bio">Computer Science • Student • Stanford Bridge • Building academic collaboration tools.</div>
  </div>
  <div id="userListModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.85); backdrop-filter:blur(20px); z-index:99999; align-items:center; justify-content:center;">
  <div style="background:#111; border:1px solid #222; border-radius:12px; width:90%; max-width:400px; max-height:80vh; display:flex; flex-direction:column; overflow:hidden;">
    
    <!-- Header -->
    <div style="display:flex; justify-content:space-between; align-items:center; padding:16px 20px; border-bottom:1px solid #222;">
      <div id="modalTitle" style="font-size:16px; font-weight:600;"></div>
      <button onclick="closeUserModal()" style="background:transparent; border:none; color:#fff; font-size:22px; cursor:pointer;">×</button>
    </div>

    <!-- User List — backend fills this -->
    <div id="userListContent" style="overflow-y:auto; flex:1;text-align:left">
  <div class="user-item">
    <img src="img1" alt="profile">
    <div class="user-item-info">
      <div class="user-item-name">Ada James</div>
      <div class="user-item-handle">@ada.james</div>
      <div class="user-item-dept">Electrical Engineering · UNILAG</div>
    </div>
    <button class="user-follow-btn">Follow</button>
  </div>

  <div class="user-item">
    <img src="img2" alt="profile">
    <div class="user-item-info">
      <div class="user-item-name">Samuel Obi</div>
      <div class="user-item-handle">@samuel.obi</div>
      <div class="user-item-dept">Mathematics · OAU</div>
    </div>
    <button class="user-follow-btn following">Following</button>
  </div>

  <div class="user-item">
    <img src="img3" alt="profile">
    <div class="user-item-info">
      <div class="user-item-name">Fatima Bello</div>
      <div class="user-item-handle">@fatima.bello</div>
      <div class="user-item-dept">Computer Science · ABU</div>
    </div>
    <button class="user-follow-btn">Follow</button>
  </div>

  <div class="user-item">
    <img src="img1" alt="profile">
    <div class="user-item-info">
      <div class="user-item-name">Chidi Nwosu</div>
      <div class="user-item-handle">@chidi.nwosu</div>
      <div class="user-item-dept">Physics · FUTO</div>
    </div>
    <button class="user-follow-btn following">Following</button>
  </div>

  <div class="user-item">
    <img src="img2" alt="profile">
    <div class="user-item-info">
      <div class="user-item-name">Ngozi Eze</div>
      <div class="user-item-handle">@ngozi.eze</div>
      <div class="user-item-dept">Biochemistry · UI</div>
    </div>
    <button class="user-follow-btn">Follow</button>
  </div>

  <div class="user-item">
    <img src="img3" alt="profile">
    <div class="user-item-info">
      <div class="user-item-name">Tunde Adeyemi</div>
      <div class="user-item-handle">@tunde.adeyemi</div>
      <div class="user-item-dept">Mechanical Engineering · LASU</div>
    </div>
    <button class="user-follow-btn">Follow</button>
  </div>

  <div class="user-item">
    <img src="img1" alt="profile">
    <div class="user-item-info">
      <div class="user-item-name">Amaka Okonkwo</div>
      <div class="user-item-handle">@amaka.okonkwo</div>
      <div class="user-item-dept">Law · UNIBEN</div>
    </div>
    <button class="user-follow-btn following">Following</button>
  </div>

  <div class="user-item">
    <img src="img2" alt="profile">
    <div class="user-item-info">
      <div class="user-item-name">Emeka Dike</div>
      <div class="user-item-handle">@emeka.dike</div>
      <div class="user-item-dept">Medicine · UNILAG</div>
    </div>
    <button class="user-follow-btn">Follow</button>
  </div>

  <div class="user-item">
    <img src="img3" alt="profile">
    <div class="user-item-info">
      <div class="user-item-name">Yetunde Lawal</div>
      <div class="user-item-handle">@yetunde.lawal</div>
      <div class="user-item-dept">Economics · OAU</div>
    </div>
    <button class="user-follow-btn">Follow</button>
  </div>

  <div class="user-item">
    <img src="img1" alt="profile">
    <div class="user-item-info">
      <div class="user-item-name">Biodun Ojo</div>
      <div class="user-item-handle">@biodun.ojo</div>
      <div class="user-item-dept">Architecture · UNILAG</div>
    </div>
    <button class="user-follow-btn following">Following</button>
  </div>

  <!-- Items injected here by backend response -->
</div>
    
    <!-- Load More -->
    <div style="padding:12px 20px; border-top:1px solid #222;">
      <button id="loadMoreBtn" style="background:transparent; border:1px solid #333; border-radius:6px; color:#fff; padding:10px 0; font-size:13px; cursor:pointer; width:100%;">
        Load More
      </button>
    </div>

  </div>
</div>
  <div id="stats"  class="stats">
  <div onclick="openUserModal('following')" style="cursor:pointer;">
    <div class="stat-num">7.7K</div>
    <div class="stat-label">Following</div>
  </div>
  <div onclick="openUserModal('followers')" style="cursor:pointer;">
    <div class="stat-num">6.4K</div>
    <div class="stat-label">Followers</div>
  </div>
  <div>
    <div class="stat-num">38K</div>
    <div class="stat-label">Likes</div>
  </div>
  <div>
    <div class="stat-num">5.8K</div>
    <div class="stat-label">Posts</div>
  </div>
</div>
  <div class="actions">
    <button class="btn" onclick="document.getElementById('profile').style.display='none',document.getElementById('Settings').style.display='block';">Edit Profile</button>
    <button class="btn" onclick="shareProfile()">Share</button>
  </div> 
 <style>
  .tabs {
    display: flex;
    border-bottom: 1px solid #222;
    margin-bottom: 0;
    position: sticky;
    top: 0;
    background: #000;
    z-index: 10;
  }

  .tab {
    flex: 1;
    text-align: center;
    padding: 14px 0;
    font-size: 13px;
    font-weight: 500;
    color: #666;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
  }

  .tab.active {
    color: #fff;
    border-bottom-color: #fff;
  }

  /* Tab content containers */
  .tab-content { display: none; }
  .tab-content.active { display: block; }

  /* Image Grid */
  .grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2px;
  }

  .grid-post {
    aspect-ratio: 1;
    overflow: hidden;
    cursor: pointer;
    position: relative;
    background: #111;
  }

  .grid-post img,
  .grid-post video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
  }

  .grid-post:hover img,
  .grid-post:hover video {
    transform: scale(1.05);
  }

  /* Text/Poll/Bounty/Event cards in feed */
  .post-feed-card {
    border-bottom: 1px solid #1a1a1a;
    padding: 16px;
    cursor: pointer;
    transition: background 0.2s;
  }

  .post-feed-card:hover {
    background: rgba(255,255,255,0.03);
  }

  .post-feed-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
  }

  .post-feed-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    object-fit: cover;
    border: 1px solid #333;
  }

  .post-feed-name {
    font-size: 13px;
    font-weight: 600;
  }

  .post-feed-time {
    font-size: 11px;
    color: #666;
  }

  .post-feed-text {
    font-size: 14px;
    line-height: 1.6;
    color: #ccc;
    margin-bottom: 10px;
  }

  .post-feed-tag {
    display: inline-block;
    padding: 3px 8px;
    border: 1px solid #333;
    border-radius: 4px;
    font-size: 11px;
    color: #999;
    margin-right: 6px;
    margin-bottom: 6px;
  }

  .post-feed-stats {
    display: flex;
    gap: 16px;
    font-size: 12px;
    color: #666;
    margin-top: 10px;
  }

  /* Poll card mini */
  .mini-poll-option {
    padding: 8px 12px;
    border: 1px solid #222;
    border-radius: 4px;
    font-size: 12px;
    color: #999;
    margin-bottom: 6px;
    position: relative;
    overflow: hidden;
  }

  .mini-poll-bar {
    position: absolute;
    left: 0; top: 0; height: 100%;
    background: rgba(255,255,255,0.07);
  }

  .mini-poll-text {
    position: relative;
    z-index: 1;
    display: flex;
    justify-content: space-between;
  }

  /* Bounty card mini */
  .bounty-reward {
    display: inline-block;
    padding: 4px 10px;
    background: #fff;
    color: #000;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 700;
    margin-top: 8px;
  }

  /* Event card mini */
  .event-date-mini {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    background: #fff;
    color: #000;
    border-radius: 4px;
    font-size: 10px;
    font-weight: 700;
    margin-right: 12px;
    float: left;
  }

  .event-date-mini span {
    font-size: 18px;
    line-height: 1;
  }

  /* Empty state */
  .empty-tab {
    text-align: center;
    padding: 60px 20px;
    color: #444;
    font-size: 14px;
  }

  /* ===== FULLSCREEN POST VIEWER ===== */
  #postViewer {
    display: none;
    position: fixed;
    inset: 0;
    background: #000;
    z-index: 99999;
    overflow-y: auto;
    flex-direction: column;
  }

  #postViewer.active {
    display: flex;
    flex-direction: column;
  }

  .viewer-header {
    position: sticky;
    top: 0;
    background: #000;
    border-bottom: 1px solid #222;
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    z-index: 10;
  }

  .viewer-back {
    background: transparent;
    border: none;
    color: #fff;
    font-size: 22px;
    cursor: pointer;
    padding: 0;
    line-height: 1;
  }

  .viewer-back-label {
    font-size: 15px;
    font-weight: 600;
  }

  /* Individual post in viewer */
  .viewer-post {
    border-bottom: 6px solid #111;
    padding-bottom: 20px;
  }

  .viewer-post-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 14px 16px;
  }

  .viewer-post-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 1px solid #333;
  }

  .viewer-post-name {
    font-size: 14px;
    font-weight: 600;
  }

  .viewer-post-time {
    font-size: 12px;
    color: #666;
  }

  .viewer-post-media {
    width: 100%;
    max-height: 500px;
    object-fit: contain;
    background: #0a0a0a;
    display: block;
  }

  .viewer-post-body {
    padding: 14px 16px;
  }

  .viewer-post-text {
    font-size: 15px;
    line-height: 1.7;
    color: #ddd;
    margin-bottom: 12px;
  }

  /* Viewer actions */
  .viewer-actions {
    display: flex;
    gap: 20px;
    padding: 12px 16px;
    border-top: 1px solid #111;
    border-bottom: 1px solid #111;
  }

  .viewer-action-btn {
    background: transparent;
    border: none;
    color: #999;
    font-size: 13px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 0;
    transition: color 0.2s;
  }

  .viewer-action-btn:hover,
  .viewer-action-btn.liked {
    color: #fff;
  }

  .viewer-action-btn svg {
    width: 20px;
    height: 20px;
    stroke: currentColor;
    fill: none;
    stroke-width: 2;
  }

  .viewer-action-btn.liked svg {
    fill: #fff;
  }

  /* Comments section */
  .viewer-comments {
    padding: 14px 16px;
  }

  .viewer-comments-title {
    font-size: 13px;
    font-weight: 600;
    color: #666;
    margin-bottom: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .comment-item {
    display: flex;
    gap: 10px;
    margin-bottom: 16px;
  }

  .comment-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    object-fit: cover;
    border: 1px solid #222;
    flex-shrink: 0;
  }

  .comment-body {
    flex: 1;
  }

  .comment-name {
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 3px;
  }

  .comment-text {
    font-size: 13px;
    color: #ccc;
    line-height: 1.5;
  }

  .comment-time {
    font-size: 11px;
    color: #555;
    margin-top: 4px;
  }

  /* Comment input */
  .comment-input-wrap {
    display: flex;
    gap: 10px;
    padding: 12px 16px;
    border-top: 1px solid #1a1a1a;
    position: sticky;
    bottom: 0;
    background: #000;
  }

  .comment-input {
    flex: 1;
    background: #111;
    border: 1px solid #333;
    border-radius: 20px;
    padding: 10px 16px;
    color: #fff;
    font-size: 13px;
    outline: none;
    transition: border 0.2s;
  }

  .comment-input:focus {
    border-color: #fff;
  }

  .comment-send {
    background: #fff;
    color: #000;
    border: none;
    border-radius: 50%;
    width: 38px;
    height: 38px;
    font-size: 16px;
    cursor: pointer;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
  }

  .comment-send:hover {
    background: #e6e6e6;
  }

  /* Viewer poll */
  .viewer-poll-option {
    padding: 12px 16px;
    border: 1px solid #222;
    border-radius: 6px;
    margin-bottom: 8px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: border-color 0.2s;
  }

  .viewer-poll-option:hover,
  .viewer-poll-option.selected {
    border-color: #fff;
  }

  .viewer-poll-bar {
    position: absolute;
    left: 0; top: 0; height: 100%;
    background: rgba(255,255,255,0.08);
    transition: width 0.4s;
  }

  .viewer-poll-content {
    position: relative;
    z-index: 1;
    display: flex;
    justify-content: space-between;
    font-size: 13px;
  }

  /* Research viewer */
  .research-abstract {
    font-size: 14px;
    color: #999;
    line-height: 1.8;
    padding: 14px 16px;
    border-top: 1px solid #111;
  }

  .research-authors {
    font-size: 13px;
    color: #666;
    padding: 0 16px 10px;
  }

  /* Bounty viewer */
  .viewer-bounty-reward {
    margin: 14px 16px;
    padding: 14px;
    border: 1px solid #333;
    border-radius: 6px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .viewer-bounty-amount {
    font-size: 22px;
    font-weight: 700;
  }

  .viewer-apply-btn {
    padding: 10px 24px;
    background: #fff;
    color: #000;
    border: none;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s;
  }

  .viewer-apply-btn:hover {
    background: #e6e6e6;
  }

  /* Event viewer */
  .viewer-event-info {
    margin: 14px 16px;
    padding: 14px;
    border: 1px solid #222;
    border-radius: 6px;
  }

  .viewer-event-row {
    font-size: 13px;
    color: #999;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .viewer-rsvp-btns {
    display: flex;
    gap: 8px;
    margin-top: 14px;
  }

  .viewer-rsvp-btn {
    flex: 1;
    padding: 10px;
    background: transparent;
    border: 1px solid #333;
    border-radius: 6px;
    color: #fff;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .viewer-rsvp-btn:hover,
  .viewer-rsvp-btn.active {
    background: #fff;
    color: #000;
    border-color: #fff;
  }
  .userpostedstuffs{ padding-bottom:250px;text-align:center;position:relative;top:45vh;display:flex;justify-content:center;}
</style>

<!-- TABS -->
<div class="tabs">
  <div class="tab active" data-tab="posts">Posts</div>
  <div class="tab" data-tab="research">Research</div>
  <div class="tab" data-tab="saved">Saved</div>
</div>

<!-- POSTS TAB -->
<div class="tab-content active" id="tab-posts">
    

  <!-- Image/Video Grid -->
  <div class="grid">
    <div class="grid-post" onclick="openViewer(0)">
      <img src="img1">
    </div>
    <div class="grid-post" onclick="openViewer(1)">
      <img src="img2">
    </div>
    <div class="grid-post" onclick="openViewer(2)">
      <img src="img3">
    </div>
  </div>

  <!-- Text Post -->
  <div class="post-feed-card" onclick="openViewer(3)">
    <div class="post-feed-header">
      <img src="img2" class="post-feed-avatar">
      <div>
        <div class="post-feed-name">Oshifala Israel</div>
        <div class="post-feed-time">2 hours ago</div>
      </div>
    </div>
    <div class="post-feed-text">
      Just finished implementing the neural network architecture for my research project. The accuracy is at 94.7% on the validation set. Really excited about where this is heading!
    </div>
    <div class="post-feed-stats">
      <span>♡ 342</span>
      <span>💬 28</span>
      <span>↗ 14</span>
    </div>
  </div>

  <!-- Poll Post -->
  <div class="post-feed-card" onclick="openViewer(4)">
    <div class="post-feed-header">
      <img src="img2" class="post-feed-avatar">
      <div>
        <div class="post-feed-name">Oshifala Israel</div>
        <div class="post-feed-time">1 day ago</div>
      </div>
    </div>
    <div class="post-feed-text">Which AI framework do you prefer for research?</div>
    <div class="mini-poll-option">
      <div class="mini-poll-bar" style="width:62%"></div>
      <div class="mini-poll-text"><span>PyTorch</span><span>62%</span></div>
    </div>
    <div class="mini-poll-option">
      <div class="mini-poll-bar" style="width:31%"></div>
      <div class="mini-poll-text"><span>TensorFlow</span><span>31%</span></div>
    </div>
    <div class="mini-poll-option">
      <div class="mini-poll-bar" style="width:7%"></div>
      <div class="mini-poll-text"><span>JAX</span><span>7%</span></div>
    </div>
    <div class="post-feed-stats" style="margin-top:10px">
      <span>1,204 votes · 2 days left</span>
    </div>
  </div>

  <!-- Bounty Post -->
  <div class="post-feed-card" onclick="openViewer(5)">
    <div class="post-feed-header">
      <img src="img2" class="post-feed-avatar">
      <div>
        <div class="post-feed-name">Oshifala Israel</div>
        <div class="post-feed-time">3 days ago</div>
      </div>
    </div>
    <div class="post-feed-text">Need someone to help train a sentiment analysis model on a custom dataset. Must have experience with NLP and Hugging Face.</div>
    <div class="bounty-reward">₦25,000 Reward</div>
    <div class="post-feed-stats" style="margin-top:10px">
      <span>12 applicants</span>
      <span>💬 8</span>
    </div>
  </div>

  <!-- Event Post -->
  <div class="post-feed-card" onclick="openViewer(6)">
    <div class="post-feed-header">
      <img src="img2" class="post-feed-avatar">
      <div>
        <div class="post-feed-name">Oshifala Israel</div>
        <div class="post-feed-time">5 days ago</div>
      </div>
    </div>
    <div style="display:flex; align-items:flex-start;">
      <div class="event-date-mini">
        FEB<span>20</span>
      </div>
      <div>
        <div class="post-feed-text" style="margin:0 0 4px 0; font-weight:600;">AI Research Meetup — Lagos</div>
        <div style="font-size:13px; color:#666;">14:00 · Yaba, Lagos</div>
      </div>
    </div>
    <div class="post-feed-stats" style="margin-top:10px; clear:both;">
      <span>89 attending</span>
      <span>234 interested</span>
    </div>
  </div>

</div>
<!--Research-->
<div class="tab-content" id="tab-research">

  <div class="post-feed-card" onclick="openViewer(7)">
    <div class="post-feed-header">
      <img src="img2" class="post-feed-avatar">
      <div>
        <div class="post-feed-name">Oshifala Israel</div>
        <div class="post-feed-time">Jan 28, 2026</div>
      </div>
    </div>
    <div class="post-feed-text" style="font-weight:600; color:#fff; font-size:15px;">
      Reinforcement Learning for Adaptive Network Routing in Low-Bandwidth Environments
    </div>
    <div class="post-feed-text">
      A novel RL-based approach to optimize network routing in constrained bandwidth scenarios common in developing regions...
    </div>
    <!-- Image -->
    <img src="img1" style="width:100%; border-radius:4px; margin:10px 0; object-fit:cover; max-height:280px; display:block;">
    <div>
      <span class="post-feed-tag">Machine Learning</span>
      <span class="post-feed-tag">Networking</span>
      <span class="post-feed-tag">RL</span>
    </div>
    <div class="post-feed-stats">
      <span>♡ 892</span>
      <span>💬 67</span>
      <span>↗ 145</span>
    </div>
  </div>

  <div class="post-feed-card" onclick="openViewer(8)">
    <div class="post-feed-header">
      <img src="img2" class="post-feed-avatar">
      <div>
        <div class="post-feed-name">Oshifala Israel</div>
        <div class="post-feed-time">Dec 12, 2025</div>
      </div>
    </div>
    <div class="post-feed-text" style="font-weight:600; color:#fff; font-size:15px;">
      Federated Learning on Mobile Devices: Challenges and Opportunities in Sub-Saharan Africa
    </div>
    <div class="post-feed-text">
      Investigating federated learning deployments on low-spec Android devices across Nigerian university campuses...
    </div>
    <!-- Video -->
    <video controls style="width:100%; border-radius:4px; margin:10px 0; max-height:280px; background:#0a0a0a; display:block;">
      <source src="" type="video/mp4">
    </video>
    <div>
      <span class="post-feed-tag">Federated Learning</span>
      <span class="post-feed-tag">Mobile</span>
      <span class="post-feed-tag">Africa</span>
    </div>
    <div class="post-feed-stats">
      <span>♡ 1.2K</span>
      <span>💬 94</span>
      <span>↗ 210</span>
    </div>
  </div>

</div>

<!-- SAVED TAB -->
<div class="tab-content" id="tab-saved">
  <div class="grid">
    <div class="grid-post" onclick="openViewer(0)"><img src="img3"></div>
    <div class="grid-post" onclick="openViewer(1)"><img src="img1"></div>
    <div class="grid-post" onclick="openViewer(2)"><img src="img2"></div>
  </div>
  <div class="post-feed-card" onclick="openViewer(7)">
    <div class="post-feed-header">
      <img src="img1" class="post-feed-avatar">
      <div>
        <div class="post-feed-name">Ada James</div>
        <div class="post-feed-time">Feb 9, 2026</div>
      </div>
    </div>
    <div class="post-feed-text" style="font-weight:600; color:#fff;">
      Quantum Computing Applications in Cryptography
    </div>
    <div class="post-feed-text">A survey of current and future applications of quantum algorithms in breaking and building cryptographic systems...</div>
    <div class="post-feed-stats">
      <span>♡ 2.3K</span>
      <span>💬 142</span>
    </div>
  </div>
</div>


<!-- ===== FULLSCREEN POST VIEWER ===== -->
<div id="postViewer">

  <div class="viewer-header">
    <button class="viewer-back" onclick="closeViewer()">←</button>
    <span class="viewer-back-label">Post</span>
  </div>

  <div id="viewerFeed">
    <!-- Posts injected here dynamically -->
  </div>

</div>


<script>
// ═══════════════════════════════════════════════════════════════
// PROFILE SECTION — COMPLETE SCRIPT
// ═══════════════════════════════════════════════════════════════

// ── TAB SWITCHING ──────────────────────────────────────────────
document.querySelectorAll('.tab[data-tab]').forEach(tab => {
  tab.addEventListener('click', function () {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    this.classList.add('active');
    const tabId = this.dataset.tab;
    document.getElementById('tab-' + tabId)?.classList.add('active');
    loadProfileTab(tabId);
  });
});

// ── LOAD PROFILE TAB ───────────────────────────────────────────
let profileSeenKeys   = { posts: [], research: [], saved: [] };
let profileScrollLock = { posts: false, research: false, saved: false };
let activeTab         = 'posts';

async function loadProfileTab(tab, append = false) {
  if (profileScrollLock[tab]) return;
  profileScrollLock[tab] = true;
  activeTab = tab;

  if (!append) profileSeenKeys[tab] = [];

  const res = await apiRequest({
    status:    'get_user_posts',
    tab:       tab,
    seen_keys: profileSeenKeys[tab]
  });

  profileScrollLock[tab] = false;

  const container = document.getElementById('tab-' + tab);
  if (!container) return;

  if (!res.posts || res.posts.length === 0) {
    if (!append) {
      const msgs = {
        posts:    'A blank feed is a rare thing. Fill it with something that matters.',
        research: 'No research posted yet.',
        saved:    'Nothing saved yet.'
      };
      container.innerHTML = `<div class="userpostedstuffs">${msgs[tab]}</div>`;
    }
    return;
  }

  if (!append) container.innerHTML = '';

  res.posts.forEach(post => {
    profileSeenKeys[tab].push(post.post_key);
    const el = document.createElement('div');
    el.innerHTML = buildProfilePostHTML(post);
    container.appendChild(el.firstElementChild);
  });
}

// ── PROFILE POST HTML ──────────────────────────────────────────
function buildProfilePostHTML(post) {
  const tick   = post.account_level === 'premium' ? ' ✓' : '';
  const pic    = post.profilepicurl || '';
  const avatar = pic
    ? `<img src="${pic}" class="post-feed-avatar">`
    : `<div class="post-feed-avatar" style="display:flex;align-items:center;justify-content:center;background:#111;font-weight:700;">${(post.full_name || '?')[0]}</div>`;

  const header = `
    <div class="post-feed-header">
      ${avatar}
      <div style="flex:1;">
        <div class="post-feed-name">${post.full_name}${tick}</div>
        <div class="post-feed-time">${post.time_ago || ''}</div>
      </div>
    </div>`;

  let body = '';

  if (post.post_type === 'image') {
    body = `<img src="${post.media_url}" style="width:100%;border-radius:8px;margin-bottom:10px;max-height:280px;object-fit:cover;">
            <div class="post-feed-text">${post.content}</div>`;
  } else if (post.post_type === 'video') {
    body = `<video controls style="width:100%;border-radius:8px;margin-bottom:10px;max-height:280px;background:#0a0a0a;">
              <source src="${post.media_url}" type="video/mp4">
            </video>
            <div class="post-feed-text">${post.content}</div>`;
  } else if (post.post_type === 'poll') {
    const opts  = (post.extras && post.extras.poll_options) || [];
    const total = (post.extras && post.extras.total_votes)  || 0;
    const optHTML = opts.map((o, i) => `
      <div class="mini-poll-option" onclick="profileVotePoll('${post.post_key}',${i},this.closest('.poll-options'))">
        <div class="mini-poll-bar" style="width:${total > 0 ? Math.round((o.votes / total) * 100) : 0}%"></div>
        <div class="mini-poll-text">
          <span>${o.text}</span>
          <span>${total > 0 ? Math.round((o.votes / total) * 100) : 0}%</span>
        </div>
      </div>`).join('');
    body = `<div class="post-feed-text" style="font-weight:600;">${post.content}</div>
            <div class="poll-options">${optHTML}</div>
            <div style="font-size:12px;color:#666;margin-top:6px;">${total} votes</div>`;
  } else if (post.post_type === 'event') {
    const e = post.extras || {};
    body = `<div class="post-feed-text" style="font-weight:600;">${e.title || post.content}</div>
            <div style="font-size:13px;color:#666;">📅 ${e.date || ''} &bull; 🕐 ${e.time || ''}</div>
            <div style="font-size:13px;color:#666;margin-top:4px;">📍 ${e.location || ''}</div>`;
  } else if (post.post_type === 'bounty') {
    const b = post.extras || {};
    body = `<div class="post-feed-text" style="font-weight:600;">${b.title || post.content}</div>
            <div class="post-feed-text">${post.content}</div>
            <div class="bounty-reward">${b.amount || ''}</div>`;
  } else if (post.post_type === 'research') {
    const r = post.extras || {};
    body = `<div class="post-feed-text" style="font-weight:600;color:#fff;font-size:15px;">${r.title || post.content}</div>
            <div class="post-feed-text">${(r.abstract || '').slice(0, 150)}...</div>
            <div style="margin-top:6px;">${(r.tags || []).map(t => `<span class="post-feed-tag">${t}</span>`).join('')}</div>`;
  } else {
    body = `<div class="post-feed-text">${post.content}</div>`;
  }

  const actions = `
    <div class="post-feed-stats" style="margin-top:10px;display:flex;gap:16px;align-items:center;">
      <button class="viewer-action-btn" onclick="event.stopPropagation();profileToggleLike('${post.post_key}',this)">
        ♡ <span class="like-count">${post.like_count || 0}</span>
      </button>
      <button class="viewer-action-btn" onclick="event.stopPropagation();openPostViewer('${post.post_key}')">
        💬 ${post.comment_count || 0}
      </button>
      <button class="viewer-action-btn" onclick="event.stopPropagation();profileShare('${post.post_key}')">
        ↗ ${post.share_count || 0}
      </button>
      <button class="viewer-action-btn" style="margin-left:auto;" onclick="event.stopPropagation();profileToggleBookmark('${post.post_key}',this)">
        🔖
      </button>
    </div>`;

  return `<div class="post-feed-card" data-post-key="${post.post_key}" onclick="openPostViewer('${post.post_key}')">
    ${header}${body}${actions}
  </div>`;
}

// ── PROFILE TAB INFINITE SCROLL ────────────────────────────────
document.getElementById('profile')?.addEventListener('scroll', function () {
  const { scrollTop, scrollHeight, clientHeight } = this;
  if (scrollHeight - scrollTop - clientHeight < 400) {
    loadProfileTab(activeTab, true);
  }
});

// ── SOCIAL ACTIONS ─────────────────────────────────────────────
async function profileToggleLike(postKey, btn) {
  const res = await apiRequest({ status: 'toggle_like', post_key: postKey });
  if (res.status === 200) {
    const count = btn.querySelector('.like-count');
    if (count) count.textContent = res.like_count;
    btn.classList.toggle('liked', res.action === 'liked');
  } else showToast(res.message, 'error');
}

async function profileToggleBookmark(postKey, btn) {
  const res = await apiRequest({ status: 'toggle_bookmark', post_key: postKey });
  if (res.status === 200) {
    btn.classList.toggle('liked', res.action === 'bookmarked');
  } else showToast(res.message, 'error');
}

async function profileVotePoll(postKey, optionIndex, container) {
  const res = await apiRequest({ status: 'vote_poll', post_key: postKey, option_index: optionIndex });
  if (res.status === 200) {
    const opts = container.querySelectorAll('.mini-poll-option');
    res.percentages.forEach((p, i) => {
      if (opts[i]) {
        opts[i].querySelector('.mini-poll-bar').style.width = `${p.pct}%`;
        opts[i].querySelectorAll('.mini-poll-text span')[1].textContent = `${p.pct}%`;
      }
    });
    showToast(res.message, 'success');
  } else showToast(res.message, 'error');
}

function profileShare(postKey) {
  const url = `${window.location.origin}/post/${postKey}`;
  if (navigator.share) {
    navigator.share({ url }).catch(() => {});
  } else {
    navigator.clipboard.writeText(url).then(() => showToast('Link copied!'));
  }
}

// ── POST VIEWER ─────────────────────────────────────────────────
let viewerPostKey = null;

async function openPostViewer(postKey) {
  viewerPostKey = postKey;
  const viewer  = document.getElementById('postViewer');
  if (!viewer) return;
  viewer.classList.add('active');
  document.body.style.overflow = 'hidden';

  const feed = document.getElementById('viewerFeed');
  feed.innerHTML = '<div style="padding:40px;text-align:center;color:#555;">Loading...</div>';

  const [postRes, commentRes] = await Promise.all([
    apiRequest({ status: 'get_comments', post_key: postKey }),
    apiRequest({ status: 'get_comments', post_key: postKey })
  ]);

  const comments = commentRes.comments || [];

  // Find post from already-rendered DOM
  const card   = document.querySelector(`[data-post-key="${postKey}"]`);
  const postObj = card ? extractPostFromCard(card, postKey) : null;

  if (!postObj) {
    feed.innerHTML = '<div style="padding:40px;text-align:center;color:#555;">Post not found.</div>';
    return;
  }

  feed.innerHTML = buildViewerHTML(postObj, comments);
}

function extractPostFromCard(card, postKey) {
  // Build a minimal post object from what's already rendered in the card
  return {
    post_key:      postKey,
    post_type:     'text',
    full_name:     card.querySelector('.post-feed-name')?.textContent || '',
    time_ago:      card.querySelector('.post-feed-time')?.textContent || '',
    content:       card.querySelector('.post-feed-text')?.textContent || '',
    like_count:    parseInt(card.querySelector('.like-count')?.textContent || '0'),
    comment_count: 0,
    share_count:   0,
    profilepicurl: card.querySelector('.post-feed-avatar')?.src || '',
    account_level: 'normal',
    media_url:     card.querySelector('img:not(.post-feed-avatar)')?.src || card.querySelector('video source')?.src || '',
    extras:        {}
  };
}

function closeViewer() {
  document.getElementById('postViewer')?.classList.remove('active');
  document.body.style.overflow = '';
  viewerPostKey = null;
}

// openViewer kept for backward compat with existing HTML onclick calls
function openViewer(index) {
  // For hardcoded demo cards, just open viewer with a loading state
  const viewer = document.getElementById('postViewer');
  if (!viewer) return;
  viewer.classList.add('active');
  document.body.style.overflow = 'hidden';
  document.getElementById('viewerFeed').innerHTML =
    '<div style="padding:40px;text-align:center;color:#555;">Sign in to view this post.</div>';
}

function buildViewerHTML(post, comments) {
  const tick   = post.account_level === 'premium' ? ' ✓' : '';
  const pic    = post.profilepicurl || '';
  const avatar = pic
    ? `<img src="${pic}" class="viewer-post-avatar">`
    : `<div class="viewer-post-avatar" style="display:flex;align-items:center;justify-content:center;background:#111;font-weight:700;">${(post.full_name || '?')[0]}</div>`;

  let mediaHTML = '';
  let bodyHTML  = '';
  let extraHTML = '';

  if (post.post_type === 'image') {
    mediaHTML = `<img src="${post.media_url}" class="viewer-post-media">`;
    bodyHTML  = `<div class="viewer-post-text">${post.content}</div>`;
  } else if (post.post_type === 'video') {
    mediaHTML = `<video controls class="viewer-post-media"><source src="${post.media_url}" type="video/mp4"></video>`;
    bodyHTML  = `<div class="viewer-post-text">${post.content}</div>`;
  } else if (post.post_type === 'poll') {
    const opts  = (post.extras && post.extras.poll_options) || [];
    const total = (post.extras && post.extras.total_votes)  || 0;
    const optHTML = opts.map((o, i) => `
      <div class="viewer-poll-option" onclick="viewerVotePoll('${post.post_key}',${i},this.closest('.viewer-poll-wrap'))">
        <div class="viewer-poll-bar" style="width:${total > 0 ? Math.round((o.votes / total) * 100) : 0}%"></div>
        <div class="viewer-poll-content">
          <span>${o.text}</span>
          <span>${total > 0 ? Math.round((o.votes / total) * 100) : 0}%</span>
        </div>
      </div>`).join('');
    bodyHTML = `<div class="viewer-post-text" style="font-weight:600;">${post.content}</div>
                <div class="viewer-poll-wrap">${optHTML}</div>
                <div style="font-size:12px;color:#666;margin:8px 16px;">${total} votes</div>`;
  } else if (post.post_type === 'event') {
    const e   = post.extras || {};
    bodyHTML  = `<div class="viewer-post-text" style="font-weight:600;font-size:16px;">${e.title || post.content}</div>`;
    extraHTML = `
      <div class="viewer-event-info">
        <div class="viewer-event-row">📅 ${e.date || ''}</div>
        <div class="viewer-event-row">🕐 ${e.time || ''}</div>
        <div class="viewer-event-row">📍 ${e.location || ''}</div>
        <div class="viewer-rsvp-btns">
          <button class="viewer-rsvp-btn" onclick="rsvpEvent('${post.post_key}','attending',this.parentElement)">Attending</button>
          <button class="viewer-rsvp-btn" onclick="rsvpEvent('${post.post_key}','interested',this.parentElement)">Interested</button>
          <button class="viewer-rsvp-btn" onclick="rsvpEvent('${post.post_key}','not_going',this.parentElement)">Can't Go</button>
        </div>
      </div>`;
  } else if (post.post_type === 'bounty') {
    const b   = post.extras || {};
    bodyHTML  = `<div class="viewer-post-text" style="font-weight:600;font-size:16px;">${b.title || post.content}</div>
                 <div class="viewer-post-text">${post.content}</div>`;
    extraHTML = `
      <div class="viewer-bounty-reward">
        <div>
          <div style="font-size:12px;color:#666;margin-bottom:4px;">Reward</div>
          <div class="viewer-bounty-amount">${b.amount || ''}</div>
        </div>
        <button class="viewer-apply-btn" onclick="applyBounty('${post.post_key}','')">Apply Now</button>
      </div>`;
  } else if (post.post_type === 'research') {
    const r   = post.extras || {};
    bodyHTML  = `<div class="viewer-post-text" style="font-weight:600;font-size:16px;">${r.title || post.content}</div>`;
    extraHTML = `
      <div class="research-authors">By ${r.authors || ''}</div>
      <div class="research-abstract">${r.abstract || ''}</div>
      <div style="padding:0 16px 14px;">${(r.tags || []).map(t => `<span class="post-feed-tag">${t}</span>`).join('')}</div>`;
  } else {
    bodyHTML = `<div class="viewer-post-text">${post.content}</div>`;
  }

  const commentsHTML = !comments || comments.length === 0
    ? '<div style="padding:20px;color:#555;font-size:13px;">No comments yet.</div>'
    : comments.map(c => `
        <div class="comment-item">
          ${c.profilepicurl ? `<img src="${c.profilepicurl}" class="comment-avatar">` : ''}
          <div class="comment-body">
            <div class="comment-name">${c.full_name}</div>
            <div class="comment-text">${c.content}</div>
            <div class="comment-time">${c.time_ago || ''}</div>
          </div>
        </div>`).join('');

  return `
    <div class="viewer-post">
      <div class="viewer-post-header">
        ${avatar}
        <div style="flex:1;">
          <div class="viewer-post-name">${post.full_name}${tick}</div>
          <div class="viewer-post-time">${post.time_ago || ''}</div>
        </div>
        <button class="user-follow-btn" onclick="toggleFollow('${post.user_key || ''}',this)">Follow</button>
      </div>
      ${mediaHTML}
      <div class="viewer-post-body">${bodyHTML}</div>
      ${extraHTML}
      <div class="viewer-actions">
        <button class="viewer-action-btn" onclick="profileToggleLike('${post.post_key}',this)">
          <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
          <span class="like-count">${post.like_count || 0}</span>
        </button>
        <button class="viewer-action-btn" onclick="document.getElementById('viewer-comment-input').focus()">
          <svg viewBox="0 0 24 24"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"></path></svg>
          <span>${post.comment_count || 0}</span>
        </button>
        <button class="viewer-action-btn" onclick="profileShare('${post.post_key}')">
          <svg viewBox="0 0 24 24"><path d="M22 2L11 13"/><path d="M22 2L15 22L11 13L2 9L22 2Z"/></svg>
          <span>${post.share_count || 0}</span>
        </button>
        <button class="viewer-action-btn" style="margin-left:auto;" onclick="profileToggleBookmark('${post.post_key}',this)">
          <svg viewBox="0 0 24 24"><path d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"></path></svg>
        </button>
      </div>
      <div class="viewer-comments">
        <div class="viewer-comments-title">Comments</div>
        <div id="viewer-comments-list">${commentsHTML}</div>
      </div>
      <div class="comment-input-wrap">
        <input type="text" class="comment-input" id="viewer-comment-input" placeholder="Add a comment...">
        <button class="comment-send" onclick="viewerSubmitComment('${post.post_key}')">↑</button>
      </div>
    </div>`;
}

// ── VIEWER ACTIONS ─────────────────────────────────────────────
async function viewerSubmitComment(postKey) {
  const input = document.getElementById('viewer-comment-input');
  if (!input || !input.value.trim()) return;
  const res = await apiRequest({ status: 'post_comment', post_key: postKey, content: input.value.trim() });
  if (res.status === 200) {
    const list = document.getElementById('viewer-comments-list');
    if (list) {
      list.innerHTML += `
        <div class="comment-item">
          <div class="comment-body">
            <div class="comment-name">${res.full_name}</div>
            <div class="comment-text">${res.content}</div>
            <div class="comment-time">Just now</div>
          </div>
        </div>`;
    }
    input.value = '';
  } else showToast(res.message, 'error');
}

async function viewerVotePoll(postKey, optionIndex, container) {
  const res = await apiRequest({ status: 'vote_poll', post_key: postKey, option_index: optionIndex });
  if (res.status === 200) {
    const opts = container.querySelectorAll('.viewer-poll-option');
    res.percentages.forEach((p, i) => {
      if (opts[i]) {
        opts[i].querySelector('.viewer-poll-bar').style.width = `${p.pct}%`;
        opts[i].querySelectorAll('.viewer-poll-content span')[1].textContent = `${p.pct}%`;
      }
    });
    showToast(res.message, 'success');
  } else showToast(res.message, 'error');
}

// RSVP toggle (kept for backward compat)
document.addEventListener('click', function(e) {
  if (e.target.classList.contains('viewer-rsvp-btn')) {
    const btns = e.target.closest('.viewer-rsvp-btns')?.querySelectorAll('.viewer-rsvp-btn');
    if (btns) {
      btns.forEach(b => b.classList.remove('active'));
      e.target.classList.add('active');
    }
  }
});

// ── INIT ───────────────────────────────────────────────────────
function initProfile() {
  profileSeenKeys   = { posts: [], research: [], saved: [] };
  profileScrollLock = { posts: false, research: false, saved: false };
  activeTab         = 'posts';
  document.querySelector('.tab[data-tab="posts"]')?.classList.add('active');
  document.getElementById('tab-posts')?.classList.add('active');
  loadProfileTab('posts');
}
</script>

</section>
<section id="Create" class="Create" style="display:none">
<style>
.Create{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000;color:#fff;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;overflow-y:auto;z-index:2000;scrollbar-width:none;}
.Create::-webkit-scrollbar{display:none;}

/* HEADER */
.cr-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid#222;position:sticky;top:0;background:#000;z-index:100;}
.cr-title{font-size:18px;font-weight:800;}
.cr-close{width:36px;height:36px;background:transparent;border:1px solid#333;border-radius:50%;color:#fff;font-size:20px;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:center;}
.cr-close:hover{background:#fff;color:#000;}

/* TABS */
.cr-tabs{display:flex;gap:8px;padding:16px 20px;overflow-x:auto;border-bottom:1px solid#222;scrollbar-width:none;}
.cr-tabs::-webkit-scrollbar{display:none;}
.cr-tab{padding:8px 16px;background:transparent;border:1px solid#333;border-radius:8px;color:#666;font-size:13px;font-weight:600;cursor:pointer;transition:all 0.2s;white-space:nowrap;flex-shrink:0;}
.cr-tab:hover{border-color:#fff;color:#fff;}
.cr-tab.active{background:#fff;color:#000;border-color:#fff;}

/* CONTAINER */
.cr-container{max-width:600px;margin:0 auto;padding:20px;}

/* USER */
.cr-user{display:flex;align-items:center;gap:12px;margin-bottom:20px;}
.cr-user img{width:48px;height:48px;border-radius:50%;object-fit:cover;border:2px solid#333;}
.cr-user-name{font-size:15px;font-weight:700;}
.cr-user-dept{font-size:13px;color:#555;}

/* TEXTAREA */
.cr-textarea{width:100%;min-height:150px;padding:16px;background:transparent;border:1px solid#333;border-radius:12px;color:#fff;font-size:16px;font-family:inherit;resize:vertical;margin-bottom:12px;transition:border 0.2s;box-sizing:border-box;}
.cr-textarea:focus{outline:none;border-color:#fff;}
.cr-textarea::placeholder{color:#555;}

/* CHAR COUNTER */
.cr-counter{text-align:right;font-size:12px;color:#444;margin-bottom:16px;font-variant-numeric:tabular-nums;}
.cr-counter.warn{color:#f97316;}
.cr-counter.danger{color:#ef4444;}

/* MEDIA PREVIEW */
.cr-media{position:relative;margin-bottom:16px;border:1px solid#333;border-radius:12px;overflow:hidden;display:none;}
.cr-media.active{display:block;}
.cr-media img,.cr-media video{width:100%;height:auto;display:block;}
.cr-media-doc{padding:40px;text-align:center;color:#666;font-size:14px;}
.cr-media-remove{position:absolute;top:12px;right:12px;width:32px;height:32px;background:rgba(0,0,0,0.9);border:1px solid#fff;border-radius:50%;color:#fff;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;}
.cr-media-remove:hover{background:#fff;color:#000;}

/* OPTIONS GRID */
.cr-options{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:20px;}
.cr-option{padding:14px;background:transparent;border:1px solid#333;border-radius:10px;cursor:pointer;transition:all 0.2s;display:flex;flex-direction:column;align-items:center;gap:6px;text-align:center;}
.cr-option:hover{border-color:#fff;background:rgba(255,255,255,0.03);}
.cr-option-icon{font-size:22px;}
.cr-option-text{font-size:11px;font-weight:600;color:#888;}

/* SECTIONS */
.cr-section{display:none;margin-bottom:20px;}
.cr-section.active{display:block;}
.cr-input{width:100%;padding:12px 16px;background:transparent;border:1px solid#333;border-radius:8px;color:#fff;font-size:14px;margin-bottom:10px;box-sizing:border-box;font-family:inherit;}
.cr-input:focus{outline:none;border-color:#fff;}
.cr-input::placeholder{color:#555;}
.cr-label{font-size:12px;font-weight:700;color:#444;margin-bottom:8px;text-transform:uppercase;letter-spacing:0.5px;}

/* POLL */
.cr-poll-option{width:100%;padding:12px 16px;background:transparent;border:1px solid#333;border-radius:8px;color:#fff;font-size:14px;margin-bottom:8px;box-sizing:border-box;}
.cr-poll-option:focus{outline:none;border-color:#fff;}
.cr-poll-add{padding:10px;background:transparent;border:1px dashed#333;border-radius:8px;color:#555;font-size:13px;cursor:pointer;width:100%;transition:all 0.2s;font-weight:600;}
.cr-poll-add:hover{border-color:#fff;color:#fff;}

/* TAGS */
.cr-tags{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:16px;}
.cr-tag{padding:6px 12px;background:#111;border:1px solid#222;border-radius:6px;font-size:12px;font-weight:600;display:flex;align-items:center;gap:6px;}
.cr-tag-remove{color:#555;cursor:pointer;font-size:16px;line-height:1;}
.cr-tag-remove:hover{color:#fff;}

/* EVENT DATE TIME */
.cr-datetime{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px;}

/* BOUNTY/JOB AMOUNT */
.cr-amount-wrap{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px;}

/* PRODUCT PRICE */
.cr-price-wrap{display:grid;grid-template-columns:2fr 1fr;gap:10px;margin-bottom:10px;}

/* SETTINGS */
.cr-settings{border-top:1px solid#222;padding-top:20px;margin-bottom:20px;}
.cr-setting{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;}
.cr-setting-label{font-size:14px;font-weight:600;}
.cr-setting-desc{font-size:12px;color:#555;margin-top:2px;}
.cr-select{padding:8px 12px;background:#111;border:1px solid#333;border-radius:8px;color:#fff;font-size:13px;cursor:pointer;outline:none;}
.cr-toggle{width:44px;height:24px;background:#333;border-radius:12px;position:relative;cursor:pointer;transition:background 0.2s;}
.cr-toggle.active{background:#22c55e;}
.cr-toggle-knob{width:20px;height:20px;background:#fff;border-radius:50%;position:absolute;top:2px;left:2px;transition:left 0.2s;}
.cr-toggle.active .cr-toggle-knob{left:22px;}

/* POST BUTTON */
.cr-post-btn{width:100%;padding:14px;background:#fff;color:#000;border:none;border-radius:10px;font-size:15px;font-weight:800;cursor:pointer;transition:opacity 0.2s;}
.cr-post-btn:hover{opacity:0.9;}
.cr-post-btn:disabled{background:#333;color:#666;cursor:not-allowed;opacity:0.5;}

/* HIDDEN */
.cr-hidden{display:none;}
</style>

<!-- HEADER -->
<div class="cr-header">
  <div class="cr-title">Create</div>
  <button class="cr-close" onclick="document.getElementById('Create').style.display='none';document.getElementById('newMainaccount').style.display='block'">×</button>
</div>

<!-- TABS -->
<div class="cr-tabs">
  <button class="cr-tab active" data-type="post" onclick="crSwitch('post',this)">Post</button>
  <button class="cr-tab" data-type="research" onclick="crSwitch('research',this)">Research</button>
  <button class="cr-tab" data-type="poll" onclick="crSwitch('poll',this)">Poll</button>
  <button class="cr-tab" data-type="event" onclick="crSwitch('event',this)">Event</button>
  <button class="cr-tab" data-type="bounty" onclick="crSwitch('bounty',this)">Bounty</button>
  <button class="cr-tab" data-type="job" onclick="crSwitch('job',this)">Job</button>
  <button class="cr-tab" data-type="product" onclick="crSwitch('product',this)">Product</button>
  <button class="cr-tab" data-type="question" onclick="crSwitch('question',this)">Question</button>
  <button class="cr-tab" data-type="collab" onclick="crSwitch('collab',this)">Collab</button>
  <button class="cr-tab" data-type="ad" onclick="crSwitch('ad',this)">Ad</button>
</div>

<div class="cr-container">

  <!-- USER INFO -->
  <div class="cr-user">
    <img src="img1" alt="avatar">
    <div>
      <div class="cr-user-name">Israel Mark</div>
      <div class="cr-user-dept">Computer Science · LASU</div>
    </div>
  </div>

  <!-- TEXTAREA -->
  <textarea id="crText" class="cr-textarea" placeholder="What's on your mind?" maxlength="2000"></textarea>
  <div id="crCounter" class="cr-counter">0 / 2000</div>

  <!-- MEDIA PREVIEW -->
  <div id="crMedia" class="cr-media">
    <div id="crMediaContent"></div>
    <button class="cr-media-remove" onclick="crRemoveMedia()">×</button>
  </div>

  <!-- OPTIONS -->
  <div class="cr-options">
    <div class="cr-option" onclick="document.getElementById('crImageInput').click()">
      <div class="cr-option-icon">📷</div>
      <div class="cr-option-text">Image</div>
    </div>
    <div class="cr-option" onclick="document.getElementById('crVideoInput').click()">
      <div class="cr-option-icon">🎥</div>
      <div class="cr-option-text">Video</div>
    </div>
    <div class="cr-option" onclick="document.getElementById('crDocInput').click()">
      <div class="cr-option-icon">📄</div>
      <div class="cr-option-text">Doc</div>
    </div>
    <div class="cr-option" onclick="crToggleSection('poll')">
      <div class="cr-option-icon">📊</div>
      <div class="cr-option-text">Poll</div>
    </div>
  </div>

  <input type="file" id="crImageInput" class="cr-hidden" accept="image/*" onchange="crHandleMedia(this,'image')">
  <input type="file" id="crVideoInput" class="cr-hidden" accept="video/*" onchange="crHandleMedia(this,'video')">
  <input type="file" id="crDocInput" class="cr-hidden" accept=".pdf,.doc,.docx" onchange="crHandleMedia(this,'doc')">

  <!-- POLL SECTION -->
  <div id="crPoll" class="cr-section">
    <div class="cr-label">Poll Options</div>
    <input type="text" class="cr-poll-option" placeholder="Option 1">
    <input type="text" class="cr-poll-option" placeholder="Option 2">
    <button class="cr-poll-add" onclick="crAddPollOption()">+ Add Option</button>
  </div>

  <!-- RESEARCH SECTION -->
  <div id="crResearch" class="cr-section">
    <div class="cr-label">Paper Details</div>
    <input type="text" id="crResearchTitle" class="cr-input" placeholder="Paper Title">
    <input type="text" id="crResearchAuthors" class="cr-input" placeholder="Authors (comma-separated)">
    <textarea id="crResearchAbstract" class="cr-input" style="min-height:100px;resize:vertical;" placeholder="Abstract"></textarea>
    <input type="text" id="crResearchTagInput" class="cr-input" placeholder="Add tags (press Enter)">
    <div id="crResearchTags" class="cr-tags"></div>
  </div>

  <!-- EVENT SECTION -->
  <div id="crEvent" class="cr-section">
    <div class="cr-label">Event Details</div>
    <input type="text" id="crEventTitle" class="cr-input" placeholder="Event Title">
    <div class="cr-datetime">
      <input type="date" id="crEventDate" class="cr-input">
      <input type="time" id="crEventTime" class="cr-input">
    </div>
    <input type="text" id="crEventLocation" class="cr-input" placeholder="Location">
  </div>

  <!-- BOUNTY SECTION -->
  <div id="crBounty" class="cr-section">
    <div class="cr-label">Bounty Details</div>
    <input type="text" id="crBountyTitle" class="cr-input" placeholder="Task Title">
    <div class="cr-amount-wrap">
      <input type="text" id="crBountyAmount" class="cr-input" placeholder="Amount (₦)">
      <input type="date" id="crBountyDeadline" class="cr-input" placeholder="Deadline">
    </div>
    <select id="crBountyCategory" class="cr-input">
      <option value="">Category</option>
      <option value="review">Review</option>
      <option value="annotation">Data Annotation</option>
      <option value="writing">Writing</option>
      <option value="coding">Coding</option>
      <option value="design">Design</option>
      <option value="other">Other</option>
    </select>
  </div>

  <!-- JOB SECTION -->
  <div id="crJob" class="cr-section">
    <div class="cr-label">Job Posting</div>
    <input type="text" id="crJobTitle" class="cr-input" placeholder="Job Title">
    <input type="text" id="crJobCompany" class="cr-input" placeholder="Company/Organization">
    <div class="cr-amount-wrap">
      <input type="text" id="crJobSalary" class="cr-input" placeholder="Salary Range">
      <select id="crJobType" class="cr-input">
        <option value="full-time">Full-Time</option>
        <option value="part-time">Part-Time</option>
        <option value="internship">Internship</option>
        <option value="contract">Contract</option>
      </select>
    </div>
    <input type="text" id="crJobLocation" class="cr-input" placeholder="Location">
    <input type="url" id="crJobLink" class="cr-input" placeholder="Application Link (optional)">
  </div>

  <!-- PRODUCT SECTION -->
  <div id="crProduct" class="cr-section">
    <div class="cr-label">Product Listing</div>
    <input type="text" id="crProductName" class="cr-input" placeholder="Product Name">
    <div class="cr-price-wrap">
      <input type="text" id="crProductPrice" class="cr-input" placeholder="Price (₦)">
      <select id="crProductCondition" class="cr-input">
        <option value="new">New</option>
        <option value="used">Used</option>
        <option value="refurbished">Refurbished</option>
      </select>
    </div>
    <select id="crProductCategory" class="cr-input">
      <option value="">Category</option>
      <option value="equipment">Lab Equipment</option>
      <option value="books">Books</option>
      <option value="electronics">Electronics</option>
      <option value="software">Software/Data</option>
      <option value="services">Services</option>
      <option value="other">Other</option>
    </select>
  </div>

  <!-- QUESTION SECTION -->
  <div id="crQuestion" class="cr-section">
    <div class="cr-label">Question Details</div>
    <input type="text" id="crQuestionTitle" class="cr-input" placeholder="Question Title">
    <input type="text" id="crQuestionTagInput" class="cr-input" placeholder="Add tags (press Enter)">
    <div id="crQuestionTags" class="cr-tags"></div>
  </div>

  <!-- COLLAB SECTION -->
  <div id="crCollab" class="cr-section">
    <div class="cr-label">Collaboration Request</div>
    <input type="text" id="crCollabTitle" class="cr-input" placeholder="Project Title">
    <input type="text" id="crCollabSkills" class="cr-input" placeholder="Skills Needed (comma-separated)">
    <select id="crCollabDuration" class="cr-input">
      <option value="">Expected Duration</option>
      <option value="1-week">1 Week</option>
      <option value="2-4-weeks">2-4 Weeks</option>
      <option value="1-3-months">1-3 Months</option>
      <option value="3-6-months">3-6 Months</option>
      <option value="6-months+">6+ Months</option>
    </select>
  </div>

  <!-- AD SECTION -->
  <div id="crAd" class="cr-section">
    <div class="cr-label">Sponsored Post</div>
    <input type="text" id="crAdTitle" class="cr-input" placeholder="Ad Title">
    <input type="text" id="crAdCompany" class="cr-input" placeholder="Company/Organization">
    <input type="url" id="crAdLink" class="cr-input" placeholder="Link URL">
    <input type="text" id="crAdCTA" class="cr-input" placeholder="Call-to-Action Button Text">
    <div style="padding:12px;background:#111;border:1px solid#222;border-radius:8px;font-size:12px;color:#555;margin-top:10px;">
      💡 Sponsored posts appear in user feeds with "Sponsored" label. Contact support for pricing.
    </div>
  </div>

  <!-- SETTINGS -->
  <div class="cr-settings">
    <div class="cr-setting">
      <div>
        <div class="cr-setting-label">Visibility</div>
        <div class="cr-setting-desc">Who can see this</div>
      </div>
      <select id="crVisibility" class="cr-select">
        <option value="public">Public</option>
        <option value="followers">Followers</option>
        <option value="university">University</option>
        <option value="private">Private</option>
      </select>
    </div>

    <div class="cr-setting">
      <div>
        <div class="cr-setting-label">Allow Comments</div>
        <div class="cr-setting-desc">Let others comment</div>
      </div>
      <div id="crComments" class="cr-toggle active" onclick="this.classList.toggle('active')">
        <div class="cr-toggle-knob"></div>
      </div>
    </div>

    <div class="cr-setting">
      <div>
        <div class="cr-setting-label">Show in Feed</div>
        <div class="cr-setting-desc">Appear in followers' feeds</div>
      </div>
      <div id="crFeed" class="cr-toggle active" onclick="this.classList.toggle('active')">
        <div class="cr-toggle-knob"></div>
      </div>
    </div>
  </div>

  <!-- POST BUTTON -->
  <button id="crPostBtn" class="cr-post-btn" onclick="crCreate()" disabled>Post</button>

</div>

<script>
let crType='post';
let crMedia=null;
let crPollCount=2;
let crResearchTags=[];
let crQuestionTags=[];

// Switch tabs
function crSwitch(type,btn){
  document.querySelectorAll('.cr-tab').forEach(t=>t.classList.remove('active'));
  btn.classList.add('active');
  crType=type;
  
  // Update placeholder
  const placeholders={
    post:"What's on your mind?",
    research:"Share your research findings...",
    poll:"Ask a question...",
    event:"What's the event about?",
    bounty:"Describe the task...",
    job:"Describe the role and requirements...",
    product:"Describe your product...",
    question:"Describe your problem in detail...",
    collab:"Describe your project and what help you need...",
    ad:"Describe what you're promoting..."
  };
  document.getElementById('crText').placeholder=placeholders[type]||"What's on your mind?";
  
  // Hide all sections
  document.querySelectorAll('.cr-section').forEach(s=>s.classList.remove('active'));
  
  // Show relevant section
  const sections={
    research:'crResearch',
    poll:'crPoll',
    event:'crEvent',
    bounty:'crBounty',
    job:'crJob',
    product:'crProduct',
    question:'crQuestion',
    collab:'crCollab',
    ad:'crAd'
  };
  if(sections[type]) document.getElementById(sections[type]).classList.add('active');
}

// Toggle section (for poll button)
function crToggleSection(type){
  const sections={poll:'crPoll'};
  if(sections[type]){
    const el=document.getElementById(sections[type]);
    el.classList.toggle('active');
  }
}

// Character counter
document.getElementById('crText').addEventListener('input',function(){
  const len=this.value.length;
  const counter=document.getElementById('crCounter');
  counter.textContent=`${len} / 2000`;
  counter.classList.remove('warn','danger');
  if(len>1800)counter.classList.add('danger');
  else if(len>1500)counter.classList.add('warn');
  document.getElementById('crPostBtn').disabled=len===0&&!crMedia;
});

// Handle media
function crHandleMedia(input,type){
  if(input.files&&input.files[0]){
    const file=input.files[0];
    const reader=new FileReader();
    reader.onload=function(e){
      crMedia={type,url:e.target.result,file};
      crDisplayMedia(type,e.target.result);
    };
    reader.readAsDataURL(file);
  }
}

function crDisplayMedia(type,url){
  const preview=document.getElementById('crMedia');
  const content=document.getElementById('crMediaContent');
  content.innerHTML='';
  if(type==='image'){
    content.innerHTML=`<img src="${url}">`;
  }else if(type==='video'){
    content.innerHTML=`<video src="${url}" controls></video>`;
  }else if(type==='doc'){
    content.innerHTML=`<div class="cr-media-doc">📄 Document uploaded</div>`;
  }
  preview.classList.add('active');
  document.getElementById('crPostBtn').disabled=false;
}

function crRemoveMedia(){
  crMedia=null;
  document.getElementById('crMedia').classList.remove('active');
  document.getElementById('crMediaContent').innerHTML='';
  document.getElementById('crImageInput').value='';
  document.getElementById('crVideoInput').value='';
  document.getElementById('crDocInput').value='';
}

// Poll
function crAddPollOption(){
  crPollCount++;
  const section=document.getElementById('crPoll');
  const btn=section.querySelector('.cr-poll-add');
  const input=document.createElement('input');
  input.type='text';
  input.className='cr-poll-option';
  input.placeholder=`Option ${crPollCount}`;
  section.insertBefore(input,btn);
}

// Research tags
document.getElementById('crResearchTagInput')?.addEventListener('keypress',function(e){
  if(e.key==='Enter'&&this.value.trim()){
    e.preventDefault();
    const tag=this.value.trim();
    if(!crResearchTags.includes(tag)){
      crResearchTags.push(tag);
      const container=document.getElementById('crResearchTags');
      const el=document.createElement('div');
      el.className='cr-tag';
      el.innerHTML=`${tag} <span class="cr-tag-remove" onclick="crRemoveResearchTag('${tag}')">×</span>`;
      container.appendChild(el);
    }
    this.value='';
  }
});

function crRemoveResearchTag(tag){
  crResearchTags=crResearchTags.filter(t=>t!==tag);
  const container=document.getElementById('crResearchTags');
  container.innerHTML='';
  crResearchTags.forEach(t=>{
    const el=document.createElement('div');
    el.className='cr-tag';
    el.innerHTML=`${t} <span class="cr-tag-remove" onclick="crRemoveResearchTag('${t}')">×</span>`;
    container.appendChild(el);
  });
}

// Question tags
document.getElementById('crQuestionTagInput')?.addEventListener('keypress',function(e){
  if(e.key==='Enter'&&this.value.trim()){
    e.preventDefault();
    const tag=this.value.trim();
    if(!crQuestionTags.includes(tag)){
      crQuestionTags.push(tag);
      const container=document.getElementById('crQuestionTags');
      const el=document.createElement('div');
      el.className='cr-tag';
      el.innerHTML=`${tag} <span class="cr-tag-remove" onclick="crRemoveQuestionTag('${tag}')">×</span>`;
      container.appendChild(el);
    }
    this.value='';
  }
});

function crRemoveQuestionTag(tag){
  crQuestionTags=crQuestionTags.filter(t=>t!==tag);
  const container=document.getElementById('crQuestionTags');
  container.innerHTML='';
  crQuestionTags.forEach(t=>{
    const el=document.createElement('div');
    el.className='cr-tag';
    el.innerHTML=`${t} <span class="cr-tag-remove" onclick="crRemoveQuestionTag('${t}')">×</span>`;
    container.appendChild(el);
  });
}

// Create post
function crCreate(){
  const content=document.getElementById('crText').value.trim();
  const visibility=document.getElementById('crVisibility').value;
  const allowComments=document.getElementById('crComments').classList.contains('active');
  const showInFeed=document.getElementById('crFeed').classList.contains('active');
  
  if(!content&&!crMedia){
    alert('Please add content or media');
    return;
  }
  
  const data={
    type:crType,
    content,
    visibility,
    allowComments,
    showInFeed,
    media:crMedia,
    timestamp:new Date().toISOString()
  };
  
  // Type-specific data
  if(crType==='poll'){
    const opts=[];
    document.querySelectorAll('.cr-poll-option').forEach(inp=>{
      if(inp.value.trim())opts.push(inp.value.trim());
    });
    data.pollOptions=opts;
  }
  
  if(crType==='research'){
    data.research={
      title:document.getElementById('crResearchTitle').value,
      authors:document.getElementById('crResearchAuthors').value,
      abstract:document.getElementById('crResearchAbstract').value,
      tags:crResearchTags
    };
  }
  
  if(crType==='event'){
    data.event={
      title:document.getElementById('crEventTitle').value,
      date:document.getElementById('crEventDate').value,
      time:document.getElementById('crEventTime').value,
      location:document.getElementById('crEventLocation').value
    };
  }
  
  if(crType==='bounty'){
    data.bounty={
      title:document.getElementById('crBountyTitle').value,
      amount:document.getElementById('crBountyAmount').value,
      deadline:document.getElementById('crBountyDeadline').value,
      category:document.getElementById('crBountyCategory').value
    };
  }
  
  if(crType==='job'){
    data.job={
      title:document.getElementById('crJobTitle').value,
      company:document.getElementById('crJobCompany').value,
      salary:document.getElementById('crJobSalary').value,
      type:document.getElementById('crJobType').value,
      location:document.getElementById('crJobLocation').value,
      link:document.getElementById('crJobLink').value
    };
  }
  
  if(crType==='product'){
    data.product={
      name:document.getElementById('crProductName').value,
      price:document.getElementById('crProductPrice').value,
      condition:document.getElementById('crProductCondition').value,
      category:document.getElementById('crProductCategory').value
    };
  }
  
  if(crType==='question'){
    data.question={
      title:document.getElementById('crQuestionTitle').value,
      tags:crQuestionTags
    };
  }
  
  if(crType==='collab'){
    data.collab={
      title:document.getElementById('crCollabTitle').value,
      skills:document.getElementById('crCollabSkills').value,
      duration:document.getElementById('crCollabDuration').value
    };
  }
  
  if(crType==='ad'){
    data.ad={
      title:document.getElementById('crAdTitle').value,
      company:document.getElementById('crAdCompany').value,
      link:document.getElementById('crAdLink').value,
      cta:document.getElementById('crAdCTA').value
    };
  }
  
  console.log('Creating post:',data);
  
  // TODO: Send to backend
  // await fetch('/api/posts', {
  //   method: 'POST',
  //   headers: { 'Content-Type': 'application/json' },
  //   body: JSON.stringify(data)
  // });
  
  alert('Post created successfully!');
  crReset();
  document.getElementById('Create').style.display='none';
  document.getElementById('newMainaccount').style.display='block';
}

// Reset
function crReset(){
  document.getElementById('crText').value='';
  document.getElementById('crCounter').textContent='0 / 2000';
  crRemoveMedia();
  document.querySelectorAll('.cr-poll-option').forEach((inp,i)=>{
    if(i<2)inp.value='';
    else inp.remove();
  });
  crPollCount=2;
  crResearchTags=[];
  crQuestionTags=[];
  document.getElementById('crResearchTags').innerHTML='';
  document.getElementById('crQuestionTags').innerHTML='';
  document.querySelectorAll('.cr-input').forEach(inp=>inp.value='');
  document.querySelectorAll('.cr-section').forEach(s=>s.classList.remove('active'));
}
</script>

</section>
<section id="Messages" class="Messages" style="display:none">
<style>
.Messages{background:#080808;color:#fff;min-height:100vh;width:100%;position:relative;top:0;left:0;bottom:0;right:0;overflow:hidden;z-index:900;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;display:flex;}

/* SIDEBAR */
.msg-sidebar{width:380px;border-right:1px solid#1a1a1a;display:flex;flex-direction:column;background:#000;flex-shrink:0;}
.msg-header{padding:16px 20px;border-bottom:1px solid#1a1a1a;display:flex;align-items:center;gap:12px;}
.msg-back{background:transparent;border:none;color:#fff;font-size:22px;cursor:pointer;padding:0;line-height:1;flex-shrink:0;}
.msg-title{flex:1;font-size:20px;font-weight:800;letter-spacing:-0.5px;}
.msg-new{background:#fff;color:#000;border:none;border-radius:50%;width:36px;height:36px;font-size:20px;cursor:pointer;transition:opacity 0.2s;flex-shrink:0;display:flex;align-items:center;justify-content:center;}
.msg-new:hover{opacity:0.9;}

/* SEARCH */
.msg-search-wrap{padding:12px 20px;border-bottom:1px solid#111;}
.msg-search{width:100%;padding:10px 16px 10px 40px;background:#111;border:1px solid#222;border-radius:20px;color:#fff;font-size:14px;outline:none;transition:border 0.2s;position:relative;}
.msg-search:focus{border-color:#444;}
.msg-search::placeholder{color:#444;}
.msg-search-icon{position:absolute;left:32px;top:50%;transform:translateY(-50%);color:#444;pointer-events:none;}
.msg-search-icon svg{width:16px;height:16px;stroke:currentColor;fill:none;stroke-width:2;}

/* TABS */
.msg-tabs{display:flex;gap:0;border-bottom:1px solid#111;padding:0 20px;}
.msg-tab{flex:1;padding:12px 0;background:transparent;border:none;border-bottom:2px solid transparent;color:#444;font-size:13px;font-weight:700;cursor:pointer;transition:all 0.2s;text-align:center;position:relative;}
.msg-tab.active{color:#fff;border-bottom-color:#fff;}
.msg-tab-badge{position:absolute;top:8px;right:20px;background:#ef4444;color:#fff;font-size:9px;font-weight:800;padding:2px 6px;border-radius:10px;min-width:18px;text-align:center;}

/* CHAT LIST */
.msg-list{flex:1;overflow-y:auto;scrollbar-width:none;}
.msg-list::-webkit-scrollbar{display:none;}
.msg-chat{display:flex;align-items:center;gap:12px;padding:12px 20px;border-bottom:1px solid#0d0d0d;cursor:pointer;transition:background 0.15s;position:relative;}
.msg-chat:hover{background:rgba(255,255,255,0.02);}
.msg-chat.active{background:rgba(255,255,255,0.05);}
.msg-chat.unread{background:rgba(255,255,255,0.03);}
.msg-chat.pinned{background:#0f0f0f;}
.msg-chat.pinned::before{content:'📌';position:absolute;top:10px;left:8px;font-size:10px;}

.msg-avatar{width:50px;height:50px;border-radius:50%;object-fit:cover;border:1px solid#1e1e1e;flex-shrink:0;position:relative;}
.msg-avatar-group{width:50px;height:50px;position:relative;flex-shrink:0;}
.msg-avatar-group img{width:30px;height:30px;border-radius:50%;object-fit:cover;border:2px solid#000;position:absolute;}
.msg-avatar-group img:nth-child(1){top:0;left:0;z-index:2;}
.msg-avatar-group img:nth-child(2){bottom:0;right:0;z-index:1;}
.msg-online{position:absolute;bottom:2px;right:2px;width:12px;height:12px;background:#22c55e;border:2px solid#000;border-radius:50%;}

.msg-chat-info{flex:1;min-width:0;}
.msg-chat-top{display:flex;align-items:center;gap:6px;margin-bottom:3px;}
.msg-chat-name{font-size:14px;font-weight:700;flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.msg-chat-time{font-size:11px;color:#444;flex-shrink:0;font-variant-numeric:tabular-nums;}
.msg-chat-preview{font-size:13px;color:#555;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex;align-items:center;gap:4px;}
.msg-chat-preview.unread{color:#ccc;font-weight:600;}
.msg-typing{color:#22c55e;font-style:italic;}

.msg-unread-badge{background:#ef4444;color:#fff;font-size:10px;font-weight:800;padding:2px 6px;border-radius:10px;min-width:18px;text-align:center;flex-shrink:0;}
.msg-muted{color:#333;font-size:16px;}
.msg-verified{color:#3b82f6;font-size:12px;}

/* MAIN CHAT AREA */
.msg-main{flex:1;display:flex;flex-direction:column;background:#000;position:relative;}
.msg-empty{flex:1;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:16px;color:#444;}
.msg-empty-icon{font-size:64px;}
.msg-empty-text{font-size:16px;font-weight:600;}

/* CHAT HEADER */
.msg-chat-header{padding:16px 20px;border-bottom:1px solid#1a1a1a;display:flex;align-items:center;gap:12px;}
.msg-chat-header-avatar{width:40px;height:40px;border-radius:50%;object-fit:cover;border:1px solid#1e1e1e;flex-shrink:0;}
.msg-chat-header-info{flex:1;min-width:0;}
.msg-chat-header-name{font-size:15px;font-weight:700;margin-bottom:2px;}
.msg-chat-header-status{font-size:12px;color:#444;}
.msg-chat-header-status.online{color:#22c55e;}
.msg-chat-header-actions{display:flex;gap:8px;}
.msg-header-btn{background:transparent;border:1px solid#333;border-radius:50%;width:36px;height:36px;color:#fff;font-size:16px;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:center;}
.msg-header-btn:hover{border-color:#fff;}

/* MESSAGES AREA */
.msg-messages{flex:1;overflow-y:auto;padding:20px;scrollbar-width:none;display:flex;flex-direction:column;gap:16px;}
.msg-messages::-webkit-scrollbar{display:none;}

.msg-date-divider{text-align:center;font-size:11px;color:#444;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin:8px 0;}

.msg-bubble-wrap{display:flex;align-items:flex-end;gap:8px;max-width:70%;}
.msg-bubble-wrap.sent{align-self:flex-end;flex-direction:row-reverse;}
.msg-bubble-avatar{width:32px;height:32px;border-radius:50%;object-fit:cover;border:1px solid#1e1e1e;flex-shrink:0;}

.msg-bubble{background:#1a1a1a;padding:10px 14px;border-radius:16px;position:relative;word-wrap:break-word;}
.msg-bubble-wrap.sent .msg-bubble{background:#fff;color:#000;}
.msg-bubble-name{font-size:11px;font-weight:700;color:#888;margin-bottom:4px;}
.msg-bubble-wrap.sent .msg-bubble-name{color:#555;}
.msg-bubble-text{font-size:14px;line-height:1.5;margin-bottom:4px;}
.msg-bubble-img{width:100%;max-width:300px;border-radius:12px;margin-top:6px;display:block;cursor:pointer;}
.msg-bubble-video{width:100%;max-width:300px;border-radius:12px;margin-top:6px;display:block;}
.msg-bubble-file{display:flex;align-items:center;gap:10px;padding:8px;background:rgba(255,255,255,0.05);border-radius:8px;margin-top:6px;cursor:pointer;}
.msg-bubble-file-icon{font-size:24px;}
.msg-bubble-file-info{flex:1;}
.msg-bubble-file-name{font-size:13px;font-weight:600;margin-bottom:2px;}
.msg-bubble-file-size{font-size:11px;color:#666;}
.msg-bubble-voice{display:flex;align-items:center;gap:10px;padding:6px;margin-top:6px;}
.msg-voice-play{background:#fff;color:#000;border:none;border-radius:50%;width:32px;height:32px;font-size:14px;cursor:pointer;flex-shrink:0;display:flex;align-items:center;justify-content:center;}
.msg-voice-wave{flex:1;height:32px;background:#333;border-radius:16px;position:relative;overflow:hidden;}
.msg-voice-time{font-size:11px;color:#666;flex-shrink:0;}

.msg-bubble-footer{display:flex;align-items:center;gap:6px;margin-top:4px;font-size:11px;color:#444;}
.msg-bubble-wrap.sent .msg-bubble-footer{justify-content:flex-end;}
.msg-read-receipt{font-size:14px;color:#22c55e;}
.msg-reactions{display:flex;gap:4px;margin-top:6px;flex-wrap:wrap;}
.msg-reaction{padding:2px 8px;background:rgba(255,255,255,0.1);border:1px solid#333;border-radius:12px;font-size:14px;cursor:pointer;transition:all 0.2s;}
.msg-reaction:hover{background:rgba(255,255,255,0.15);}
.msg-reaction-count{font-size:10px;font-weight:700;color:#888;margin-left:2px;}

/* REPLY PREVIEW */
.msg-reply-preview{background:#111;border-left:3px solid#fff;padding:8px 12px;margin-bottom:6px;border-radius:4px;font-size:12px;}
.msg-reply-name{font-weight:700;margin-bottom:2px;}
.msg-reply-text{color:#666;}

/* INPUT AREA */
.msg-input-wrap{padding:16px 20px;border-top:1px solid#1a1a1a;display:flex;flex-direction:column;gap:12px;}
.msg-replying-to{display:none;background:#111;padding:10px 14px;border-radius:8px;position:relative;}
.msg-replying-to.active{display:block;}
.msg-replying-label{font-size:11px;color:#444;margin-bottom:4px;font-weight:700;}
.msg-replying-text{font-size:13px;color:#888;}
.msg-reply-close{position:absolute;top:8px;right:8px;background:transparent;border:none;color:#555;font-size:18px;cursor:pointer;}

.msg-input-bar{display:flex;gap:10px;align-items:flex-end;}
.msg-attach-btn{background:transparent;border:1px solid#333;border-radius:50%;width:40px;height:40px;color:#fff;font-size:18px;cursor:pointer;transition:all 0.2s;flex-shrink:0;display:flex;align-items:center;justify-content:center;}
.msg-attach-btn:hover{border-color:#fff;}
.msg-input{flex:1;background:#111;border:1px solid#222;border-radius:20px;padding:10px 16px;color:#fff;font-size:14px;outline:none;resize:none;max-height:120px;min-height:40px;font-family:inherit;transition:border 0.2s;}
.msg-input:focus{border-color:#555;}
.msg-input::placeholder{color:#444;}
.msg-send{background:#fff;color:#000;border:none;border-radius:50%;width:40px;height:40px;font-size:18px;cursor:pointer;flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:opacity 0.2s;}
.msg-send:hover{opacity:0.9;}
.msg-send:disabled{background:#333;color:#666;cursor:not-allowed;}

.msg-quick-actions{display:flex;gap:8px;padding:0 50px;}
.msg-quick-btn{padding:6px 12px;background:#111;border:1px solid#222;border-radius:16px;color:#888;font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;gap:4px;}
.msg-quick-btn:hover{border-color:#fff;color:#fff;}

/* ATTACH MENU */
.msg-attach-menu{position:absolute;bottom:70px;left:20px;background:#111;border:1px solid#222;border-radius:12px;padding:8px;display:none;flex-direction:column;gap:4px;z-index:10;}
.msg-attach-menu.active{display:flex;}
.msg-attach-option{display:flex;align-items:center;gap:10px;padding:10px 14px;background:transparent;border:none;border-radius:8px;color:#fff;font-size:13px;font-weight:600;cursor:pointer;transition:background 0.2s;white-space:nowrap;}
.msg-attach-option:hover{background:rgba(255,255,255,0.1);}
.msg-attach-icon{font-size:18px;}

/* MODAL */
.msg-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.95);z-index:9999;align-items:center;justify-content:center;padding:20px;}
.msg-modal.active{display:flex;}
.msg-modal-content{background:#0f0f0f;border:1px solid#222;border-radius:16px;max-width:500px;width:100%;max-height:80vh;overflow-y:auto;padding:24px;}
.msg-modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
.msg-modal-title{font-size:20px;font-weight:800;}
.msg-modal-close{background:transparent;border:none;color:#fff;font-size:24px;cursor:pointer;}
.msg-modal-search{width:100%;padding:12px 16px;background:#111;border:1px solid#222;border-radius:8px;color:#fff;font-size:14px;outline:none;margin-bottom:16px;}
.msg-modal-list{display:flex;flex-direction:column;gap:8px;}
.msg-contact{display:flex;align-items:center;gap:12px;padding:12px;background:#111;border:1px solid#1a1a1a;border-radius:8px;cursor:pointer;transition:all 0.2s;}
.msg-contact:hover{border-color:#fff;}
.msg-contact.selected{background:#1a1a1a;border-color:#fff;}
.msg-contact-avatar{width:40px;height:40px;border-radius:50%;object-fit:cover;border:1px solid#222;flex-shrink:0;}
.msg-contact-info{flex:1;}
.msg-contact-name{font-size:14px;font-weight:700;margin-bottom:2px;}
.msg-contact-dept{font-size:12px;color:#555;}
.msg-contact-check{color:#22c55e;font-size:20px;display:none;}
.msg-contact.selected .msg-contact-check{display:block;}

.msg-modal-footer{display:flex;gap:10px;margin-top:20px;padding-top:20px;border-top:1px solid#222;}
.msg-modal-btn{flex:1;padding:12px;border-radius:8px;font-size:14px;font-weight:700;cursor:pointer;transition:opacity 0.2s;}
.msg-modal-btn.primary{background:#fff;color:#000;border:none;}
.msg-modal-btn.secondary{background:transparent;color:#fff;border:1px solid#333;}
.msg-modal-btn:hover{opacity:0.9;}

/* GROUP INFO */
.msg-group-info{padding:20px;border-bottom:1px solid#111;}
.msg-group-avatar{width:80px;height:80px;border-radius:50%;object-fit:cover;border:2px solid#222;margin:0 auto 16px;display:block;}
.msg-group-name{font-size:20px;font-weight:800;text-align:center;margin-bottom:4px;}
.msg-group-members{font-size:13px;color:#555;text-align:center;margin-bottom:16px;}
.msg-group-actions{display:flex;gap:8px;justify-content:center;}

/* USER PROFILE SIDEBAR */
.msg-profile{position:absolute;right:0;top:0;bottom:0;width:360px;background:#0f0f0f;border-left:1px solid#1a1a1a;transform:translateX(100%);transition:transform 0.3s;z-index:10;overflow-y:auto;display:flex;flex-direction:column;}
.msg-profile.active{transform:translateX(0);}
.msg-profile-header{padding:20px;border-bottom:1px solid#111;display:flex;align-items:center;gap:12px;}
.msg-profile-close{background:transparent;border:none;color:#fff;font-size:22px;cursor:pointer;padding:0;}
.msg-profile-avatar{width:80px;height:80px;border-radius:50%;object-fit:cover;border:2px solid#222;margin:20px auto;display:block;}
.msg-profile-name{font-size:20px;font-weight:800;text-align:center;margin-bottom:4px;}
.msg-profile-handle{font-size:14px;color:#555;text-align:center;margin-bottom:8px;}
.msg-profile-bio{font-size:13px;color:#888;text-align:center;padding:0 20px;margin-bottom:20px;line-height:1.6;}

.msg-profile-section{padding:20px;border-bottom:1px solid#111;}
.msg-profile-section-title{font-size:12px;font-weight:700;color:#444;text-transform:uppercase;letter-spacing:1px;margin-bottom:12px;}
.msg-profile-item{display:flex;align-items:center;justify-content:space-between;padding:12px 0;border-bottom:1px solid#0d0d0d;}
.msg-profile-item:last-child{border-bottom:none;}
.msg-profile-label{font-size:14px;color:#888;}
.msg-profile-value{font-size:14px;font-weight:600;}

.msg-profile-links{display:flex;flex-direction:column;gap:10px;}
.msg-social-link{display:flex;align-items:center;gap:12px;padding:12px;background:#111;border:1px solid#1a1a1a;border-radius:8px;text-decoration:none;color:#fff;transition:border 0.2s;}
.msg-social-link:hover{border-color:#fff;}
.msg-social-icon{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;}
.msg-social-icon.linkedin{background:#0077b5;}
.msg-social-icon.telegram{background:#0088cc;}
.msg-social-icon.whatsapp{background:#25d366;}
.msg-social-icon.instagram{background:linear-gradient(45deg,#f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);}
.msg-social-icon.tiktok{background:#000;border:1px solid#fff;}
.msg-social-icon.facebook{background:#1877f2;}
.msg-social-icon.twitter{background:#1da1f2;}
.msg-social-icon.github{background:#333;}
.msg-social-text{flex:1;}
.msg-social-name{font-size:13px;font-weight:700;margin-bottom:2px;}
.msg-social-username{font-size:11px;color:#666;}

.msg-profile-actions{padding:20px;display:flex;flex-direction:column;gap:10px;}
.msg-profile-btn{width:100%;padding:12px;border-radius:8px;font-size:14px;font-weight:700;cursor:pointer;transition:opacity 0.2s;text-align:center;}
.msg-profile-btn.primary{background:#fff;color:#000;border:none;}
.msg-profile-btn.secondary{background:transparent;color:#fff;border:1px solid#333;}
.msg-profile-btn.danger{background:transparent;color:#ef4444;border:1px solid#ef4444;}
.msg-profile-btn:hover{opacity:0.9;}

/* MEDIA VIEWER */
.msg-media-viewer{display:none;position:fixed;inset:0;background:#000;z-index:99999;flex-direction:column;}
.msg-media-viewer.active{display:flex;}
.msg-media-viewer-header{padding:16px 20px;display:flex;align-items:center;gap:12px;border-bottom:1px solid#1a1a1a;}
.msg-media-viewer-close{background:transparent;border:none;color:#fff;font-size:24px;cursor:pointer;}
.msg-media-viewer-body{flex:1;display:flex;align-items:center;justify-content:center;padding:20px;}
.msg-media-viewer-img{max-width:100%;max-height:100%;object-fit:contain;}

/* RESPONSIVE */
@media(max-width:768px){
.msg-sidebar{width:100%;border-right:none;}
.msg-main{position:absolute;inset:0;background:#000;transform:translateX(100%);transition:transform 0.3s;}
.msg-main.active{transform:translateX(0);}
.msg-profile{width:100%;}
}

/* HIDDEN */
.msg-hidden{display:none;}
</style>

<!-- SIDEBAR -->
<div class="msg-sidebar">
  <div class="msg-header">
    <button class="msg-back" onclick="document.getElementById('drawer').style.display='block';">←</button>
    <div class="msg-title">Messages</div>
    <button class="msg-new" onclick="openMsgModal('newChat')">+</button>
  </div>

  <div class="msg-search-wrap" style="position:relative;">
    <span class="msg-search-icon"><svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg></span>
    <input class="msg-search" id="msgSearch" type="text" placeholder="Search messages..." oninput="msgSearchChats(this.value)">
  </div>

  <div class="msg-tabs">
    <button class="msg-tab active" onclick="msgTabSwitch('all',this)">
      All
      <span class="msg-tab-badge" id="allBadge">3</span>
    </button>
    <button class="msg-tab" onclick="msgTabSwitch('unread',this)">
      Unread
      <span class="msg-tab-badge" id="unreadBadge">3</span>
    </button>
    <button class="msg-tab" onclick="msgTabSwitch('groups',this)">Groups</button>
    <button class="msg-tab" onclick="msgTabSwitch('archived',this)">Archived</button>
  </div>

  <div class="msg-list" id="msgList"></div>
</div>

<!-- MAIN CHAT AREA -->
<div class="msg-main" id="msgMain">
  <div class="msg-empty">
    <div class="msg-empty-icon">💬</div>
    <div class="msg-empty-text">Select a chat to start messaging</div>
  </div>
</div>

<!-- NEW CHAT MODAL -->
<div id="msgNewChatModal" class="msg-modal">
  <div class="msg-modal-content">
    <div class="msg-modal-header">
      <div class="msg-modal-title">New Message</div>
      <button class="msg-modal-close" onclick="closeMsgModal('newChat')">×</button>
    </div>
    <input class="msg-modal-search" id="contactSearch" type="text" placeholder="Search contacts..." oninput="msgSearchContacts(this.value)">
    <div class="msg-modal-list" id="contactList"></div>
    <div class="msg-modal-footer">
      <button class="msg-modal-btn secondary" onclick="closeMsgModal('newChat')">Cancel</button>
      <button class="msg-modal-btn primary" onclick="startNewChat()">Start Chat</button>
    </div>
  </div>
</div>

<!-- NEW GROUP MODAL -->
<div id="msgNewGroupModal" class="msg-modal">
  <div class="msg-modal-content">
    <div class="msg-modal-header">
      <div class="msg-modal-title">New Group</div>
      <button class="msg-modal-close" onclick="closeMsgModal('newGroup')">×</button>
    </div>
    <input class="msg-modal-search" type="text" placeholder="Group name...">
    <input class="msg-modal-search" id="groupMemberSearch" type="text" placeholder="Add members..." oninput="msgSearchContacts(this.value)">
    <div class="msg-modal-list" id="groupMemberList"></div>
    <div class="msg-modal-footer">
      <button class="msg-modal-btn secondary" onclick="closeMsgModal('newGroup')">Cancel</button>
      <button class="msg-modal-btn primary" onclick="createGroup()">Create Group</button>
    </div>
  </div>
</div>

<!-- ATTACH MENU -->
<div id="msgAttachMenu" class="msg-attach-menu">
  <button class="msg-attach-option" onclick="document.getElementById('msgFileInput').click();closeMsgAttachMenu()">
    <span class="msg-attach-icon">📄</span>
    <span>Document</span>
  </button>
  <button class="msg-attach-option" onclick="document.getElementById('msgImageInput').click();closeMsgAttachMenu()">
    <span class="msg-attach-icon">🖼️</span>
    <span>Photo</span>
  </button>
  <button class="msg-attach-option" onclick="document.getElementById('msgVideoInput').click();closeMsgAttachMenu()">
    <span class="msg-attach-icon">🎥</span>
    <span>Video</span>
  </button>
  <button class="msg-attach-option" onclick="startVoiceRecording();closeMsgAttachMenu()">
    <span class="msg-attach-icon">🎙️</span>
    <span>Voice Note</span>
  </button>
  <button class="msg-attach-option" onclick="alert('Location sharing coming soon');closeMsgAttachMenu()">
    <span class="msg-attach-icon">📍</span>
    <span>Location</span>
  </button>
  <button class="msg-attach-option" onclick="alert('Contact sharing coming soon');closeMsgAttachMenu()">
    <span class="msg-attach-icon">👤</span>
    <span>Contact</span>
  </button>
</div>

<input type="file" id="msgFileInput" class="msg-hidden" accept=".pdf,.doc,.docx,.txt" onchange="handleMsgFile(this,'file')">
<input type="file" id="msgImageInput" class="msg-hidden" accept="image/*" onchange="handleMsgFile(this,'image')">
<input type="file" id="msgVideoInput" class="msg-hidden" accept="video/*" onchange="handleMsgFile(this,'video')">

<!-- MEDIA VIEWER -->
<div id="msgMediaViewer" class="msg-media-viewer">
  <div class="msg-media-viewer-header">
    <button class="msg-media-viewer-close" onclick="closeMsgMediaViewer()">×</button>
    <div style="flex:1;"></div>
    <button class="msg-media-viewer-close" onclick="downloadMsgMedia()">⬇️</button>
  </div>
  <div class="msg-media-viewer-body">
    <img id="msgMediaViewerImg" class="msg-media-viewer-img" src="" alt="">
  </div>
</div>

<script>
// Sample data
const msgChats = [
  {id:1,name:'Ada James',avatar:'img2',dept:'EE · UNILAG',online:true,lastMsg:'That sounds great! When can we start?',time:'2m ago',unread:2,pinned:true,typing:false,verified:true},
  {id:2,name:'Samuel Obi',avatar:'img1',dept:'Math · OAU',online:false,lastMsg:'You: Check out this paper',time:'1h ago',unread:0,pinned:false,typing:false},
  {id:3,name:'CS Research Group',avatar:'img3',dept:'12 members',online:false,lastMsg:'Fatima: Meeting tomorrow at 10 AM',time:'3h ago',unread:1,pinned:true,typing:false,isGroup:true},
  {id:4,name:'Dr. Musa',avatar:'img2',dept:'Lecturer · LASU',online:false,lastMsg:'Please submit by Friday',time:'Yesterday',unread:0,pinned:false,typing:false,verified:true},
  {id:5,name:'Chidi Nwosu',avatar:'img1',dept:'Physics · FUTO',online:true,lastMsg:'Interesting findings!',time:'2d ago',unread:0,pinned:false,typing:true},
  {id:6,name:'Ngozi Eze',avatar:'img3',dept:'Biomedical · UNIBEN',online:false,lastMsg:'You: Thanks for the help',time:'1w ago',unread:0,pinned:false,typing:false}
];

const msgContacts = [
  {id:1,name:'Ada James',avatar:'img2',dept:'EE · UNILAG',verified:true,socials:{linkedin:'ada-james',telegram:'@adajames',whatsapp:'2348031234567',instagram:'@ada.james',tiktok:'@adaj',facebook:'ada.james.90'}},
  {id:2,name:'Samuel Obi',avatar:'img1',dept:'Math · OAU',socials:{linkedin:'samuel-obi',twitter:'@samobi',github:'samobi'}},
  {id:3,name:'Fatima Bello',avatar:'img3',dept:'CS · ABU',socials:{linkedin:'fatima-bello',telegram:'@fatimab'}},
  {id:4,name:'Chidi Nwosu',avatar:'img2',dept:'Physics · FUTO',socials:{linkedin:'chidi-nwosu',instagram:'@chidi_n'}},
  {id:5,name:'Ngozi Eze',avatar:'img1',dept:'Biomedical · UNIBEN',socials:{linkedin:'ngozi-eze',whatsapp:'2348091234567'}},
  {id:6,name:'Israel Mark',avatar:'img3',dept:'CS · LASU',verified:true,socials:{linkedin:'israel-mark',github:'israelmark',twitter:'@israelm'}}
];

const msgMessages = {
  1: [
    {id:1,sender:'Ada James',avatar:'img2',text:'Hey! How\'s the research going?',time:'10:23 AM',sent:false,read:true},
    {id:2,sender:'You',text:'Going well! Just finished the data analysis.',time:'10:25 AM',sent:true,read:true},
    {id:3,sender:'Ada James',avatar:'img2',text:'That\'s awesome! Can you share the results?',time:'10:26 AM',sent:false,read:true},
    {id:4,sender:'You',text:'Sure, let me send you the graphs',time:'10:28 AM',sent:true,read:true,hasImage:true,imageSrc:'img1'},
    {id:5,sender:'Ada James',avatar:'img2',text:'Perfect! This looks really promising.',time:'10:30 AM',sent:false,read:true},
    {id:6,sender:'Ada James',avatar:'img2',text:'That sounds great! When can we start?',time:'10:32 AM',sent:false,read:false}
  ],
  2: [
    {id:1,sender:'Samuel Obi',avatar:'img1',text:'Did you see the latest quantum computing paper?',time:'Yesterday',sent:false,read:true},
    {id:2,sender:'You',text:'Check out this paper',time:'Yesterday',sent:true,read:true,hasFile:true,fileName:'quantum_paper.pdf',fileSize:'2.4 MB'}
  ]
};

let currentChatId = null;
let selectedContacts = [];
let replyingTo = null;
let msgCurrentTab = 'all';

// Initialize
function initMessages() {
  renderMsgChats();
  renderMsgContacts();
}

// Render chat list
function renderMsgChats() {
  const container = document.getElementById('msgList');
  let filtered = msgChats;
  
  if (msgCurrentTab === 'unread') {
    filtered = msgChats.filter(c => c.unread > 0);
  } else if (msgCurrentTab === 'groups') {
    filtered = msgChats.filter(c => c.isGroup);
  } else if (msgCurrentTab === 'archived') {
    filtered = [];
  }
  
  container.innerHTML = filtered.map(chat => `
    <div class="msg-chat ${chat.unread > 0 ? 'unread' : ''} ${chat.pinned ? 'pinned' : ''} ${currentChatId === chat.id ? 'active' : ''}" onclick="openMsgChat(${chat.id})">
      ${chat.isGroup ? `
        <div class="msg-avatar-group">
          <img src="${chat.avatar}" alt="">
          <img src="img2" alt="">
        </div>
      ` : `
        <img src="${chat.avatar}" class="msg-avatar" alt="${chat.name}">
        ${chat.online ? '<span class="msg-online"></span>' : ''}
      `}
      <div class="msg-chat-info">
        <div class="msg-chat-top">
          <div class="msg-chat-name">
            ${chat.name}
            ${chat.verified ? '<span class="msg-verified">✓</span>' : ''}
          </div>
          <div class="msg-chat-time">${chat.time}</div>
        </div>
        <div class="msg-chat-preview ${chat.unread > 0 ? 'unread' : ''}">
          ${chat.typing ? '<span class="msg-typing">typing...</span>' : chat.lastMsg}
        </div>
      </div>
      ${chat.unread > 0 ? `<span class="msg-unread-badge">${chat.unread}</span>` : ''}
      ${chat.muted ? '<span class="msg-muted">🔕</span>' : ''}
    </div>
  `).join('');
  
  updateMsgBadges();
}

// Update badges
function updateMsgBadges() {
  const unreadCount = msgChats.filter(c => c.unread > 0).length;
  document.getElementById('allBadge').textContent = unreadCount;
  document.getElementById('unreadBadge').textContent = unreadCount;
  document.getElementById('allBadge').style.display = unreadCount > 0 ? 'block' : 'none';
  document.getElementById('unreadBadge').style.display = unreadCount > 0 ? 'block' : 'none';
}

// Tab switch
function msgTabSwitch(tab, btn) {
  document.querySelectorAll('.msg-tab').forEach(t => t.classList.remove('active'));
  btn.classList.add('active');
  msgCurrentTab = tab;
  renderMsgChats();
}

// Search chats
function msgSearchChats(query) {
  const q = query.toLowerCase().trim();
  document.querySelectorAll('.msg-chat').forEach(chat => {
    const name = chat.querySelector('.msg-chat-name').textContent.toLowerCase();
    const preview = chat.querySelector('.msg-chat-preview').textContent.toLowerCase();
    chat.style.display = (name.includes(q) || preview.includes(q)) ? 'flex' : 'none';
  });
}

// Open chat
function openMsgChat(chatId) {
  currentChatId = chatId;
  const chat = msgChats.find(c => c.id === chatId);
  if (!chat) return;
  
  // Mark as read
  chat.unread = 0;
  renderMsgChats();
  
  const main = document.getElementById('msgMain');
  main.classList.add('active');
  
  // Build chat UI
  const contactInfo = msgContacts.find(c => c.name === chat.name);
  
  main.innerHTML = `
    <div class="msg-chat-header">
      <button class="msg-back" onclick="closeMsgChat()" style="display:none;">←</button>
      <img src="${chat.avatar}" class="msg-chat-header-avatar">
      <div class="msg-chat-header-info">
        <div class="msg-chat-header-name">${chat.name}</div>
        <div class="msg-chat-header-status ${chat.online ? 'online' : ''}">${chat.online ? 'Active now' : chat.dept}</div>
      </div>
      <div class="msg-chat-header-actions">
        <button class="msg-header-btn" onclick="alert('Audio call')">📞</button>
        <button class="msg-header-btn" onclick="alert('Video call')">📹</button>
        <button class="msg-header-btn" onclick="toggleMsgProfile()">ℹ️</button>
      </div>
    </div>
    
    <div class="msg-messages" id="msgMessages"></div>
    
    <div class="msg-input-wrap">
      <div class="msg-replying-to" id="msgReplyingTo">
        <div class="msg-replying-label">Replying to <span id="replyName"></span></div>
        <div class="msg-replying-text" id="replyText"></div>
        <button class="msg-reply-close" onclick="cancelMsgReply()">×</button>
      </div>
      <div class="msg-quick-actions" style="display:none;">
        <button class="msg-quick-btn">👍</button>
        <button class="msg-quick-btn">❤️</button>
        <button class="msg-quick-btn">😂</button>
        <button class="msg-quick-btn">🔥</button>
      </div>
      <div class="msg-input-bar">
        <button class="msg-attach-btn" onclick="toggleMsgAttachMenu()">📎</button>
        <textarea id="msgInput" class="msg-input" placeholder="Type a message..." rows="1" oninput="autoResizeMsgInput(this)" onkeypress="handleMsgEnter(event)"></textarea>
        <button id="msgSendBtn" class="msg-send" onclick="sendMsg()" disabled>➤</button>
      </div>
    </div>
    
    <div class="msg-profile" id="msgProfile">
      <div class="msg-profile-header">
        <button class="msg-profile-close" onclick="toggleMsgProfile()">←</button>
        <div style="flex:1;font-size:16px;font-weight:700;">Contact Info</div>
      </div>
      <img src="${chat.avatar}" class="msg-profile-avatar">
      <div class="msg-profile-name">${chat.name}</div>
      <div class="msg-profile-handle">${chat.dept}</div>
      <div class="msg-profile-bio">CS student researching ML & networks. Always happy to collaborate on interesting projects.</div>
      
      ${contactInfo && contactInfo.socials ? `
        <div class="msg-profile-section">
          <div class="msg-profile-section-title">Social Links</div>
          <div class="msg-profile-links">
            ${contactInfo.socials.linkedin ? `
              <a href="https://linkedin.com/in/${contactInfo.socials.linkedin}" target="_blank" class="msg-social-link">
                <div class="msg-social-icon linkedin">in</div>
                <div class="msg-social-text">
                  <div class="msg-social-name">LinkedIn</div>
                  <div class="msg-social-username">${contactInfo.socials.linkedin}</div>
                </div>
              </a>
            ` : ''}
            ${contactInfo.socials.telegram ? `
              <a href="https://t.me/${contactInfo.socials.telegram.replace('@','')}" target="_blank" class="msg-social-link">
                <div class="msg-social-icon telegram">✈️</div>
                <div class="msg-social-text">
                  <div class="msg-social-name">Telegram</div>
                  <div class="msg-social-username">${contactInfo.socials.telegram}</div>
                </div>
              </a>
            ` : ''}
            ${contactInfo.socials.whatsapp ? `
              <a href="https://wa.me/${contactInfo.socials.whatsapp}" target="_blank" class="msg-social-link">
                <div class="msg-social-icon whatsapp">💬</div>
                <div class="msg-social-text">
                  <div class="msg-social-name">WhatsApp Business</div>
                  <div class="msg-social-username">+${contactInfo.socials.whatsapp}</div>
                </div>
              </a>
            ` : ''}
            ${contactInfo.socials.instagram ? `
              <a href="https://instagram.com/${contactInfo.socials.instagram.replace('@','')}" target="_blank" class="msg-social-link">
                <div class="msg-social-icon instagram">📷</div>
                <div class="msg-social-text">
                  <div class="msg-social-name">Instagram</div>
                  <div class="msg-social-username">${contactInfo.socials.instagram}</div>
                </div>
              </a>
            ` : ''}
            ${contactInfo.socials.tiktok ? `
              <a href="https://tiktok.com/${contactInfo.socials.tiktok.replace('@','')}" target="_blank" class="msg-social-link">
                <div class="msg-social-icon tiktok">🎵</div>
                <div class="msg-social-text">
                  <div class="msg-social-name">TikTok</div>
                  <div class="msg-social-username">${contactInfo.socials.tiktok}</div>
                </div>
              </a>
            ` : ''}
            ${contactInfo.socials.facebook ? `
              <a href="https://facebook.com/${contactInfo.socials.facebook}" target="_blank" class="msg-social-link">
                <div class="msg-social-icon facebook">f</div>
                <div class="msg-social-text">
                  <div class="msg-social-name">Facebook</div>
                  <div class="msg-social-username">${contactInfo.socials.facebook}</div>
                </div>
              </a>
            ` : ''}
            ${contactInfo.socials.twitter ? `
              <a href="https://twitter.com/${contactInfo.socials.twitter.replace('@','')}" target="_blank" class="msg-social-link">
                <div class="msg-social-icon twitter">🐦</div>
                <div class="msg-social-text">
                  <div class="msg-social-name">Twitter/X</div>
                  <div class="msg-social-username">${contactInfo.socials.twitter}</div>
                </div>
              </a>
            ` : ''}
            ${contactInfo.socials.github ? `
              <a href="https://github.com/${contactInfo.socials.github}" target="_blank" class="msg-social-link">
                <div class="msg-social-icon github">⚙️</div>
                <div class="msg-social-text">
                  <div class="msg-social-name">GitHub</div>
                  <div class="msg-social-username">${contactInfo.socials.github}</div>
                </div>
              </a>
            ` : ''}
          </div>
        </div>
      ` : ''}
      
      <div class="msg-profile-section">
        <div class="msg-profile-section-title">Settings</div>
        <div class="msg-profile-item">
          <span class="msg-profile-label">Mute Notifications</span>
          <input type="checkbox" onchange="alert('Muted')">
        </div>
        <div class="msg-profile-item">
          <span class="msg-profile-label">Disappearing Messages</span>
          <span class="msg-profile-value">Off</span>
        </div>
      </div>
      
      <div class="msg-profile-actions">
        <button class="msg-profile-btn primary" onclick="alert('View Profile')">View Full Profile</button>
        <button class="msg-profile-btn secondary" onclick="alert('Search in conversation')">Search in Chat</button>
        <button class="msg-profile-btn danger" onclick="if(confirm('Block ${chat.name}?'))alert('Blocked')">Block Contact</button>
      </div>
    </div>
  `;
  
  renderMsgMessages(chatId);
  
  // Show back button on mobile
  if (window.innerWidth <= 768) {
    main.querySelector('.msg-back').style.display = 'block';
  }
}

// Render messages
function renderMsgMessages(chatId) {
  const messages = msgMessages[chatId] || [];
  const container = document.getElementById('msgMessages');
  
  let html = '<div class="msg-date-divider">Today</div>';
  
  messages.forEach(msg => {
    html += `
      <div class="msg-bubble-wrap ${msg.sent ? 'sent' : ''}">
        ${!msg.sent ? `<img src="${msg.avatar}" class="msg-bubble-avatar">` : ''}
        <div class="msg-bubble">
          ${!msg.sent ? `<div class="msg-bubble-name">${msg.sender}</div>` : ''}
          ${msg.replyTo ? `
            <div class="msg-reply-preview">
              <div class="msg-reply-name">${msg.replyTo.sender}</div>
              <div class="msg-reply-text">${msg.replyTo.text}</div>
            </div>
          ` : ''}
          <div class="msg-bubble-text">${msg.text}</div>
          ${msg.hasImage ? `<img src="${msg.imageSrc}" class="msg-bubble-img" onclick="openMsgMediaViewer('${msg.imageSrc}')">` : ''}
          ${msg.hasFile ? `
            <div class="msg-bubble-file">
              <div class="msg-bubble-file-icon">📄</div>
              <div class="msg-bubble-file-info">
                <div class="msg-bubble-file-name">${msg.fileName}</div>
                <div class="msg-bubble-file-size">${msg.fileSize}</div>
              </div>
            </div>
          ` : ''}
          ${msg.reactions ? `
            <div class="msg-reactions">
              ${msg.reactions.map(r => `<span class="msg-reaction">${r.emoji}<span class="msg-reaction-count">${r.count}</span></span>`).join('')}
            </div>
          ` : ''}
          <div class="msg-bubble-footer">
            <span>${msg.time}</span>
            ${msg.sent ? `<span class="msg-read-receipt">${msg.read ? '✓✓' : '✓'}</span>` : ''}
          </div>
        </div>
      </div>
    `;
  });
  
  container.innerHTML = html;
  container.scrollTop = container.scrollHeight;
}

// Close chat (mobile)
function closeMsgChat() {
  document.getElementById('msgMain').classList.remove('active');
}

// Toggle profile sidebar
function toggleMsgProfile() {
  document.getElementById('msgProfile').classList.toggle('active');
}

// Auto resize input
function autoResizeMsgInput(textarea) {
  textarea.style.height = 'auto';
  textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
  
  const sendBtn = document.getElementById('msgSendBtn');
  sendBtn.disabled = !textarea.value.trim();
}

// Handle enter key
function handleMsgEnter(e) {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    sendMsg();
  }
}

// Send message
function sendMsg() {
  const input = document.getElementById('msgInput');
  const text = input.value.trim();
  if (!text || !currentChatId) return;
  
  const newMsg = {
    id: Date.now(),
    sender: 'You',
    text,
    time: 'Just now',
    sent: true,
    read: false
  };
  
  if (replyingTo) {
    newMsg.replyTo = replyingTo;
    cancelMsgReply();
  }
  
  if (!msgMessages[currentChatId]) msgMessages[currentChatId] = [];
  msgMessages[currentChatId].push(newMsg);
  
  renderMsgMessages(currentChatId);
  input.value = '';
  autoResizeMsgInput(input);
  
  // Update chat list
  const chat = msgChats.find(c => c.id === currentChatId);
  if (chat) {
    chat.lastMsg = 'You: ' + text;
    chat.time = 'Just now';
    renderMsgChats();
  }
}

// Reply to message
function replyToMsg(msgId) {
  const msg = msgMessages[currentChatId].find(m => m.id === msgId);
  if (!msg) return;
  
  replyingTo = msg;
  document.getElementById('msgReplyingTo').classList.add('active');
  document.getElementById('replyName').textContent = msg.sender;
  document.getElementById('replyText').textContent = msg.text;
  document.getElementById('msgInput').focus();
}

// Cancel reply
function cancelMsgReply() {
  replyingTo = null;
  document.getElementById('msgReplyingTo').classList.remove('active');
}

// Attach menu
function toggleMsgAttachMenu() {
  document.getElementById('msgAttachMenu').classList.toggle('active');
}

function closeMsgAttachMenu() {
  document.getElementById('msgAttachMenu').classList.remove('active');
}

// Handle file upload
function handleMsgFile(input, type) {
  if (input.files && input.files[0]) {
    const file = input.files[0];
    const reader = new FileReader();
    
    reader.onload = function(e) {
      const newMsg = {
        id: Date.now(),
        sender: 'You',
        text: type === 'file' ? '' : 'Sent a ' + type,
        time: 'Just now',
        sent: true,
        read: false
      };
      
      if (type === 'image') {
        newMsg.hasImage = true;
        newMsg.imageSrc = e.target.result;
      } else if (type === 'file') {
        newMsg.hasFile = true;
        newMsg.fileName = file.name;
        newMsg.fileSize = (file.size / 1024 / 1024).toFixed(2) + ' MB';
      }
      
      if (!msgMessages[currentChatId]) msgMessages[currentChatId] = [];
      msgMessages[currentChatId].push(newMsg);
      renderMsgMessages(currentChatId);
    };
    
    reader.readAsDataURL(file);
  }
}

// Voice recording
function startVoiceRecording() {
  alert('Voice recording started! (Feature coming soon)');
  // TODO: Implement actual voice recording
}

// Media viewer
function openMsgMediaViewer(src) {
  document.getElementById('msgMediaViewerImg').src = src;
  document.getElementById('msgMediaViewer').classList.add('active');
}

function closeMsgMediaViewer() {
  document.getElementById('msgMediaViewer').classList.remove('active');
}

function downloadMsgMedia() {
  const src = document.getElementById('msgMediaViewerImg').src;
  const a = document.createElement('a');
  a.href = src;
  a.download = 'image.jpg';
  a.click();
}

// Render contacts
function renderMsgContacts() {
  const lists = ['contactList', 'groupMemberList'];
  lists.forEach(listId => {
    const container = document.getElementById(listId);
    if (!container) return;
    
    container.innerHTML = msgContacts.map(contact => `
      <div class="msg-contact" onclick="toggleMsgContact(${contact.id},'${listId}')" data-id="${contact.id}">
        <img src="${contact.avatar}" class="msg-contact-avatar">
        <div class="msg-contact-info">
          <div class="msg-contact-name">
            ${contact.name}
            ${contact.verified ? '<span class="msg-verified">✓</span>' : ''}
          </div>
          <div class="msg-contact-dept">${contact.dept}</div>
        </div>
        <span class="msg-contact-check">✓</span>
      </div>
    `).join('');
  });
}

// Search contacts
function msgSearchContacts(query) {
  const q = query.toLowerCase().trim();
  document.querySelectorAll('.msg-contact').forEach(contact => {
    const name = contact.querySelector('.msg-contact-name').textContent.toLowerCase();
    const dept = contact.querySelector('.msg-contact-dept').textContent.toLowerCase();
    contact.style.display = (name.includes(q) || dept.includes(q)) ? 'flex' : 'none';
  });
}

// Toggle contact selection
function toggleMsgContact(id, listId) {
  const contact = document.querySelector(`#${listId} .msg-contact[data-id="${id}"]`);
  contact.classList.toggle('selected');
  
  if (contact.classList.contains('selected')) {
    if (!selectedContacts.includes(id)) selectedContacts.push(id);
  } else {
    selectedContacts = selectedContacts.filter(cid => cid !== id);
  }
}

// Modals
function openMsgModal(type) {
  selectedContacts = [];
  document.querySelectorAll('.msg-contact').forEach(c => c.classList.remove('selected'));
  
  if (type === 'newChat') {
    document.getElementById('msgNewChatModal').classList.add('active');
  } else if (type === 'newGroup') {
    document.getElementById('msgNewGroupModal').classList.add('active');
  }
}

function closeMsgModal(type) {
  if (type === 'newChat') {
    document.getElementById('msgNewChatModal').classList.remove('active');
  } else if (type === 'newGroup') {
    document.getElementById('msgNewGroupModal').classList.remove('active');
  }
}

// Start new chat
function startNewChat() {
  if (selectedContacts.length === 0) {
    alert('Please select a contact');
    return;
  }
  
  if (selectedContacts.length === 1) {
    const contactId = selectedContacts[0];
    const contact = msgContacts.find(c => c.id === contactId);
    
    // Check if chat already exists
    let chat = msgChats.find(c => c.name === contact.name);
    if (!chat) {
      chat = {
        id: msgChats.length + 1,
        name: contact.name,
        avatar: contact.avatar,
        dept: contact.dept,
        online: false,
        lastMsg: 'Start a conversation',
        time: 'Now',
        unread: 0,
        pinned: false,
        typing: false,
        verified: contact.verified
      };
      msgChats.unshift(chat);
    }
    
    closeMsgModal('newChat');
    renderMsgChats();
    openMsgChat(chat.id);
  } else {
    alert('Select only one contact or create a group');
  }
}

// Create group
function createGroup() {
  if (selectedContacts.length < 2) {
    alert('Select at least 2 members');
    return;
  }
  
  alert('Group created! (Feature fully functional in backend)');
  closeMsgModal('newGroup');
}

// Close modals on outside click
document.addEventListener('click', (e) => {
  const attachMenu = document.getElementById('msgAttachMenu');
  const attachBtn = document.querySelector('.msg-attach-btn');
  if (attachMenu && attachBtn && !attachMenu.contains(e.target) && !attachBtn.contains(e.target)) {
    closeMsgAttachMenu();
  }
});

// Initialize on load
initMessages();
</script>

</section>


  <script>
    const section = document.querySelector('.newMainaccount');
    const drawer = section.querySelector('.drawer');
    const overlay = section.querySelector('.overlay');
    const btn = section.querySelector('.menuBtn');

    btn.onclick = openDrawer;
    overlay.onclick = closeDrawer;

    function openDrawer() {
      drawer.classList.add('open');
      overlay.classList.add('show');
    }

    function closeDrawer() {
      drawer.classList.remove('open');
      overlay.classList.remove('show');
    }

    let startX = 0;

    section.addEventListener('touchstart', e => {
      startX = e.touches[0].clientX;
    });

    section.addEventListener('touchend', e => {
      const endX = e.changedTouches[0].clientX;
      const diff = endX - startX;

      if (diff > 70) openDrawer();    // swipe right
      if (diff < -70) closeDrawer();  // swipe left
    });
  </script>


<!-- NOTIFICATION BELL BUTTON (add this to your main header/nav) -->

<!-- NOTIFICATIONS SIDEBAR -->
<div id="notifPanel" style="position:fixed;top:0;right:-100%;width:420px;max-width:90vw;height:100vh;background:#000;border-left:1px solid #1a1a1a;z-index:10000;overflow-y:auto;transition:right 0.3s;display:flex;flex-direction:column;scrollbar-width:none;">
  
  <style>
    #notifPanel::-webkit-scrollbar{display:none;}
    
    /* HEADER */
    .notif-header{position:sticky;top:0;background:#000;border-bottom:1px solid #1a1a1a;padding:18px 20px;z-index:10;display:flex;justify-content:space-between;align-items:center;}
    .notif-title{font-size:20px;font-weight:800;letter-spacing:-0.5px;}
    .notif-close{background:transparent;border:1px solid#333;border-radius:50%;color:#fff;font-size:20px;cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center;transition:all 0.2s;}
    .notif-close:hover{background:#fff;color:#000;}
    
    /* TABS */
    .notif-tabs{display:flex;gap:0;border-bottom:1px solid#111;padding:0 20px;position:sticky;top:62px;background:#000;z-index:9;}
    .notif-tab{flex:1;padding:12px 0;background:transparent;border:none;border-bottom:2px solid transparent;color:#444;font-size:13px;font-weight:700;cursor:pointer;transition:all 0.2s;text-align:center;}
    .notif-tab.active{color:#fff;border-bottom-color:#fff;}
    
    /* FILTER PILLS */
    .notif-filters{display:flex;gap:8px;padding:12px 20px;overflow-x:auto;scrollbar-width:none;border-bottom:1px solid#0d0d0d;}
    .notif-filters::-webkit-scrollbar{display:none;}
    .notif-filter{padding:6px 12px;background:transparent;border:1px solid#222;border-radius:16px;color:#555;font-size:11px;font-weight:700;cursor:pointer;transition:all 0.2s;white-space:nowrap;text-transform:uppercase;letter-spacing:0.5px;}
    .notif-filter:hover,.notif-filter.active{background:#fff;color:#000;border-color:#fff;}
    
    /* NOTIFICATIONS LIST */
    .notif-list{flex:1;overflow-y:auto;}
    .notif-empty{padding:80px 20px;text-align:center;color:#333;font-size:14px;}
    
    /* NOTIFICATION ITEM */
    .notif-item{display:flex;gap:12px;padding:14px 20px;border-bottom:1px solid#0d0d0d;cursor:pointer;transition:background 0.15s;position:relative;}
    .notif-item:hover{background:rgba(255,255,255,0.02);}
    .notif-item.unread{background:rgba(255,255,255,0.03);}
    .notif-item.unread::before{content:'';position:absolute;left:0;top:50%;transform:translateY(-50%);width:3px;height:60%;background:#3b82f6;border-radius:0 2px 2px 0;}
    
    .notif-avatar{width:44px;height:44px;border-radius:50%;object-fit:cover;border:1px solid#1e1e1e;flex-shrink:0;}
    .notif-icon{width:44px;height:44px;border-radius:50%;background:#111;border:1px solid#1e1e1e;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0;}
    
    .notif-body{flex:1;min-width:0;}
    .notif-text{font-size:14px;line-height:1.5;margin-bottom:4px;color:#ccc;}
    .notif-text strong{color:#fff;font-weight:700;}
    .notif-time{font-size:11px;color:#444;font-variant-numeric:tabular-nums;}
    
    .notif-preview{margin-top:8px;padding:10px;background:#0a0a0a;border:1px solid#1a1a1a;border-radius:8px;font-size:13px;color:#666;line-height:1.4;}
    
    .notif-actions{display:flex;gap:6px;margin-top:10px;}
    .notif-btn{padding:7px 14px;background:transparent;border:1px solid#222;border-radius:6px;color:#888;font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s;}
    .notif-btn:hover{border-color:#fff;color:#fff;}
    .notif-btn.primary{background:#fff;color:#000;border-color:#fff;}
    .notif-btn.primary:hover{opacity:0.9;}
    
    /* MARK ALL READ */
    .notif-mark-all{padding:12px 20px;text-align:center;border-bottom:1px solid#0d0d0d;}
    .notif-mark-btn{background:transparent;border:1px solid#222;border-radius:8px;color:#666;font-size:12px;font-weight:700;cursor:pointer;padding:8px 16px;transition:all 0.2s;}
    .notif-mark-btn:hover{border-color:#fff;color:#fff;}
    
    /* SETTINGS LINK */
    .notif-settings{padding:16px 20px;border-top:1px solid#111;text-align:center;position:sticky;bottom:0;background:#000;}
    .notif-settings-btn{background:transparent;border:1px solid#333;border-radius:8px;color:#888;font-size:13px;font-weight:600;cursor:pointer;padding:10px 20px;transition:all 0.2s;width:100%;}
    .notif-settings-btn:hover{border-color:#fff;color:#fff;}
  </style>
  
  <!-- HEADER -->
  <div class="notif-header">
    <div class="notif-title">Notifications</div>
    <button class="notif-close" onclick="notifClose()">×</button>
  </div>
  
  <!-- TABS -->
  <div class="notif-tabs">
    <button class="notif-tab active" onclick="notifTabSwitch('all',this)">All</button>
    <button class="notif-tab" onclick="notifTabSwitch('unread',this)">Unread</button>
    <button class="notif-tab" onclick="notifTabSwitch('mentions',this)">Mentions</button>
  </div>
  
  <!-- FILTERS -->
  <div class="notif-filters">
    <button class="notif-filter active" onclick="notifFilterSwitch('all',this)">All</button>
    <button class="notif-filter" onclick="notifFilterSwitch('likes',this)">Likes</button>
    <button class="notif-filter" onclick="notifFilterSwitch('comments',this)">Comments</button>
    <button class="notif-filter" onclick="notifFilterSwitch('follows',this)">Follows</button>
    <button class="notif-filter" onclick="notifFilterSwitch('posts',this)">Posts</button>
    <button class="notif-filter" onclick="notifFilterSwitch('events',this)">Events</button>
    <button class="notif-filter" onclick="notifFilterSwitch('bounties',this)">Bounties</button>
    <button class="notif-filter" onclick="notifFilterSwitch('mentions',this)">Mentions</button>
  </div>
  
  <!-- MARK ALL READ -->
  <div class="notif-mark-all">
    <button class="notif-mark-btn" onclick="notifMarkAllRead()">Mark all as read</button>
  </div>
  
  <!-- NOTIFICATIONS LIST -->
  <div class="notif-list" id="notifList"></div>
  
  <!-- SETTINGS -->
  <div class="notif-settings">
    <button class="notif-settings-btn" onclick="alert('Notification settings coming soon')">⚙️ Notification Settings</button>
  </div>
  
</div>

<script>
// Sample notification data
const notifData = [
  {
    id: 1,
    type: 'like',
    user: 'Ada James',
    avatar: 'img2',
    action: 'liked your post',
    preview: 'Built the first working prototype of my campus AI navigation system...',
    time: '2 min ago',
    unread: true
  },
  {
    id: 2,
    type: 'comment',
    user: 'Samuel Obi',
    avatar: 'img1',
    action: 'commented on your research paper',
    preview: 'This is groundbreaking! Have you considered expanding the dataset?',
    time: '15 min ago',
    unread: true
  },
  {
    id: 3,
    type: 'follow',
    user: 'Fatima Bello',
    avatar: 'img3',
    action: 'started following you',
    time: '1 hour ago',
    unread: true
  },
  {
    id: 4,
    type: 'mention',
    user: 'Chidi Nwosu',
    avatar: 'img2',
    action: 'mentioned you in a post',
    preview: '@IsraelMark check out this quantum computing breakthrough! Your RL research could apply here.',
    time: '2 hours ago',
    unread: false
  },
  {
    id: 5,
    type: 'post',
    user: 'Ngozi Eze',
    avatar: 'img1',
    action: 'shared a new research paper',
    preview: 'CRISPR-Based Gene Therapy in Sickle Cell Disease',
    time: '3 hours ago',
    unread: false
  },
  {
    id: 6,
    type: 'event',
    icon: '📅',
    action: 'Reminder: AI & Research Networking Meetup',
    preview: 'Event starts tomorrow at 10:00 AM • Main Auditorium, UNILAG',
    time: '5 hours ago',
    unread: false
  },
  {
    id: 7,
    type: 'bounty',
    icon: '💰',
    action: 'New bounty matches your skills',
    preview: 'Review BCI ethics & methods preprint • ₦220',
    time: '6 hours ago',
    unread: false
  },
  {
    id: 8,
    type: 'like',
    user: 'Israel Mark',
    avatar: 'img3',
    action: 'liked your comment',
    preview: 'Incredible work. Would love to collaborate on this.',
    time: '8 hours ago',
    unread: false
  },
  {
    id: 9,
    type: 'comment',
    user: 'Ada James',
    avatar: 'img2',
    action: 'replied to your comment',
    preview: 'Absolutely! Let me send you the data files. What format works best?',
    time: '10 hours ago',
    unread: false
  },
  {
    id: 10,
    type: 'follow',
    user: 'Dr. Musa',
    avatar: 'img1',
    action: 'started following you',
    time: '12 hours ago',
    unread: false
  },
  {
    id: 11,
    type: 'event',
    icon: '📅',
    action: 'Event RSVP confirmed',
    preview: 'You\'re attending: National STEM Conference 2026',
    time: '1 day ago',
    unread: false
  },
  {
    id: 12,
    type: 'bounty',
    icon: '💰',
    action: 'Bounty application accepted',
    preview: 'Your application for "Annotate 8k cells" has been accepted. Check your messages.',
    time: '1 day ago',
    unread: false
  },
  {
    id: 13,
    type: 'post',
    user: 'Samuel Obi',
    avatar: 'img3',
    action: 'posted a new event',
    preview: 'Quantum Computing Workshop • Mar 5 • FUTO Physics Dept',
    time: '2 days ago',
    unread: false
  },
  {
    id: 14,
    type: 'like',
    user: 'Fatima Bello',
    avatar: 'img2',
    action: 'and 12 others liked your research paper',
    preview: 'Reinforcement Learning for Adaptive Network Routing',
    time: '2 days ago',
    unread: false
  },
  {
    id: 15,
    type: 'mention',
    user: 'Chidi Nwosu',
    avatar: 'img1',
    action: 'tagged you in a collaboration request',
    preview: 'Looking for ML experts to collaborate on quantum-classical hybrid algorithms. @IsraelMark interested?',
    time: '3 days ago',
    unread: false
  },
  {
    id: 16,
    type: 'system',
    icon: '🎉',
    action: 'Milestone reached!',
    preview: 'Your research paper reached 100 citations. Keep up the great work!',
    time: '3 days ago',
    unread: false
  },
  {
    id: 17,
    type: 'comment',
    user: 'Ngozi Eze',
    avatar: 'img3',
    action: 'commented on your poll',
    preview: 'Option 2 makes the most sense given current infrastructure limitations.',
    time: '4 days ago',
    unread: false
  },
  {
    id: 18,
    type: 'bounty',
    icon: '💰',
    action: 'Payment received',
    preview: '₦480 deposited to your wallet for completed bounty.',
    time: '5 days ago',
    unread: false
  },
  {
    id: 19,
    type: 'follow',
    user: 'Israel Mark',
    avatar: 'img2',
    action: 'accepted your follow request',
    time: '1 week ago',
    unread: false
  },
  {
    id: 20,
    type: 'system',
    icon: '✨',
    action: 'Welcome to the community!',
    preview: 'Complete your profile to get personalized recommendations and connect with researchers.',
    time: '1 week ago',
    unread: false
  }
];

let notifCurrentTab = 'all';
let notifCurrentFilter = 'all';

// Open panel
function notifOpen() {
  document.getElementById('notifPanel').style.right = '0';
  notifRender();
}

// Close panel
function notifClose() {
  document.getElementById('notifPanel').style.right = '-100%';
}

// Tab switch
function notifTabSwitch(tab, btn) {
  document.querySelectorAll('.notif-tab').forEach(t => t.classList.remove('active'));
  btn.classList.add('active');
  notifCurrentTab = tab;
  notifRender();
}

// Filter switch
function notifFilterSwitch(filter, btn) {
  document.querySelectorAll('.notif-filter').forEach(f => f.classList.remove('active'));
  btn.classList.add('active');
  notifCurrentFilter = filter;
  notifRender();
}

// Render notifications
function notifRender() {
  let filtered = notifData;
  
  // Apply tab filter
  if (notifCurrentTab === 'unread') {
    filtered = filtered.filter(n => n.unread);
  } else if (notifCurrentTab === 'mentions') {
    filtered = filtered.filter(n => n.type === 'mention');
  }
  
  // Apply type filter
  if (notifCurrentFilter !== 'all') {
    if (notifCurrentFilter === 'likes') {
      filtered = filtered.filter(n => n.type === 'like');
    } else if (notifCurrentFilter === 'comments') {
      filtered = filtered.filter(n => n.type === 'comment');
    } else if (notifCurrentFilter === 'follows') {
      filtered = filtered.filter(n => n.type === 'follow');
    } else if (notifCurrentFilter === 'posts') {
      filtered = filtered.filter(n => n.type === 'post');
    } else if (notifCurrentFilter === 'events') {
      filtered = filtered.filter(n => n.type === 'event');
    } else if (notifCurrentFilter === 'bounties') {
      filtered = filtered.filter(n => n.type === 'bounty');
    } else if (notifCurrentFilter === 'mentions') {
      filtered = filtered.filter(n => n.type === 'mention');
    }
  }
  
  const container = document.getElementById('notifList');
  
  if (filtered.length === 0) {
    container.innerHTML = '<div class="notif-empty">No notifications</div>';
    return;
  }
  
  container.innerHTML = filtered.map(n => notifBuildItem(n)).join('');
  
  // Update badge
  const unreadCount = notifData.filter(n => n.unread).length;
  const badge = document.getElementById('notifBadge');
  if (unreadCount > 0) {
    badge.style.display = 'block';
  } else {
    badge.style.display = 'none';
  }
}

// Build notification item
function notifBuildItem(n) {
  const unreadClass = n.unread ? 'unread' : '';
  
  let iconHTML = '';
  if (n.avatar) {
    iconHTML = `<img src="${n.avatar}" class="notif-avatar">`;
  } else if (n.icon) {
    iconHTML = `<div class="notif-icon">${n.icon}</div>`;
  }
  
  let previewHTML = '';
  if (n.preview) {
    previewHTML = `<div class="notif-preview">${n.preview}</div>`;
  }
  
  let actionsHTML = '';
  if (n.type === 'follow') {
    actionsHTML = `
      <div class="notif-actions">
        <button class="notif-btn primary" onclick="event.stopPropagation();alert('Following ${n.user}')">Follow Back</button>
        <button class="notif-btn" onclick="event.stopPropagation();alert('View profile')">View Profile</button>
      </div>
    `;
  } else if (n.type === 'bounty' && n.action.includes('matches your skills')) {
    actionsHTML = `
      <div class="notif-actions">
        <button class="notif-btn primary" onclick="event.stopPropagation();alert('Applying to bounty')">Apply Now</button>
        <button class="notif-btn" onclick="event.stopPropagation();alert('View details')">View Details</button>
      </div>
    `;
  } else if (n.type === 'event' && n.action.includes('Reminder')) {
    actionsHTML = `
      <div class="notif-actions">
        <button class="notif-btn primary" onclick="event.stopPropagation();alert('Opening event')">View Event</button>
        <button class="notif-btn" onclick="event.stopPropagation();alert('Snooze')">Remind Me Later</button>
      </div>
    `;
  }
  
  return `
    <div class="notif-item ${unreadClass}" onclick="notifMarkRead(${n.id})">
      ${iconHTML}
      <div class="notif-body">
        <div class="notif-text">
          ${n.user ? `<strong>${n.user}</strong> ` : ''}${n.action}
        </div>
        <div class="notif-time">${n.time}</div>
        ${previewHTML}
        ${actionsHTML}
      </div>
    </div>
  `;
}

// Mark notification as read
function notifMarkRead(id) {
  const notif = notifData.find(n => n.id === id);
  if (notif) {
    notif.unread = false;
    notifRender();
  }
}

// Mark all as read
function notifMarkAllRead() {
  notifData.forEach(n => n.unread = false);
  notifRender();
  alert('All notifications marked as read');
}

// Initialize - show badge if unread
document.addEventListener('DOMContentLoaded', () => {
  const unreadCount = notifData.filter(n => n.unread).length;
  if (unreadCount > 0) {
    document.getElementById('notifBadge').style.display = 'block';
  }
});

// Close panel when clicking outside
document.addEventListener('click', (e) => {
  const panel = document.getElementById('notifPanel');
  const bell = document.getElementById('notifBell');
  if (panel && bell && !panel.contains(e.target) && !bell.contains(e.target)) {
    if (panel.style.right === '0px') {
      notifClose();
    }
  }
});
</script>
</section>
<script>



// run immediately when page loads
checkLoginState();
// Profile image click — full screen viewer
document.querySelector('.avatar').addEventListener('click', function() {
  const src = this.src;

  // Only trigger if image src is not empty/broken
  if (!src || src.endsWith('img2') === false && src.trim() === '') return;
  if (!src || src.includes('undefined') || src.trim() === '') return;

  // Create overlay
  const overlay = document.createElement('div');
  overlay.id = 'imgViewerOverlay';
  overlay.style.cssText = `
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(20px);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: fadeInOverlay 0.3s ease;
  `;

  // Create image
  const img = document.createElement('img');
  img.src = src;
  img.style.cssText = `
    width: 300px;
    height: 300px;
    border-radius: 1%;
    object-fit: cover;
    border: ;
    box-shadow: 0 0 60px rgba(255,255,255,0.2);
    animation: popIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  `;

  // Close on overlay click
  overlay.addEventListener('click', function() {
    overlay.style.animation = 'fadeOutOverlay 0.2s ease forwards';
    img.style.animation = 'popOut 0.2s ease forwards';
    setTimeout(() => overlay.remove(), 200);
  });

  overlay.appendChild(img);
  document.body.appendChild(overlay);
});
function openUserModal(type) {
  document.getElementById('modalTitle').textContent = 
    type === 'following' ? 'Following' : 'Followers';
  document.getElementById('userListModal').style.display = 'flex';
}

function closeUserModal() {
  document.getElementById('userListModal').style.display = 'none';
}

document.getElementById('userListModal').addEventListener('click', function(e) {
  if (e.target === this) closeUserModal();
});
document.querySelectorAll('.user-follow-btn').forEach(btn => {
  btn.addEventListener('click', function(e) {
    e.stopPropagation();
    this.classList.toggle('following');
    this.textContent = this.classList.contains('following') ? 'Following' : 'Follow';
  });
});
function shareProfile() {
  const handle = document.querySelector('.handle').textContent.trim();
  const name = document.querySelector('.name').textContent.trim();
  const profileUrl = `https://trends.com/${handle}`;

  const shareData = {
    title: name,
    text: `Check out ${name}'s profile on Trends`,
    url: profileUrl
  };

  if (navigator.share) {
    // Native share sheet (mobile)
    navigator.share(shareData).catch(() => {});
  } else {
    // Fallback — copy to clipboard
    navigator.clipboard.writeText(profileUrl).then(() => {
      showCopyToast();
    }).catch(() => {
      // Last resort fallback
      prompt('Copy your profile link:', profileUrl);
    });
  }
}

function showCopyToast() {
  const existing = document.getElementById('copyToast');
  if (existing) existing.remove();

  const toast = document.createElement('div');
  toast.id = 'copyToast';
  toast.textContent = 'Profile link copied!';
  toast.style.cssText = `
    position: fixed;
    bottom: 32px;
    left: 50%;
    transform: translateX(-50%);
    background: #fff;
    color: #000;
    padding: 10px 20px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 600;
    z-index: 99999;
    animation: fadeInOverlay 0.2s ease;
  `;

  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 2500);
}
document.querySelectorAll('.event-actions .event-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    const parent = this.closest('.event-actions');
    parent.querySelectorAll('.event-btn').forEach(b => b.classList.remove('btn-primary'));
    this.classList.add('btn-primary');
  });
});

document.querySelector('#signinForm').addEventListener('submit', handleSignin);


document.querySelector('#signupForm').addEventListener('submit', handleSignup);


//fetch request function

// Example test
//const result = await apiRequest('/api/signup', 'POST', {'username': 'israel', 'email': 'test@lasu.edu'});
//console.log(result); // Returns whatever backend sends back

// ═══════════════════════════════════════════════════════════════
// INDEX.JS — Treℵds Frontend
// ═══════════════════════════════════════════════════════════════

// ═══════════════════════════════════════════════════════════════
// SESSION
// ═══════════════════════════════════════════════════════════════
function saveSession(token, userKey) {
  sessionStorage.setItem('token', token);
  sessionStorage.setItem('user_key', userKey);
}

function getToken() {
  return sessionStorage.getItem('token');
}

function getUserKey() {
  return sessionStorage.getItem('user_key');
}

function clearSession() {
  sessionStorage.clear();
}

// ═══════════════════════════════════════════════════════════════
// API
// ═══════════════════════════════════════════════════════════════
async function apiRequest(body) {
  iosLoaderStart()
  const token = getToken();
  const headers = { 'Content-Type': 'application/json' };
  if (token) headers['Authorization'] = `Bearer ${token}`;
  try {
    const res  = await fetch(API_BASE, {
      method: 'POST',
      headers,
      body: JSON.stringify(body)
    });
    const data = await res.json();
    alert(JSON.stringify(data));
    iosLoaderDone()
    
    return data;
  } catch (e) {
    console.error('[API Error]', e);
    alert('Error:' + e.message);
    iosLoaderDone()
    return { status: 500, message: 'Network error. Please try again.' };
  }
}

// ═══════════════════════════════════════════════════════════════
// UI HELPERS
// ═══════════════════════════════════════════════════════════════
function showToast(message, type = 'info') {
  const existing = document.getElementById('toastMsg');
  if (existing) existing.remove();
  const toast = document.createElement('div');
  toast.id = 'toastMsg';
  const colors = { info: '#fff', error: 'linear-gradient(90deg, #fff, grey, #fff);', success: '#22c55e' };
  toast.style.cssText = `
    position:fixed;box-shadow: 0 0 8px rgba(255,255,255,0.6);bottom:32px;left:50%;transform:translateX(-50%);
    background:${colors[type] || '#fff'};color:#000;
    padding:10px 20px;border-radius:6px;font-size:13px;font-weight:600;
    z-index:999999;max-width:90vw;text-align:center;
  `;
  toast.textContent = message;
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 2000);
}

// ═══════════════════════════════════════════════════════════════
// PERSONALIZE PAGE
// Iterates over backend response keys and injects into DOM IDs
// ═══════════════════════════════════════════════════════════════
function personalizePage(data) {
  const skip = ['status','message','token','user_key','feed_sequence',
                'feed_config','posts','suggestions_html','trending_topics_html',
                'notif_count','conversations','notifications','blocked',
                'comments','cluster_suggestions'];

  Object.keys(data).forEach(id => {
    if (skip.includes(id)) return;
    const el = document.getElementById(id);
    if (!el) return;
    const val = data[id];
    if (typeof val === 'boolean') {
      if (val) el.classList.add('active');
      else     el.classList.remove('active');
    } else if (id === 'avatar' || id === 'setProfilePic') {
      if (val) { el.src = val; el.style.display = 'block'; }
      else     { el.style.display = 'none'; }
    } else if (id.startsWith('select')) {
      el.value = val;
    } else if (id.startsWith('toggle')) {
      if (val === 'active') el.classList.add('active');
      else                  el.classList.remove('active');
    } else {
      el.innerHTML = val;
    }
  });

  // token + user_key
  if (data.token)    saveSession(data.token, data.user_key);
  if (data.user_key) sessionStorage.setItem('user_key', data.user_key);

  // notification badge
  if (data.notif_count > 0) {
    const badge = document.getElementById('notifBadge');
    if (badge) badge.style.display = 'block';
  }
}

// ═══════════════════════════════════════════════════════════════
// AUTH
// ═══════════════════════════════════════════════════════════════
async function handleSignup(event) {
  event.preventDefault();
  const form   = document.querySelector('#signupForm');
  const inputs = form.querySelectorAll('.form-input');
  const data   = {
    status:         'signup',
    full_name:      inputs[0].value.trim(),
    username:       inputs[1].value.trim(),
    email:          inputs[2].value.trim(),
    password:       inputs[3].value,
    university:     document.querySelector('#university')?.value    || '',
    department:     document.querySelector('#department')?.value    || '',
    academic_level: document.querySelector('#academicLevel')?.value || ''
  };
  const res = await apiRequest(data);
  if (res.status === 200) {
    personalizePage(res);
    showSection('Trending');
    document.getElementById('Accauthsection').style.display = 'none';
    document.getElementById('newMainaccount').style.display = 'block';
    loadTrendingFeed();
  } else {
   
    showToast(res.message, 'error');
  }
}

async function handleSignin(event) {
  
  event.preventDefault();
  const form = document.querySelector('#signinForm');
  const data = {
    status:   'signin',
    email:    form.querySelector('input[type="email"]').value.trim(),
    password: form.querySelector('input[type="password"]').value
  };
  const res = await apiRequest(data);
  if (res.status === 200) {
   
    personalizePage(res);
    showSection('Trending');
    document.getElementById('Accauthsection').style.display = 'none';
    document.getElementById('newMainaccount').style.display = 'block';
    loadTrendingFeed();
  } else {
   
    showToast(res.message, 'error');
  }
}

async function logout() {
  if (!confirm('Are you sure you want to logout?')) return;
  await apiRequest({ status: 'logout' });
  clearSession();
  document.getElementById('Accauthsection').style.display = 'block';
  document.getElementById('newMainaccount').style.display = 'none';
  ['Trending','Research','Explore','Finance','Board','Settings','profile','Create','Messages'].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.style.display = 'none';
  });
}

function checkLoginState() {
  const token = getToken();
  if (token) {
    document.getElementById('Accauthsection').style.display = 'none';
    document.getElementById('newMainaccount').style.display = 'block';
    showSection('Trending');
    loadTrendingFeed();
    apiRequest({ status: 'get_settings' }).then(res => {
      if (res.status === 200) personalizePage(res);
    });
  } else {
    document.getElementById('Accauthsection').style.display = 'block';
    document.getElementById('newMainaccount').style.display = 'none';
  }
}

// ═══════════════════════════════════════════════════════════════
// NAVIGATION
// ═══════════════════════════════════════════════════════════════
function showSection(sectionId) {
  const sections = ['Trending','Research','Explore','Finance','Board',
                    'Settings','profile','Create','Messages'];
  sections.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.style.display = id === sectionId ? 'block' : 'none';
  });
}

// ═══════════════════════════════════════════════════════════════
// TRENDING FEED
// ═══════════════════════════════════════════════════════════════
let seenKeys     = [];
let isFetching   = false;
let feedSequence = [];
let sequenceIdx  = 0;

async function loadTrendingFeed() {
  if (isFetching) return;
  isFetching = true;

  const res = await apiRequest({
    status:    'get_feed',
    seen_keys: seenKeys,
    n:         seenKeys.length === 0 ? 22 : 10
  });

  if (res.status === 200) {
    const container = document.getElementById('feedContainer');
    if (!container) { isFetching = false; return; }
    if (seenKeys.length === 0) {
      container.innerHTML = '';
      feedSequence = res.sequence || [];
      sequenceIdx  = 0;
      injectSuggestions(res.suggestions_html);
      injectTrendingTopics(res.trending_topics_html);
    }
    if (!res.posts || res.posts.length === 0) {
      if (seenKeys.length === 0) container.innerHTML = '<div class="userpostedstuffs">The feed is quiet. Be the first to say something worth reading.</div>';
      isFetching = false;
      return;
    }
    renderFeedPosts(res.posts, container);
    slidingWindowManager(container);
  }
  isFetching = false;
}

function injectSuggestions(html) {
  const el = document.getElementById('suggestionsBlock');
  if (el && html) el.innerHTML = html;
}

function injectTrendingTopics(html) {
  const el = document.getElementById('trendingTopicsBlock');
  if (el && html) el.innerHTML = html;
}

function renderFeedPosts(posts, container) {
  posts.forEach(post => {
    seenKeys.push(post.post_key);
    const el = document.createElement('div');
    el.innerHTML = buildPostHTML(post);
    container.appendChild(el.firstElementChild);
  });
  setupInfiniteScroll();
}

function slidingWindowManager(container) {
  const max = 50;
  const items = container.children;
  while (items.length > max) {
    container.removeChild(items[0]);
    seenKeys.shift();
  }
}

function setupInfiniteScroll() {
  const trendingSection = document.getElementById('Trending');
  if (!trendingSection) return;
  trendingSection.onscroll = () => {
    const { scrollTop, scrollHeight, clientHeight } = trendingSection;
    const fromBottom = scrollHeight - scrollTop - clientHeight;
    const postHeight = 300;
    if (fromBottom < postHeight * 4 && !isFetching) {
      loadTrendingFeed();
    }
  };
}

// ═══════════════════════════════════════════════════════════════
// POST HTML BUILDERS
// ═══════════════════════════════════════════════════════════════
function buildPostHTML(post) {
  const tick    = post.account_level === 'premium' ? ' ✓' : '';
  const pic     = post.profilepicurl || '';
  const avatar  = pic
    ? `<img src="${pic}" class="post-feed-avatar">`
    : `<div class="post-feed-avatar" style="display:flex;align-items:center;justify-content:center;background:#111;font-weight:700;">${(post.full_name||'?')[0]}</div>`;
  const header = `
    <div class="post-feed-header">
      ${avatar}
      <div style="flex:1;">
        <div class="post-feed-name">${post.full_name}${tick}</div>
        <div class="post-feed-time">${post.time_ago || ''}</div>
      </div>
      <button class="user-follow-btn" onclick="toggleFollow('${post.user_key}',this)">Follow</button>
    </div>`;

  let body = '';
  if (post.post_type === 'image') {
    body = `<img src="${post.media_url}" style="width:100%;border-radius:8px;margin-bottom:10px;">
            <div class="post-feed-text">${post.content}</div>`;
  } else if (post.post_type === 'video') {
    body = `<video controls style="width:100%;border-radius:8px;margin-bottom:10px;">
              <source src="${post.media_url}" type="video/mp4">
            </video>
            <div class="post-feed-text">${post.content}</div>`;
  } else if (post.post_type === 'poll') {
    const extras = post.extras || {};
    const opts   = extras.poll_options || [];
    const total  = extras.total_votes || 0;
    const optHTML = opts.map((o,i) => `
      <div class="mini-poll-option" onclick="votePoll('${post.post_key}',${i},this.closest('.poll-options'))">
        <div class="mini-poll-bar" style="width:${total>0?Math.round((o.votes/total)*100):0}%"></div>
        <div class="mini-poll-text">
          <span>${o.text}</span>
          <span>${total>0?Math.round((o.votes/total)*100):0}%</span>
        </div>
      </div>`).join('');
    body = `<div class="post-feed-text" style="font-weight:600;">${post.content}</div>
            <div class="poll-options">${optHTML}</div>
            <div style="font-size:12px;color:#666;margin-top:6px;">${total} votes</div>`;
  } else if (post.post_type === 'event') {
    const extras = post.extras || {};
    body = `<div class="post-feed-text" style="font-weight:600;">${extras.title || post.content}</div>
            <div style="font-size:13px;color:#666;">📅 ${extras.date || ''} &bull; 🕐 ${extras.time || ''}</div>
            <div style="font-size:13px;color:#666;margin-top:4px;">📍 ${extras.location || ''}</div>
            <div style="display:flex;gap:8px;margin-top:10px;">
              <button class="viewer-rsvp-btn" onclick="rsvpEvent('${post.post_key}','attending',this.parentElement)">Attending</button>
              <button class="viewer-rsvp-btn" onclick="rsvpEvent('${post.post_key}','interested',this.parentElement)">Interested</button>
              <button class="viewer-rsvp-btn" onclick="rsvpEvent('${post.post_key}','not_going',this.parentElement)">Can't Go</button>
            </div>`;
  } else {
    body = `<div class="post-feed-text">${post.content}</div>`;
  }

  const actions = `
    <div class="post-feed-stats" style="margin-top:10px;display:flex;gap:16px;align-items:center;">
      <button class="viewer-action-btn" onclick="toggleLike('${post.post_key}',this)">
        ♡ <span class="like-count">${post.like_count||0}</span>
      </button>
      <button class="viewer-action-btn" onclick="loadComments('${post.post_key}',this)">
        💬 ${post.comment_count||0}
      </button>
      <button class="viewer-action-btn" onclick="sharePost('${post.post_key}')">
        ↗ ${post.share_count||0}
      </button>
      <button class="viewer-action-btn" style="margin-left:auto;" onclick="toggleBookmark('${post.post_key}',this)">
        🔖
      </button>
    </div>`;

  return `<div class="post-feed-card" data-post-key="${post.post_key}">
    ${header}${body}${actions}
    <div class="comments-section" id="comments-${post.post_key}" style="display:none;"></div>
    <div class="comment-input-wrap" id="comment-input-${post.post_key}" style="display:none;">
      <input type="text" class="comment-input" placeholder="Add a comment..." id="cinput-${post.post_key}">
      <button class="comment-send" onclick="submitComment('${post.post_key}')">↑</button>
    </div>
  </div>`;
}

// ═══════════════════════════════════════════════════════════════
// SOCIAL ACTIONS
// ═══════════════════════════════════════════════════════════════

async function toggleLike(postKey, btn) {
  const res = await apiRequest({ status: 'toggle_like', post_key: postKey });
  if (res.status === 200) {
    const count = btn.querySelector('.like-count');
    if (count) count.textContent = res.like_count;
    btn.classList.toggle('liked', res.action === 'liked');
  } else showToast(res.message, 'error');
}

async function toggleBookmark(postKey, btn) {
  const res = await apiRequest({ status: 'toggle_bookmark', post_key: postKey });
  if (res.status === 200) {
    btn.classList.toggle('liked', res.action === 'bookmarked');
  } else showToast(res.message, 'error');
}

async function toggleFollow(targetKey, btn) {
  const res = await apiRequest({ status: 'toggle_follow', target_key: targetKey });
  if (res.status === 200) {
    const isFollowing = res.action === 'followed';
    btn.textContent   = isFollowing ? 'Following' : 'Follow';
    btn.classList.toggle('following', isFollowing);
  } else showToast(res.message, 'error');
}

async function loadComments(postKey, btn) {
  const section   = document.getElementById(`comments-${postKey}`);
  const inputWrap = document.getElementById(`comment-input-${postKey}`);
  if (!section) return;
  if (section.style.display === 'block') {
    section.style.display   = 'none';
    if (inputWrap) inputWrap.style.display = 'none';
    return;
  }
  const res = await apiRequest({ status: 'get_comments', post_key: postKey });
  if (res.status === 200) {
    section.innerHTML = res.comments.map(c => `
      <div class="comment-item">
        <div class="comment-body">
          <div class="comment-name">${c.full_name}</div>
          <div class="comment-text">${c.content}</div>
        </div>
      </div>`).join('') || '<div style="padding:10px;color:#555;font-size:13px;">No comments yet.</div>';
    section.style.display   = 'block';
    if (inputWrap) inputWrap.style.display = 'flex';
  }
}

async function submitComment(postKey) {
  const input = document.getElementById(`cinput-${postKey}`);
  if (!input || !input.value.trim()) return;
  const res = await apiRequest({ status: 'post_comment', post_key: postKey, content: input.value.trim() });
  if (res.status === 200) {
    const section = document.getElementById(`comments-${postKey}`);
    if (section) {
      section.innerHTML += `
        <div class="comment-item">
          <div class="comment-body">
            <div class="comment-name">${res.full_name}</div>
            <div class="comment-text">${res.content}</div>
          </div>
        </div>`;
    }
    input.value = '';
  } else showToast(res.message, 'error');
}

async function votePoll(postKey, optionIndex, container) {
  const res = await apiRequest({ status: 'vote_poll', post_key: postKey, option_index: optionIndex });
  if (res.status === 200) {
    const opts = container.querySelectorAll('.mini-poll-option');
    res.percentages.forEach((p, i) => {
      if (opts[i]) {
        opts[i].querySelector('.mini-poll-bar').style.width = `${p.pct}%`;
        opts[i].querySelectorAll('.mini-poll-text span')[1].textContent = `${p.pct}%`;
      }
    });
    showToast(res.message, 'success');
  } else showToast(res.message, 'error');
}

async function rsvpEvent(postKey, status, btnGroup) {
  const res = await apiRequest({ status: 'rsvp_event', post_key: postKey, rsvp_status: status });
  if (res.status === 200) {
    btnGroup.querySelectorAll('.viewer-rsvp-btn').forEach(b => b.classList.remove('active'));
    const clicked = [...btnGroup.querySelectorAll('.viewer-rsvp-btn')]
      .find(b => b.getAttribute('onclick').includes(status));
    if (clicked) clicked.classList.add('active');
  } else showToast(res.message, 'error');
}

async function applyBounty(postKey, message) {
  const res = await apiRequest({ status: 'apply_bounty', post_key: postKey, message });
  if (res.status === 200) showToast(res.message, 'success');
  else showToast(res.message, 'error');
}

function sharePost(postKey) {
  const url = `${window.location.origin}/post/${postKey}`;
  if (navigator.share) {
    navigator.share({ url }).catch(() => {});
  } else {
    navigator.clipboard.writeText(url).then(() => showToast('Link copied!'));
  }
}

// ═══════════════════════════════════════════════════════════════
// PROFILE
// ═══════════════════════════════════════════════════════════════


async function openUserModal(type) {
  document.getElementById('modalTitle').textContent = type === 'following' ? 'Following' : 'Followers';
  document.getElementById('userListModal').style.display = 'flex';
  const res = await apiRequest({ status: `get_${type}` });
  if (res.status === 200) {
    document.getElementById('userListContent').innerHTML = res.userListContent;
  }
}

function closeUserModal() {
  document.getElementById('userListModal').style.display = 'none';
}

function shareProfile() {
  const handle = document.querySelector('.handle')?.textContent?.trim() || '';
  const url    = `${window.location.origin}/${handle}`;
  if (navigator.share) {
    navigator.share({ url }).catch(() => {});
  } else {
    navigator.clipboard.writeText(url).then(() => showToast('Profile link copied!'));
  }
}

// ═══════════════════════════════════════════════════════════════
// CREATE POST
// ═══════════════════════════════════════════════════════════════
async function crCreate() {
  const content      = document.getElementById('crText')?.value.trim();
  const visibility   = document.getElementById('crVisibility')?.value || 'public';
  const allowComments= document.getElementById('crComments')?.classList.contains('active');
  const showInFeed   = document.getElementById('crFeed')?.classList.contains('active');
  const media        = window.crMedia || null;
  const crType       = window.crType || 'post';

  if (!content && !media) {
    showToast('Please add content or media.', 'error');
    return;
  }

  const data = { status: 'create_post', type: crType, content, visibility, allowComments, showInFeed, media };

  if (crType === 'poll') {
    const opts = [];
    document.querySelectorAll('.cr-poll-option').forEach(inp => {
      if (inp.value.trim()) opts.push(inp.value.trim());
    });
    data.pollOptions = opts;
  }
  if (crType === 'research') {
    data.research = {
      title:    document.getElementById('crResearchTitle')?.value,
      authors:  document.getElementById('crResearchAuthors')?.value,
      abstract: document.getElementById('crResearchAbstract')?.value,
      tags:     window.crResearchTags || []
    };
  }
  if (crType === 'event') {
    data.event = {
      title:    document.getElementById('crEventTitle')?.value,
      date:     document.getElementById('crEventDate')?.value,
      time:     document.getElementById('crEventTime')?.value,
      location: document.getElementById('crEventLocation')?.value
    };
  }
  if (crType === 'bounty') {
    data.bounty = {
      title:    document.getElementById('crBountyTitle')?.value,
      amount:   document.getElementById('crBountyAmount')?.value,
      deadline: document.getElementById('crBountyDeadline')?.value,
      category: document.getElementById('crBountyCategory')?.value
    };
  }
  if (crType === 'job') {
    data.job = {
      title:    document.getElementById('crJobTitle')?.value,
      company:  document.getElementById('crJobCompany')?.value,
      salary:   document.getElementById('crJobSalary')?.value,
      type:     document.getElementById('crJobType')?.value,
      location: document.getElementById('crJobLocation')?.value,
      link:     document.getElementById('crJobLink')?.value
    };
  }
  if (crType === 'product') {
    data.product = {
      name:      document.getElementById('crProductName')?.value,
      price:     document.getElementById('crProductPrice')?.value,
      condition: document.getElementById('crProductCondition')?.value,
      category:  document.getElementById('crProductCategory')?.value
    };
  }
  if (crType === 'collab') {
    data.collab = {
      title:    document.getElementById('crCollabTitle')?.value,
      skills:   document.getElementById('crCollabSkills')?.value,
      duration: document.getElementById('crCollabDuration')?.value
    };
  }
  if (crType === 'ad') {
    data.ad = {
      title:   document.getElementById('crAdTitle')?.value,
      company: document.getElementById('crAdCompany')?.value,
      link:    document.getElementById('crAdLink')?.value,
      cta:     document.getElementById('crAdCTA')?.value
    };
  }

  const res = await apiRequest(data);
  if (res.status === 200) {
    showToast(res.message, 'success');
    crReset();
    document.getElementById('Create').style.display = 'none';
    document.getElementById('newMainaccount').style.display = 'block';
    seenKeys = [];
    loadTrendingFeed();
  } else {
    showToast(res.message, 'error');
  }
}

// ═══════════════════════════════════════════════════════════════
// SETTINGS
// ═══════════════════════════════════════════════════════════════
async function toggleSetting(setting) {
  const settingMap = {
    private:         'is_private',
    activity:        'show_activity_status',
    readReceipts:    'read_receipts',
    typingIndicators:'typing_indicators',
    messageRequests: 'message_requests_filter',
    push:            'notif_push',
    likes:           'notif_likes',
    comments:        'notif_comments',
    followers:       'notif_follows',
    dms:             'notif_messages',
    mentions:        'notif_mentions',
    bounties:        'notif_bounties',
    events:          'notif_events',
    research:        'notif_email',
    email:           'notif_email'
  };

  const notifFields = ['notif_push','notif_likes','notif_comments','notif_follows',
                       'notif_messages','notif_mentions','notif_bounties','notif_events','notif_email'];
  const privacyFields = ['is_private','show_activity_status'];
  const msgFields = ['read_receipts','typing_indicators','message_requests_filter'];

  const field  = settingMap[setting];
  if (!field) return;

  const toggleId = `toggle${setting.charAt(0).toUpperCase() + setting.slice(1)}`;
  const el       = document.getElementById(toggleId);
  const newVal   = el ? !el.classList.contains('active') : false;
  if (el) el.classList.toggle('active', newVal);

  let statusKey = 'update_privacy_settings';
  if (notifFields.includes(field)) statusKey = 'update_notification_settings';
  if (msgFields.includes(field))   statusKey = 'update_messaging_settings';

  const res = await apiRequest({ status: statusKey, [field]: newVal });
  if (res.status !== 200) {
    showToast(res.message, 'error');
    if (el) el.classList.toggle('active', !newVal);
  }
}

async function changeSetting(setting, value) {
  const settingMap = {
    postVisibility:       { field: 'post_visibility',             status: 'update_privacy_settings' },
    researchVisibility:   { field: 'research_visibility',         status: 'update_privacy_settings' },
    messagePrivacy:       { field: 'message_privacy',             status: 'update_privacy_settings' },
    tagPrivacy:           { field: 'tag_privacy',                 status: 'update_privacy_settings' },
    followersVisibility:  { field: 'followers_list_visibility',   status: 'update_privacy_settings' },
    groupInvites:         { field: 'message_requests_filter',     status: 'update_messaging_settings' }
  };
  const map = settingMap[setting];
  if (!map) return;
  const res = await apiRequest({ status: map.status, [map.field]: value });
  if (res.status !== 200) showToast(res.message, 'error');
}

async function submitSettingsUpdate(type) {
  let data = { status: type };
  if (type === 'update_email') {
    data.new_email = document.querySelector('#newEmailInput')?.value;
    data.password  = document.querySelector('#emailPasswordConfirm')?.value;
  } else if (type === 'update_username') {
    data.new_username = document.querySelector('#newUsernameInput')?.value;
  } else if (type === 'update_bio') {
    data.new_bio = document.querySelector('#newBioInput')?.value;
  } else if (type === 'update_password') {
    data.current_password = document.querySelector('#currentPasswordInput')?.value;
    data.new_password     = document.querySelector('#newPasswordInput')?.value;
  } else if (type === 'update_profile_info') {
    data.full_name      = document.querySelector('#editFullName')?.value;
    data.university     = document.querySelector('#editUniversity')?.value;
    data.department     = document.querySelector('#editDepartment')?.value;
    data.academic_level = document.querySelector('#editAcademicLevel')?.value;
  }
  const res = await apiRequest(data);
  if (res.status === 200) {
    showToast(res.message, 'success');
    personalizePage(res);
    closeSetModal();
  } else {
    showToast(res.message, 'error');
  }
}

async function handleProfilePicChange(input) {
  if (!input.files || !input.files[0]) return;
  const reader = new FileReader();
  reader.onload = async e => {
    const res = await apiRequest({ status: 'update_avatar', profilepicurl: e.target.result });
    if (res.status === 200) {
      personalizePage({ avatar: res.avatar, setProfilePic: res.avatar });
      showToast(res.message, 'success');
    } else showToast(res.message, 'error');
  };
  reader.readAsDataURL(input.files[0]);
}

async function removeProfilePic() {
  if (!confirm('Remove profile photo?')) return;
  const res = await apiRequest({ status: 'remove_avatar' });
  if (res.status === 200) {
    personalizePage({ avatar: '', setProfilePic: '' });
    showToast(res.message, 'success');
  } else showToast(res.message, 'error');
}

async function loadBlockedAccounts() {
  const res = await apiRequest({ status: 'get_blocked_users' });
  if (res.status === 200) {
    const html = res.blocked.length === 0
      ? '<div style="padding:20px;color:#555;text-align:center;">No blocked accounts.</div>'
      : res.blocked.map(u => `
          <div class="user-item">
            <div class="user-item-info">
              <div class="user-item-name">${u.full_name}</div>
              <div class="user-item-handle">@${u.username}</div>
            </div>
            <button class="set-btn" onclick="toggleBlock('${u.user_key}',this)">Unblock</button>
          </div>`).join('');
    return html;
  }
  return '';
}

async function toggleBlock(targetKey, btn) {
  const res = await apiRequest({ status: 'toggle_block', target_key: targetKey });
  if (res.status === 200) showToast(res.message, 'success');
  else showToast(res.message, 'error');
}

// ═══════════════════════════════════════════════════════════════
// SEARCH
// ═══════════════════════════════════════════════════════════════
let searchDebounce = null;

function setupSearch() {
  const input = document.getElementById('searchInput');
  if (!input) return;
  input.addEventListener('input', () => {
    clearTimeout(searchDebounce);
    searchDebounce = setTimeout(async () => {
      const query = input.value.trim();
      if (!query) return;
      const res = await apiRequest({ status: 'search', query });
      if (res.status === 200) renderSearchResults(res);
    }, 400);
  });
}

function renderSearchResults(res) {
  const container = document.getElementById('searchResults');
  if (!container) return;
  container.innerHTML = '';
  if (res.users && res.users.length > 0) {
    res.users.forEach(u => {
      const el = document.createElement('div');
      el.className   = 'user-item';
      el.style.cursor = 'pointer';
      el.innerHTML   = `
        <div class="user-item-info">
          <div class="user-item-name">${u.full_name}</div>
          <div class="user-item-handle">@${u.username}</div>
        </div>`;
      el.onclick = () => {
        apiRequest({ status: 'record_search_pair', query: document.getElementById('searchInput')?.value, selected: u.username });
      };
      container.appendChild(el);
    });
  }
  if (res.posts && res.posts.length > 0) {
    res.posts.forEach(post => {
      const el = document.createElement('div');
      el.innerHTML = buildPostHTML(post);
      el.onclick   = () => {
        apiRequest({ status: 'record_search_pair', query: document.getElementById('searchInput')?.value, selected: post.content.slice(0,50) });
      };
      container.appendChild(el.firstElementChild);
    });
  }
  if (!res.users?.length && !res.posts?.length) {
    container.innerHTML = '<div class="empty-tab">No results found.</div>';
  }
}

function searchTopic(topic) {
  const input = document.getElementById('searchInput');
  if (input) {
    input.value = topic;
    input.dispatchEvent(new Event('input'));
  }
}

// ═══════════════════════════════════════════════════════════════
// NOTIFICATIONS
// ═══════════════════════════════════════════════════════════════
async function notifOpen() {
  document.getElementById('notifPanel').style.right = '0';
  const res = await apiRequest({ status: 'get_notifications' });
  if (res.status === 200) renderNotifications(res.notifications);
}

function notifClose() {
  document.getElementById('notifPanel').style.right = '-100%';
}

function renderNotifications(notifications) {
  const list = document.querySelector('.notif-list');
  if (!list) return;
  if (!notifications || notifications.length === 0) {
    list.innerHTML = '<div class="notif-empty">No notifications yet.</div>';
    return;
  }
  list.innerHTML = notifications.map(n => `
    <div class="notif-item ${n.is_read ? '' : 'unread'}" onclick="markNotifRead('${n.notif_key}',this)">
      <div class="notif-icon">
        ${{ like:'♡', comment:'💬', follow:'👤', message:'✉', bounty_apply:'💼' }[n.notif_type] || '🔔'}
      </div>
      <div class="notif-body">
        <div class="notif-text"><strong>${n.full_name || 'Someone'}</strong> ${notifText(n.notif_type)}</div>
        <div class="notif-time">${n.time_ago || ''}</div>
      </div>
    </div>`).join('');
}

function notifText(type) {
  const map = {
    like:         'liked your post.',
    comment:      'commented on your post.',
    follow:       'started following you.',
    message:      'sent you a message.',
    bounty_apply: 'applied to your bounty.'
  };
  return map[type] || 'interacted with your content.';
}

async function markNotifRead(notifKey, el) {
  el.classList.remove('unread');
  await apiRequest({ status: 'mark_notification_read', notif_key: notifKey });
}

async function markAllNotificationsRead() {
  await apiRequest({ status: 'mark_all_notifications_read' });
  document.querySelectorAll('.notif-item.unread').forEach(el => el.classList.remove('unread'));
  const badge = document.getElementById('notifBadge');
  if (badge) badge.style.display = 'none';
}

function notifTabSwitch(tab, btn) {
  document.querySelectorAll('.notif-tab').forEach(t => t.classList.remove('active'));
  btn.classList.add('active');
}

function notifFilterSwitch(filter, btn) {
  document.querySelectorAll('.notif-filter').forEach(f => f.classList.remove('active'));
  btn.classList.add('active');
}

// ═══════════════════════════════════════════════════════════════
// MESSAGES
// ═══════════════════════════════════════════════════════════════
let currentConvoKey = null;

async function loadConversations() {
  const res = await apiRequest({ status: 'get_conversations' });
  if (res.status !== 200) return;
  const list = document.getElementById('msgChatList');
  if (!list) return;
  if (!res.conversations || res.conversations.length === 0) {
    list.innerHTML = '<div class="empty-tab">No messages yet.</div>';
    return;
  }
  list.innerHTML = res.conversations.map(c => `
    <div class="msg-chat-item ${c.unread_count > 0 ? 'unread' : ''}" onclick="openMsgChat('${c.convo_key}','${c.other_key}')">
      <div class="msg-chat-avatar-wrap">
        ${c.profilepicurl
          ? `<img src="${c.profilepicurl}" class="msg-chat-avatar">`
          : `<div class="msg-chat-avatar" style="display:flex;align-items:center;justify-content:center;background:#111;font-weight:700;">${(c.full_name||'?')[0]}</div>`}
      </div>
      <div class="msg-chat-info">
        <div class="msg-chat-name">${c.full_name}</div>
        <div class="msg-chat-preview">${c.last_msg || 'Start a conversation'}</div>
      </div>
      ${c.unread_count > 0 ? `<span class="msg-chat-badge">${c.unread_count}</span>` : ''}
    </div>`).join('');
}

async function openMsgChat(convoKey, otherKey) {
  currentConvoKey = convoKey;
  document.getElementById('msgMain')?.classList.add('active');
  const res = await apiRequest({ status: 'get_dm_messages', convo_key: convoKey });
  if (res.status === 200) renderMessages(res.messages);
}

function renderMessages(messages) {
  const container = document.getElementById('msgMessages');
  if (!container) return;
  const userKey = getUserKey();
  container.innerHTML = messages.map(m => `
    <div class="msg-bubble-wrap ${m.sender_key === userKey ? 'sent' : ''}">
      <div class="msg-bubble">
        ${m.sender_key !== userKey ? `<div class="msg-bubble-name">${m.full_name}</div>` : ''}
        <div class="msg-bubble-text">${m.content}</div>
        <div class="msg-bubble-footer">
          <span>${m.sent_at ? new Date(m.sent_at).toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'}) : ''}</span>
          ${m.sender_key === userKey ? `<span class="msg-read-receipt">${m.is_read ? '✓✓' : '✓'}</span>` : ''}
        </div>
      </div>
    </div>`).join('');
  container.scrollTop = container.scrollHeight;
}

async function sendMsg() {
  const input = document.getElementById('msgInput');
  if (!input || !input.value.trim() || !currentConvoKey) return;
  const recipientKey = sessionStorage.getItem('current_chat_recipient');
  const res = await apiRequest({
    status:        'send_dm',
    recipient_key: recipientKey,
    content:       input.value.trim()
  });
  if (res.status === 200) {
    input.value = '';
    openMsgChat(currentConvoKey, recipientKey);
  } else showToast(res.message, 'error');
}

async function sendGlobalMessage() {
  const input = document.getElementById('globalChatInput');
  if (!input || !input.value.trim()) return;
  const res = await apiRequest({ status: 'send_global_message', content: input.value.trim() });
  if (res.status === 200) {
    input.value = '';
    loadGlobalMessages();
  } else showToast(res.message, 'error');
}

async function loadGlobalMessages() {
  const res = await apiRequest({ status: 'get_global_messages' });
  if (res.status === 200) {
    const container = document.getElementById('globalChatMessages');
    if (!container) return;
    const userKey = getUserKey();
    container.innerHTML = res.messages.map(m => `
      <div class="msg-bubble-wrap ${m.user_key === userKey ? 'sent' : ''}">
        <div class="msg-bubble">
          ${m.user_key !== userKey ? `<div class="msg-bubble-name">${m.full_name}</div>` : ''}
          <div class="msg-bubble-text">${m.content}</div>
        </div>
      </div>`).join('');
    container.scrollTop = container.scrollHeight;
  }
}

// ═══════════════════════════════════════════════════════════════
// DRAWER
// ═══════════════════════════════════════════════════════════════
function openDrawer() {
  document.querySelector('.drawer')?.classList.add('open');
  document.querySelector('.overlay')?.classList.add('show');
}

function closeDrawer() {
  document.querySelector('.drawer')?.classList.remove('open');
  document.querySelector('.overlay')?.classList.remove('show');
}

// ═══════════════════════════════════════════════════════════════
// INIT
// ═══════════════════════════════════════════════════════════════
document.addEventListener('DOMContentLoaded', () => {
  checkLoginState();
  setupSearch();

  document.querySelector('#signinForm')?.addEventListener('submit', handleSignin);
  document.querySelector('#signupForm')?.addEventListener('submit', handleSignup);

  // Touch swipe for drawer
  let startX = 0;
  document.addEventListener('touchstart', e => { startX = e.touches[0].clientX; });
  document.addEventListener('touchend',   e => {
    const diff = e.changedTouches[0].clientX - startX;
    if (diff > 70)  openDrawer();
    if (diff < -70) closeDrawer();
  });
});
// ═══════════════════════════════════════════════════════════════
// PAGES LOGIC — Research, Explore, Finance, Board, Global Chat
// Add this to index.js or as a separate <script> in your HTML
// ═══════════════════════════════════════════════════════════════

// ═══════════════════════════════════════════════════════════════
// RESEARCH PAGE
// ═══════════════════════════════════════════════════════════════
let researchSeenKeys = [];
let researchFetching = false;

async function initResearch() {
  researchSeenKeys = [];
  const container  = document.getElementById('researchFeed');
  if (container) container.innerHTML = '';
  await loadResearchFeed();
}

async function loadResearchFeed(append = false) {
  if (researchFetching) return;
  researchFetching = true;

  const res = await apiRequest({
    status:    'get_user_posts',
    tab:       'research',
    seen_keys: researchSeenKeys,
    global:    true  // fetch from all users not just current
  });

  researchFetching = false;

  const container = document.getElementById('researchFeed');
  if (!container) return;

  if (!res.posts || res.posts.length === 0) {
    if (!append) container.innerHTML = '<div class="userpostedstuffs">No research papers yet.</div>';
    return;
  }

  if (!append) container.innerHTML = '';

  res.posts.forEach(post => {
    researchSeenKeys.push(post.post_key);
    const el = document.createElement('div');
    el.innerHTML = buildResearchCard(post);
    container.appendChild(el.firstElementChild);
  });
}

function buildResearchCard(post) {
  const r    = post.extras || {};
  const tick = post.account_level === 'premium' ? ' ✓' : '';
  const pic  = post.profilepicurl || '';
  return `
    <div class="r-post" data-post-key="${post.post_key}" onclick="openResearchPostViewer('${post.post_key}')">
      <div class="r-meta">
        ${pic ? `<img src="${pic}" class="r-avatar">` : `<div class="r-avatar" style="display:flex;align-items:center;justify-content:center;background:#111;font-weight:700;">${(post.full_name||'?')[0]}</div>`}
        <div>
          <div class="r-author">${post.full_name}${tick}</div>
          <div class="r-time">${post.time_ago || ''} &bull; ${post.department || ''} &bull; ${post.university || ''}</div>
        </div>
      </div>
      <div class="r-title">${r.title || post.content}</div>
      <div class="r-abstract">${(r.abstract || '').slice(0, 200)}${r.abstract && r.abstract.length > 200 ? '...' : ''}</div>
      ${r.tags ? `<div class="r-tags">${r.tags.map(t => `<span class="r-tag">${t}</span>`).join('')}</div>` : ''}
      <div class="r-actions">
        <button class="r-action" onclick="event.stopPropagation();researchToggleLike('${post.post_key}',this)">
          ♡ <span>${post.like_count || 0}</span>
        </button>
        <button class="r-action" onclick="event.stopPropagation();openResearchPostViewer('${post.post_key}')">
          💬 <span>${post.comment_count || 0}</span>
        </button>
        <button class="r-action" onclick="event.stopPropagation();profileShare('${post.post_key}')">
          ↗ <span>${post.share_count || 0}</span>
        </button>
        <button class="r-action r-bookmark" onclick="event.stopPropagation();researchToggleBookmark('${post.post_key}',this)">🔖</button>
      </div>
    </div>`;
}

async function researchToggleLike(postKey, btn) {
  const res = await apiRequest({ status: 'toggle_like', post_key: postKey });
  if (res.status === 200) {
    const span = btn.querySelector('span');
    if (span) span.textContent = res.like_count;
    btn.classList.toggle('liked', res.action === 'liked');
  } else showToast(res.message, 'error');
}

async function researchToggleBookmark(postKey, btn) {
  const res = await apiRequest({ status: 'toggle_bookmark', post_key: postKey });
  if (res.status === 200) btn.classList.toggle('on', res.action === 'bookmarked');
  else showToast(res.message, 'error');
}

async function openResearchPostViewer(postKey) {
  const viewer = document.getElementById('researchViewer');
  if (!viewer) return;
  viewer.style.display = 'block';
  const feed = document.getElementById('rvFeed');
  feed.innerHTML = '<div style="padding:40px;text-align:center;color:#555;">Loading...</div>';

  const commentRes = await apiRequest({ status: 'get_comments', post_key: postKey });
  const comments   = commentRes.comments || [];
  const card       = document.querySelector(`[data-post-key="${postKey}"]`);
  if (!card) return;

  const r     = {};
  const title = card.querySelector('.r-title')?.textContent || '';
  const abs   = card.querySelector('.r-abstract')?.textContent || '';

  feed.innerHTML = `
    <div class="viewer-post">
      <div style="padding:16px;">
        <div style="font-size:18px;font-weight:700;margin-bottom:12px;">${title}</div>
        <div style="font-size:14px;color:#999;line-height:1.8;">${abs}</div>
      </div>
      <div class="viewer-actions">
        <button class="viewer-action-btn" onclick="researchToggleLike('${postKey}',this)">♡ <span class="like-count">0</span></button>
        <button class="viewer-action-btn" onclick="document.getElementById('rv-viewer-input').focus()">💬</button>
        <button class="viewer-action-btn" onclick="profileShare('${postKey}')">↗</button>
        <button class="viewer-action-btn" style="margin-left:auto" onclick="researchToggleBookmark('${postKey}',this)">🔖</button>
      </div>
      <div class="rv-comments" style="padding:16px;">
        <div style="font-size:12px;font-weight:700;color:#555;margin-bottom:12px;text-transform:uppercase;">Comments</div>
        <div id="rv-comments-list">
          ${comments.length === 0
            ? '<div style="color:#555;font-size:13px;">No comments yet.</div>'
            : comments.map(c => `
                <div class="comment-item">
                  <div class="comment-body">
                    <div class="comment-name">${c.full_name}</div>
                    <div class="comment-text">${c.content}</div>
                    <div class="comment-time">${c.time_ago || ''}</div>
                  </div>
                </div>`).join('')}
        </div>
      </div>
      <div class="comment-input-wrap">
        <input type="text" class="rv-comment-input" id="rv-viewer-input" placeholder="Add a comment...">
        <button class="rv-comment-send" onclick="submitResearchComment('${postKey}')">↑</button>
      </div>
    </div>`;
}

async function submitResearchComment(postKey) {
  const input = document.getElementById('rv-viewer-input');
  if (!input || !input.value.trim()) return;
  const res = await apiRequest({ status: 'post_comment', post_key: postKey, content: input.value.trim() });
  if (res.status === 200) {
    const list = document.getElementById('rv-comments-list');
    if (list) list.innerHTML += `
      <div class="comment-item">
        <div class="comment-body">
          <div class="comment-name">${res.full_name}</div>
          <div class="comment-text">${res.content}</div>
          <div class="comment-time">Just now</div>
        </div>
      </div>`;
    input.value = '';
  } else showToast(res.message, 'error');
}

function closeResearchViewer() {
  const viewer = document.getElementById('researchViewer');
  if (viewer) viewer.style.display = 'none';
}

// Research infinite scroll
document.getElementById('Research')?.addEventListener('scroll', function () {
  const { scrollTop, scrollHeight, clientHeight } = this;
  if (scrollHeight - scrollTop - clientHeight < 400) loadResearchFeed(true);
});

// ═══════════════════════════════════════════════════════════════
// EXPLORE PAGE
// ═══════════════════════════════════════════════════════════════
let exploreDebounce = null;
let activeExTab     = 'all';

function initExplore() {
  setupExploreSearch();
  setupExploreTabs();
  loadExploreSection('all');
}

function setupExploreTabs() {
  document.querySelectorAll('.ex-tab').forEach(tab => {
    tab.addEventListener('click', function () {
      document.querySelectorAll('.ex-tab').forEach(t => t.classList.remove('active'));
      this.classList.add('active');
      activeExTab = this.dataset.s;
      loadExploreSection(activeExTab);
    });
  });
}

function setupExploreSearch() {
  const input = document.getElementById('exSearch');
  if (!input) return;
  input.addEventListener('input', () => {
    clearTimeout(exploreDebounce);
    exploreDebounce = setTimeout(async () => {
      const query = input.value.trim();
      if (!query) {
        loadExploreSection(activeExTab);
        return;
      }
      const res = await apiRequest({ status: 'search', query });
      if (res.status === 200) renderExploreResults(res, query);
    }, 400);
  });
}

async function loadExploreSection(section) {
  const container = document.getElementById('exResults');
  if (!container) return;

  if (section === 'all' || section === 'people') {
    const res = await apiRequest({ status: 'get_suggestions', all: true });
    if (res.status === 200 && section === 'people') {
      container.innerHTML = renderExplorePeople(res.users || []);
      return;
    }
  }

  if (section === 'all' || section === 'bounties') {
    const res = await apiRequest({ status: 'get_feed', seen_keys: [], n: 10, type_filter: 'bounty' });
    if (res.status === 200 && section === 'bounties') {
      container.innerHTML = renderExploreBounties(res.posts || []);
      return;
    }
  }

  if (section === 'all' || section === 'events') {
    const res = await apiRequest({ status: 'get_feed', seen_keys: [], n: 10, type_filter: 'event' });
    if (res.status === 200 && section === 'events') {
      container.innerHTML = renderExploreEvents(res.posts || []);
      return;
    }
  }

  if (section === 'all' || section === 'polls') {
    const res = await apiRequest({ status: 'get_feed', seen_keys: [], n: 10, type_filter: 'poll' });
    if (res.status === 200 && section === 'polls') {
      container.innerHTML = renderExplorePolls(res.posts || []);
      return;
    }
  }

  if (section === 'papers') {
    const res = await apiRequest({ status: 'get_user_posts', tab: 'research', seen_keys: [], global: true });
    container.innerHTML = (res.posts || []).map(p => buildResearchCard(p)).join('');
    return;
  }

  // all — show everything mixed
  if (section === 'all') {
    container.innerHTML = '<div style="padding:20px;color:#555;text-align:center;">Loading...</div>';
    const [sugRes, feedRes] = await Promise.all([
      apiRequest({ status: 'get_suggestions' }),
      apiRequest({ status: 'get_feed', seen_keys: [], n: 15 })
    ]);
    let html = '';
    if (sugRes.status === 200) html += `<div style="margin-bottom:20px;">${sugRes.suggestions_html || ''}</div>`;
    if (feedRes.status === 200) {
      (feedRes.posts || []).slice(0, 10).forEach(p => { html += buildProfilePostHTML(p); });
    }
    container.innerHTML = html || '<div style="padding:20px;color:#555;text-align:center;">Nothing to explore yet.</div>';
  }
}

function renderExplorePeople(users) {
  if (!users.length) return '<div class="empty-tab">No people found.</div>';
  return users.map(u => `
    <div class="ex-person">
      ${u.profilepicurl ? `<img src="${u.profilepicurl}" class="ex-avatar">` : `<div class="ex-avatar" style="display:flex;align-items:center;justify-content:center;background:#111;font-weight:700;">${(u.full_name||'?')[0]}</div>`}
      <div class="ex-person-info">
        <div class="ex-person-name">${u.full_name}</div>
        <div class="ex-person-dept">${u.department || ''} &bull; ${u.university || ''}</div>
        <div class="ex-person-followers">${u.numberoffollowers || 0} followers</div>
      </div>
      <button class="ex-follow" onclick="toggleFollow('${u.user_key}',this)">Follow</button>
    </div>`).join('');
}

function renderExploreBounties(posts) {
  if (!posts.length) return '<div class="empty-tab">No bounties yet.</div>';
  return posts.map(p => {
    const b = p.extras || {};
    return `
      <div class="ex-item" onclick="openPostViewer('${p.post_key}')">
        <div class="ex-item-title">${b.title || p.content}</div>
        <div class="ex-item-meta">${p.full_name} &bull; ${p.time_ago || ''}</div>
        <div class="bounty-reward">${b.amount || ''}</div>
        <div style="font-size:12px;color:#555;margin-top:6px;">Deadline: ${b.deadline || 'Open'}</div>
        <div class="ex-bounty-foot">
          <button class="ex-apply" onclick="event.stopPropagation();applyBounty('${p.post_key}','')">Apply</button>
        </div>
      </div>`;
  }).join('');
}

function renderExploreEvents(posts) {
  if (!posts.length) return '<div class="empty-tab">No events yet.</div>';
  return posts.map(p => {
    const e = p.extras || {};
    return `
      <div class="ex-item" onclick="openPostViewer('${p.post_key}')">
        <div class="ex-item-title">${e.title || p.content}</div>
        <div style="font-size:13px;color:#666;">📅 ${e.date || ''} &bull; 🕐 ${e.time || ''}</div>
        <div style="font-size:13px;color:#666;margin-top:4px;">📍 ${e.location || ''}</div>
        <div class="viewer-rsvp-btns" style="margin-top:10px;">
          <button class="viewer-rsvp-btn" onclick="event.stopPropagation();rsvpEvent('${p.post_key}','attending',this.parentElement)">Attending</button>
          <button class="viewer-rsvp-btn" onclick="event.stopPropagation();rsvpEvent('${p.post_key}','interested',this.parentElement)">Interested</button>
        </div>
      </div>`;
  }).join('');
}

function renderExplorePolls(posts) {
  if (!posts.length) return '<div class="empty-tab">No polls yet.</div>';
  return posts.map(p => {
    const opts  = (p.extras && p.extras.poll_options) || [];
    const total = (p.extras && p.extras.total_votes)  || 0;
    return `
      <div class="ex-poll" onclick="openPostViewer('${p.post_key}')">
        <div class="ex-poll-q">${p.content}</div>
        ${opts.map((o, i) => `
          <div class="ex-poll-opt" onclick="event.stopPropagation();votePoll('${p.post_key}',${i},this.closest('.ex-poll'))">
            <div class="ex-poll-bar" style="width:${total > 0 ? Math.round((o.votes/total)*100) : 0}%"></div>
            <div class="ex-poll-row">
              <span>${o.text}</span>
              <span>${total > 0 ? Math.round((o.votes/total)*100) : 0}%</span>
            </div>
          </div>`).join('')}
        <div style="font-size:12px;color:#555;margin-top:6px;">${total} votes</div>
      </div>`;
  }).join('');
}

function renderExploreResults(res, query) {
  const container = document.getElementById('exResults');
  if (!container) return;
  let html = `<div style="font-size:13px;color:#555;padding:10px 0;">Results for "${query}"</div>`;
  if (res.users && res.users.length) html += renderExplorePeople(res.users);
  if (res.posts && res.posts.length) html += res.posts.map(p => buildProfilePostHTML(p)).join('');
  if (!res.users?.length && !res.posts?.length) html += '<div class="empty-tab">No results found.</div>';
  container.innerHTML = html;
}

function exPickPoll(el) {
  const parent = el.closest('.ex-poll');
  parent?.querySelectorAll('.ex-poll-opt').forEach(o => o.classList.remove('selected'));
  el.classList.add('selected');
}

function openExViewer(index) {
  // backward compat for hardcoded demo cards
}

// ═══════════════════════════════════════════════════════════════
// FINANCE PAGE
// ═══════════════════════════════════════════════════════════════
let financeLoaded = { overview: false, bounties: false, earnings: false, wallet: false };

function finTab(tab, btn) {
  document.querySelectorAll('.fin-tab').forEach(t => t.classList.remove('active'));
  btn.classList.add('active');
  document.querySelectorAll('.fin-section').forEach(s => s.classList.remove('active'));
  document.getElementById('fin-' + tab)?.classList.add('active');
  if (!financeLoaded[tab]) {
    loadFinanceTab(tab);
    financeLoaded[tab] = true;
  }
}

async function initFinance() {
  financeLoaded = { overview: false, bounties: false, earnings: false, wallet: false };
  await loadFinanceTab('overview');
  financeLoaded['overview'] = true;
}

async function loadFinanceTab(tab) {
  if (tab === 'overview') {
    const res = await apiRequest({ status: 'get_feed', seen_keys: [], n: 5, type_filter: 'bounty' });
    const container = document.getElementById('fin-overview-bounties');
    if (container && res.posts) {
      container.innerHTML = res.posts.map(p => {
        const b = p.extras || {};
        return `
          <div class="fin-bounty-card" onclick="openPostViewer('${p.post_key}')">
            <div style="font-weight:600;font-size:14px;">${b.title || p.content}</div>
            <div style="font-size:12px;color:#666;margin-top:4px;">${p.full_name} &bull; ${p.time_ago || ''}</div>
            <div class="bounty-reward" style="margin-top:8px;">${b.amount || ''}</div>
          </div>`;
      }).join('');
    }
  }

  if (tab === 'bounties') {
    const res = await apiRequest({ status: 'get_feed', seen_keys: [], n: 20, type_filter: 'bounty' });
    const container = document.getElementById('fin-bounties-list');
    if (container && res.posts) {
      container.innerHTML = res.posts.length === 0
        ? '<div class="empty-tab">No bounties yet.</div>'
        : res.posts.map(p => {
            const b = p.extras || {};
            return `
              <div class="fin-item" onclick="openPostViewer('${p.post_key}')">
                <div class="fin-item-title">${b.title || p.content}</div>
                <div class="fin-item-meta">${p.full_name} &bull; ${b.category || ''} &bull; ${p.time_ago || ''}</div>
                <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px;">
                  <div class="bounty-reward">${b.amount || ''}</div>
                  <button class="ex-apply" onclick="event.stopPropagation();applyBounty('${p.post_key}','')">Apply</button>
                </div>
              </div>`;
          }).join('');
    }
  }

  if (tab === 'earnings') {
    const user_key = getUserKey();
    const res      = await apiRequest({ status: 'get_user_posts', tab: 'posts', seen_keys: [] });
    const container = document.getElementById('fin-earnings-stats');
    if (container) {
      const totalLikes = (res.posts || []).reduce((sum, p) => sum + (p.like_count || 0), 0);
      container.innerHTML = `
        <div class="fin-stat"><div class="fin-stat-value">${totalLikes}</div><div class="fin-stat-label">Total Likes</div></div>
        <div class="fin-stat"><div class="fin-stat-value">${(res.posts || []).length}</div><div class="fin-stat-label">Posts</div></div>`;
    }
  }
}

// ═══════════════════════════════════════════════════════════════
// BOARD PAGE
// ═══════════════════════════════════════════════════════════════
async function initBoard() {
  document.querySelectorAll('.board-filter')?.forEach(filter => {
    filter.addEventListener('click', function () {
      document.querySelectorAll('.board-filter').forEach(f => f.classList.remove('active'));
      this.classList.add('active');
    });
  });
}
// Board filter — keep existing logic working
document.querySelectorAll('.board-filter')?.forEach(filter => {
  filter.addEventListener('click', function () {
    document.querySelectorAll('.board-filter').forEach(f => f.classList.remove('active'));
    this.classList.add('active');
  });
});

// Board search — keep existing logic working  
document.querySelector('.board-search-input')?.addEventListener('input', function (e) {
  const query = e.target.value.toLowerCase();
  document.querySelectorAll('.board-post, .board-announcement')?.forEach(post => {
    const text = post.textContent.toLowerCase();
    post.style.display = text.includes(query) ? '' : 'none';
  });
});

// ═══════════════════════════════════════════════════════════════
// GLOBAL COMMUNITY CHAT
// ═══════════════════════════════════════════════════════════════
let globalChatOpen = false;

async function openGlobalChat() {
  globalChatOpen = true;
  const modal = document.getElementById('globalChatModal');
  if (modal) modal.style.display = 'flex';
  await loadGlobalMessages();
}

function closeGlobalChat() {
  globalChatOpen = false;
  const modal = document.getElementById('globalChatModal');
  if (modal) modal.style.display = 'none';
}

// Wire the global community button
document.getElementById('openGlobal')?.addEventListener('click', openGlobalChat);

// ═══════════════════════════════════════════════════════════════
// NAVIGATE — Updated to call init functions
// ═══════════════════════════════════════════════════════════════
function navigate(sectionId) {
  closeDrawer();
  const sections = ['Trending','Research','Explore','Finance','Board','Settings','profile','Create','Messages'];
  sections.forEach(id => {
    const el = document.getElementById(id);
if (el) el.style.display = id === sectionId ? 'block' : 'none';
  });

  if (sectionId === 'Trending')  loadTrendingFeed();
  if (sectionId === 'Research')  initResearch();
  if (sectionId === 'Explore')   initExplore();
  if (sectionId === 'Finance')   initFinance();
  if (sectionId === 'Board')     initBoard();
  if (sectionId === 'Messages')  loadConversations();
  if (sectionId === 'profile')   initProfile();
}
</script>

</body>
</html>